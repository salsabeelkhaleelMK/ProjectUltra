import{j as h,p as _,i as w,x as k,y as O,c as a,d as e,h as c,f as b,F as j,r as C,e as S,t as s,n as x,C as N,g as B,u as D,o as d}from"./index-BD7Ni8RS.js";import{u as I}from"./opportunities-D6ZLefEd.js";const V={class:"h-full flex flex-col lg:flex-row overflow-hidden bg-gray-50"},M={class:"w-full lg:w-80 bg-white border-r border-gray-200 flex flex-col shrink-0 max-h-[40vh] lg:max-h-none"},F={class:"flex-1 overflow-y-auto px-4 space-y-3 pb-4 scrollbar-hide"},L=["onClick"],P={class:"flex justify-between items-start mb-2.5"},E={class:"flex items-center gap-1.5 flex-wrap"},U={class:"text-[10px] font-bold uppercase tracking-wide text-gray-400"},$={class:"flex items-center gap-3"},z={class:"w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-xs font-bold"},A={class:"flex-1 min-w-0"},R={class:"font-bold text-gray-800 text-sm leading-tight truncate"},W={class:"flex items-center gap-1.5 text-gray-600 text-xs mt-0.5"},T={class:"font-medium truncate"},q={class:"mt-2 text-xs font-semibold text-gray-900"},G={class:"flex-1 flex flex-col overflow-hidden"},H={key:0,class:"flex-1 flex items-center justify-center"},J={key:1,class:"flex-1 flex flex-col overflow-hidden"},K={class:"bg-white border-b border-gray-200 shrink-0 shadow-sm"},Q={class:"px-4 md:px-8 py-4 md:py-6"},X={class:"flex justify-between items-start gap-4"},Y={class:"flex items-center gap-3 md:gap-4 min-w-0 flex-1"},Z={class:"w-12 h-12 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center text-lg font-bold border-2 border-white shadow-sm"},ee={class:"min-w-0 flex-1"},te={class:"flex items-center gap-2"},se={class:"text-lg md:text-xl font-bold text-gray-900 truncate"},re={class:"flex flex-wrap items-center gap-2 mt-1"},oe={class:"px-2 py-0.5 rounded-full border bg-blue-50 border-blue-100 text-blue-700 text-xs font-semibold"},le={key:0,class:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6 animate-fade-in"},ae={class:"text-sm font-medium text-gray-700 mt-1"},de={class:"text-sm font-medium text-gray-700 mt-1"},ie={class:"text-sm font-medium text-gray-700 mt-1"},ne={class:"flex-1 overflow-y-auto p-4 md:p-8 max-w-4xl mx-auto w-full scrollbar-hide"},xe={class:"mb-6"},ue={class:"inline-flex items-center bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden"},pe={class:"flex items-center gap-2 px-3 py-1.5"},ge={class:"text-xs font-bold text-gray-800"},ce={class:"flex items-center gap-2 px-3 py-1.5"},be={class:"flex items-center gap-2"},fe={class:"w-16 bg-gray-200 rounded-full h-2"},me={class:"text-xs font-bold text-gray-800"},ye={class:"flex items-center gap-2 px-3 py-1.5"},ve={class:"text-xs font-bold text-gray-800"},he={class:"bg-white border border-gray-200 rounded-xl shadow-sm mb-6 p-4"},_e={class:"flex items-center justify-between"},we={class:"flex items-center gap-4"},ke={class:"font-bold text-gray-800"},Oe={class:"text-right"},je={class:"font-bold text-gray-800"},Ce={class:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden mb-8"},Se={class:"p-5"},Ne={class:"bg-purple-50/50 border border-purple-100 rounded-lg p-4"},Be={class:"flex gap-3"},De={class:"bg-gray-800 hover:bg-gray-900 text-white font-medium px-4 py-2 rounded-lg text-sm flex items-center gap-2"},Ie={key:0,class:"hidden xl:flex w-80 bg-white border-l border-gray-200 shrink-0 flex flex-col"},Pe={__name:"OpportunityDetail",setup(Ve){const p=k(),f=D(),i=I(),n=h(!1),r=_(()=>i.currentOpportunity);w(()=>{const o=p.params.id;i.loadOpportunityById(o),i.loadOpportunities()}),O(()=>p.params.id,o=>{o&&i.loadOpportunityById(o)});const m=o=>{f.push(`/opportunities/${o}`)},u=o=>new Intl.NumberFormat("en-US").format(o),y=o=>o?new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-",v=o=>({"Open Opportunities":"bg-blue-100 text-blue-700 border-blue-200","In Negotiation":"bg-orange-100 text-orange-700 border-orange-200",Won:"bg-green-100 text-green-700 border-green-200",Lost:"bg-red-100 text-red-700 border-red-200"})[o]||"bg-gray-100 text-gray-700 border-gray-200";return(o,t)=>(d(),a("div",V,[e("div",M,[t[2]||(t[2]=b('<div class="h-16 px-5 border-b border-gray-100 flex justify-between items-center bg-gray-50/50"><h2 class="font-bold text-lg text-gray-800">Opportunities</h2><button class="text-xs font-medium bg-white hover:bg-gray-50 px-3 py-1.5 rounded-md border border-gray-200"> Urgent first <i class="fa-solid fa-chevron-down text-[10px] ml-1"></i></button></div><div class="px-5 py-3"><div class="relative"><i class="fa-solid fa-magnifying-glass absolute left-3 top-2.5 text-gray-400 text-sm"></i><input type="text" placeholder="Search..." class="w-full bg-gray-50 border border-gray-200 rounded-lg pl-9 pr-3 py-2 text-sm"></div></div>',2)),e("div",F,[(d(!0),a(j,null,C(S(i).opportunities,l=>{var g;return d(),a("div",{key:l.id,onClick:Me=>m(l.id),class:x(["rounded-xl p-3 cursor-pointer transition-all",((g=r.value)==null?void 0:g.id)===l.id?"bg-white border-2 border-purple-500 shadow-md":"bg-white border border-gray-200 hover:border-purple-300"])},[e("div",P,[e("div",E,[e("span",{class:x(["text-[10px] font-bold uppercase px-2 py-0.5 rounded border",v(l.stage)])},s(l.stage),3)]),e("span",U,s(l.probability)+"% prob ",1)]),e("div",$,[e("div",z,s(l.customer.initials),1),e("div",A,[e("div",R,s(l.customer.name),1),e("div",W,[t[1]||(t[1]=e("i",{class:"fa-solid fa-car text-gray-400"},null,-1)),e("span",T,s(l.vehicle.brand)+" "+s(l.vehicle.model),1)])])]),e("div",q," €"+s(u(l.value)),1)],10,L)}),128))])]),e("div",G,[r.value?(d(),a("div",J,[e("header",K,[e("div",Q,[e("div",X,[e("div",Y,[e("div",Z,s(r.value.customer.initials),1),e("div",ee,[e("div",te,[e("h1",se,s(r.value.customer.name),1)]),e("div",re,[t[4]||(t[4]=e("span",{class:"px-2 py-0.5 rounded-full border bg-purple-50 border-purple-100 text-purple-700 text-xs font-semibold"}," Opportunity ",-1)),e("span",oe," €"+s(u(r.value.value)),1)])])]),e("button",{onClick:t[0]||(t[0]=l=>n.value=!n.value),class:"w-9 h-9 flex items-center justify-center bg-white border border-gray-200 rounded-lg hover:bg-gray-50"},[e("i",{class:x(["fa-solid fa-chevron-down text-sm",{"rotate-180":n.value}])},null,2)])]),n.value?(d(),a("div",le,[e("div",null,[t[5]||(t[5]=e("span",{class:"text-[10px] uppercase font-bold text-gray-400 tracking-wider"},"Email",-1)),e("div",ae,s(r.value.customer.email),1)]),e("div",null,[t[6]||(t[6]=e("span",{class:"text-[10px] uppercase font-bold text-gray-400 tracking-wider"},"Phone",-1)),e("div",de,s(r.value.customer.phone),1)]),e("div",null,[t[7]||(t[7]=e("span",{class:"text-[10px] uppercase font-bold text-gray-400 tracking-wider"},"Expected Close",-1)),e("div",ie,s(y(r.value.expectedCloseDate)),1)])])):c("",!0)])]),e("main",ne,[e("div",xe,[e("div",ue,[e("div",pe,[t[8]||(t[8]=e("span",{class:"text-[10px] text-gray-400 font-bold uppercase"},"Stage",-1)),e("span",ge,s(r.value.stage),1)]),t[11]||(t[11]=e("div",{class:"w-px h-4 bg-gray-200"},null,-1)),e("div",ce,[t[9]||(t[9]=e("span",{class:"text-[10px] text-gray-400 font-bold uppercase"},"Probability",-1)),e("div",be,[e("div",fe,[e("div",{class:x(["h-2 rounded-full transition-all",r.value.probability>=70?"bg-green-500":r.value.probability>=40?"bg-orange-500":"bg-red-500"]),style:N({width:r.value.probability+"%"})},null,6)]),e("span",me,s(r.value.probability)+"%",1)])]),t[12]||(t[12]=e("div",{class:"w-px h-4 bg-gray-200"},null,-1)),e("div",ye,[t[10]||(t[10]=e("span",{class:"text-[10px] text-gray-400 font-bold uppercase"},"Owner",-1)),e("span",ve,s(r.value.assignee),1)])])]),e("div",he,[e("div",_e,[e("div",we,[t[14]||(t[14]=e("div",{class:"w-16 h-12 bg-gray-200 rounded-md overflow-hidden flex items-center justify-center"},[e("i",{class:"fa-solid fa-car text-3xl text-gray-400"})],-1)),e("div",null,[t[13]||(t[13]=e("div",{class:"text-xs text-gray-500 mb-0.5"},"Vehicle",-1)),e("div",ke,s(r.value.vehicle.brand)+" "+s(r.value.vehicle.model)+" ("+s(r.value.vehicle.year)+")",1)])]),e("div",Oe,[t[15]||(t[15]=e("div",{class:"text-xs text-gray-500 mb-0.5"},"Opportunity Value",-1)),e("div",je,"€ "+s(u(r.value.value)),1)])])]),e("div",Ce,[t[19]||(t[19]=e("div",{class:"p-4 border-b border-gray-100 bg-gray-50/50 flex justify-between items-center"},[e("h3",{class:"font-bold text-gray-800 text-sm"},"Manage this opportunity"),e("span",{class:"text-xs bg-purple-100 text-purple-700 px-2 py-0.5 rounded font-medium"},"Active")],-1)),e("div",Se,[e("div",Ne,[t[18]||(t[18]=e("div",{class:"flex justify-between items-start mb-3"},[e("div",null,[e("h4",{class:"font-bold text-gray-800 text-sm"},"Next Step: Follow-up"),e("p",{class:"text-xs text-gray-500 mt-0.5"},"Continue negotiation process")]),e("span",{class:"text-purple-600 bg-white border border-purple-100 px-2 py-1 rounded text-xs font-semibold"}," In Progress ")],-1)),e("div",Be,[e("button",De,[B(s(r.value.customer.phone)+" Call ",1),t[16]||(t[16]=e("i",{class:"fa-solid fa-phone text-xs"},null,-1))]),t[17]||(t[17]=e("button",{class:"bg-white hover:bg-gray-50 border border-gray-200 text-gray-700 font-medium px-4 py-2 rounded-lg text-sm"}," Schedule Meeting ",-1))])])]),t[20]||(t[20]=e("div",{class:"bg-gray-50 border-t border-gray-200 p-4 flex justify-end gap-3"},[e("button",{class:"bg-white hover:bg-red-50 text-gray-700 hover:text-red-600 border border-gray-200 hover:border-red-200 font-medium px-4 py-2.5 rounded-lg text-sm"}," Mark as Lost "),e("button",{class:"bg-white hover:bg-gray-50 text-gray-700 border border-gray-200 font-medium px-4 py-2.5 rounded-lg text-sm"}," Postpone "),e("button",{class:"bg-green-600 hover:bg-green-700 text-white font-medium px-6 py-2.5 rounded-lg text-sm shadow-lg"}," Mark as Won ")],-1))])])])):(d(),a("div",H,[...t[3]||(t[3]=[e("div",{class:"text-center"},[e("i",{class:"fa-solid fa-gem text-6xl text-gray-300 mb-4"}),e("p",{class:"text-gray-500"},"Select an opportunity to view details")],-1)])]))]),r.value?(d(),a("div",Ie,[...t[21]||(t[21]=[b('<div class="h-16 px-5 border-b border-gray-100 bg-gray-50/50 flex items-center"><h2 class="font-bold text-lg text-gray-800">Activity summary</h2></div><div class="flex-1 overflow-y-auto px-5 py-6 scrollbar-hide"><div class="text-center py-8 text-gray-400"><i class="fa-solid fa-clock text-4xl mb-2"></i><p class="text-sm">No activities yet</p></div></div>',2)])])):c("",!0)]))}};export{Pe as default};
