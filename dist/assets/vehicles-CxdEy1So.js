import{as as c,D as x,r as u,c as h}from"./index-D8nDSNmq.js";const i=(a=300)=>new Promise(t=>setTimeout(t,a)),C=async(a={})=>{await i();let t=[...c];if(a.status&&(t=t.filter(e=>e.status===a.status)),a.brand&&(t=t.filter(e=>e.brand===a.brand)),a.search){const e=a.search.toLowerCase();t=t.filter(s=>s.brand.toLowerCase().includes(e)||s.model.toLowerCase().includes(e)||s.vin.toLowerCase().includes(e))}return{data:t,total:t.length}},L=async a=>{await i();const t=c.find(e=>e.id===parseInt(a));if(!t)throw new Error("Vehicle not found");return t},B=async a=>{await i();const t={id:c.length+1,...a,stockDays:0};return c.push(t),t},E=async(a,t)=>{await i();const e=c.findIndex(s=>s.id===parseInt(a));if(e===-1)throw new Error("Vehicle not found");return c[e]={...c[e],...t},c[e]},k=async a=>{await i();const t=c.findIndex(e=>e.id===parseInt(a));if(t===-1)throw new Error("Vehicle not found");return c.splice(t,1),{success:!0}},S=x("vehicles",()=>{const a=u([]),t=u(null),e=u(!1),s=u(null),o=u({status:null,brand:null,search:""}),v=h(()=>a.value.length),y=h(()=>a.value.filter(l=>l.status==="Available")),w=h(()=>a.value.reduce((l,n)=>l+n.price,0)),d=async()=>{e.value=!0,s.value=null;try{const l=await C(o.value);a.value=l.data}catch(l){s.value=l.message}finally{e.value=!1}},V=async l=>{e.value=!0,s.value=null;try{t.value=await L(l)}catch(n){s.value=n.message}finally{e.value=!1}},m=async l=>{e.value=!0,s.value=null;try{const n=await B(l);return a.value.unshift(n),n}catch(n){throw s.value=n.message,n}finally{e.value=!1}},p=async(l,n)=>{e.value=!0,s.value=null;try{const r=await E(l,n),f=a.value.findIndex(b=>b.id===l);return f!==-1&&(a.value[f]=r),r}catch(r){throw s.value=r.message,r}finally{e.value=!1}},I=async l=>{e.value=!0,s.value=null;try{await k(l),a.value=a.value.filter(n=>n.id!==l)}catch(n){throw s.value=n.message,n}finally{e.value=!1}};function g(l){o.value={...o.value,...l},d()}return{vehicles:a,currentVehicle:t,loading:e,error:s,filters:o,totalVehicles:v,availableVehicles:y,totalInventoryValue:w,fetchVehicles:d,fetchVehicleById:V,addVehicle:m,modifyVehicle:p,removeVehicle:I,setFilters:g}});export{C as f,S as u};
