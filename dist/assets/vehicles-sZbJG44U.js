import{au as c,D as x,r as u,c as h}from"./index-BSxt259F.js";const i=(a=300)=>new Promise(t=>setTimeout(t,a)),C=async(a={})=>{await i();let t=[...c];if(a.status&&(t=t.filter(e=>e.status===a.status)),a.brand&&(t=t.filter(e=>e.brand===a.brand)),a.search){const e=a.search.toLowerCase();t=t.filter(n=>n.brand.toLowerCase().includes(e)||n.model.toLowerCase().includes(e)||n.vin.toLowerCase().includes(e))}return{data:t,total:t.length}},L=async a=>{await i();const t=c.find(e=>e.id===parseInt(a));if(!t)throw new Error("Vehicle not found");return t},B=async a=>{await i();const t={id:c.length+1,...a,stockDays:0};return c.push(t),t},E=async(a,t)=>{await i();const e=c.findIndex(n=>n.id===parseInt(a));if(e===-1)throw new Error("Vehicle not found");return c[e]={...c[e],...t},c[e]},k=async a=>{await i();const t=c.findIndex(e=>e.id===parseInt(a));if(t===-1)throw new Error("Vehicle not found");return c.splice(t,1),{success:!0}},S=x("vehicles",()=>{const a=u([]),t=u(null),e=u(!1),n=u(null),o=u({status:null,brand:null,search:""}),v=h(()=>a.value.length),y=h(()=>a.value.filter(l=>l.status==="Available")),w=h(()=>a.value.reduce((l,s)=>l+s.price,0)),d=async()=>{e.value=!0,n.value=null;try{const l=await C(o.value);a.value=l.data}catch(l){n.value=l.message}finally{e.value=!1}},V=async l=>{e.value=!0,n.value=null;try{t.value=await L(l)}catch(s){n.value=s.message}finally{e.value=!1}},m=async l=>{e.value=!0,n.value=null;try{const s=await B(l);return a.value.unshift(s),s}catch(s){throw n.value=s.message,s}finally{e.value=!1}},p=async(l,s)=>{e.value=!0,n.value=null;try{const r=await E(l,s),f=a.value.findIndex(b=>b.id===l);return f!==-1&&(a.value[f]=r),r}catch(r){throw n.value=r.message,r}finally{e.value=!1}},I=async l=>{e.value=!0,n.value=null;try{await k(l),a.value=a.value.filter(s=>s.id!==l)}catch(s){throw n.value=s.message,s}finally{e.value=!1}};function g(l){o.value={...o.value,...l},d()}return{vehicles:a,currentVehicle:t,loading:e,error:n,filters:o,totalVehicles:v,availableVehicles:y,totalInventoryValue:w,fetchVehicles:d,fetchVehicleById:V,addVehicle:m,modifyVehicle:p,removeVehicle:I,setFilters:g}});export{C as f,S as u};
