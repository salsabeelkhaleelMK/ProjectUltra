import{d as A,o as S,F as E,i as W,n as L,e as r,s as a,t as z,y as l,K as Q,c as V,x as J,B as s,g as X,k as i,O as Z,G as _,r as h,m as ee,Q as m,h as le,w as te}from"./index-BSxt259F.js";import{u as R}from"./vehicles-sZbJG44U.js";import{_ as ae}from"./PageHeader-D-QUKZVE.js";import{z as H,n as D,d as se,f as ne,F as re,L as oe,g as ie,h as ue,K as de,Q as v,c as k,G as O,W as q,U as B,H as P,j as b,o as me,C as pe}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-CK4ymTFf.js";import{y as ce}from"./components-WJKgpbNX.js";import{u as fe}from"./useTableRowSelection-Bs49OKi4.js";const ge={class:"flex items-center gap-3 mb-4 overflow-x-auto pb-2 scrollbar-hide"},ye=["onClick"],ve={class:"text-sm font-medium text-foreground whitespace-nowrap"},be={__name:"VehicleFilters",props:{vehicleTabs:{type:Array,required:!0},vehicleFilter:{type:String,required:!0}},emits:["filter-change"],setup(f){return(y,u)=>(S(),A("div",ge,[(S(!0),A(E,null,W(f.vehicleTabs,c=>(S(),A("button",{key:c.key,onClick:x=>y.$emit("filter-change",c.key),class:L(["flex items-center justify-between gap-3 px-4 py-3 bg-white border border-border rounded-lg cursor-pointer hover:shadow-sm transition-all shrink-0 min-w-40 border-t-4",f.vehicleFilter===c.key?c.borderColor:"border-t-border"])},[r("span",ve,z(c.label),1),a(l(H),{text:String(c.count),size:"small",theme:f.vehicleFilter===c.key?"blue":"gray"},null,8,["text","theme"])],10,ye))),128))]))}},we={key:0,class:"flex items-center gap-2"},ke={class:"flex items-center gap-2 mr-1"},Ve={class:"flex items-center justify-center min-w-[20px] h-5 px-1.5 rounded-full bg-blue-600 text-white text-xs font-medium"},he={__name:"VehicleGrid",props:{filteredVehicles:{type:Array,required:!0},columns:{type:Array,required:!0},loading:{type:Boolean,default:!1},tableMeta:{type:Object,required:!0},filterDefinitions:{type:Array,required:!0},pagination:{type:Object,required:!0},globalFilter:{type:String,required:!0},sorting:{type:Array,required:!0},columnFilters:{type:Array,required:!0}},emits:["row-click","update:pagination","update:globalFilter","update:sorting","update:columnFilters"],setup(f,{emit:y}){const u=f,c=y,x=R(),{rowSelection:w,selectedCount:M,hasSelection:$,getSelectedRows:N,clearSelection:U}=fe(p=>String(p.id)),I=()=>{const p=N(u.filteredVehicles);p.length!==0&&confirm(`Are you sure you want to delete ${p.length} ${p.length===1?"vehicle":"vehicles"}?`)&&(p.forEach(d=>{x.deleteVehicle(d.id)}),U())},T=V({get:()=>u.pagination,set:p=>c("update:pagination",p)}),o=V({get:()=>u.globalFilter,set:p=>c("update:globalFilter",p)}),C=V({get:()=>u.sorting,set:p=>c("update:sorting",p)}),F=V({get:()=>u.columnFilters,set:p=>c("update:columnFilters",p)});return(p,d)=>(S(),J(l(ce),{data:f.filteredVehicles,columns:f.columns,loading:f.loading,meta:f.tableMeta,onRowClick:d[0]||(d[0]=g=>p.$emit("row-click",g)),columnFiltersOptions:{filterDefs:f.filterDefinitions},pagination:T.value,"onUpdate:pagination":d[1]||(d[1]=g=>T.value=g),globalFilter:o.value,"onUpdate:globalFilter":d[2]||(d[2]=g=>o.value=g),sorting:C.value,"onUpdate:sorting":d[3]||(d[3]=g=>C.value=g),columnFilters:F.value,"onUpdate:columnFilters":d[4]||(d[4]=g=>F.value=g),rowSelection:l(w),"onUpdate:rowSelection":d[5]||(d[5]=g=>_(w)?w.value=g:null),paginationOptions:{rowCount:f.filteredVehicles.length},globalFilterOptions:{debounce:300,placeholder:"Q Search or ask a question"},class:"h-full"},{toolbar:s(()=>[Z(p.$slots,"toolbar",{},void 0,!0)]),"empty-state":s(()=>[...d[6]||(d[6]=[r("div",{class:"empty-state"},[r("i",{class:"fa-solid fa-car empty-state-icon"}),r("p",{class:"empty-state-text"},"No vehicles found")],-1)])]),"batch-action-bar":s(()=>[l($)?(S(),A("div",we,[r("div",ke,[r("div",Ve,z(l(M)),1),d[7]||(d[7]=r("span",{class:"text-white text-fluid-sm font-medium whitespace-nowrap"},"Items selected",-1))]),d[10]||(d[10]=r("div",{class:"h-4 w-px bg-greys-700"},null,-1)),a(l(D),{variant:"ghost",size:"sm",onClick:I},{default:s(()=>[...d[8]||(d[8]=[r("i",{class:"fa-solid fa-trash mr-2"},null,-1),i(" Delete ",-1)])]),_:1}),a(l(D),{variant:"ghost",size:"sm",onClick:l(U)},{default:s(()=>[...d[9]||(d[9]=[r("i",{class:"fa-solid fa-x mr-2"},null,-1),i(" Close ",-1)])]),_:1},8,["onClick"])])):X("",!0)]),_:3},8,["data","columns","loading","meta","columnFiltersOptions","pagination","globalFilter","sorting","columnFilters","rowSelection","paginationOptions"]))}},xe=Q(he,[["__scopeId","data-v-2ea3162f"]]);function Fe(){const f=R(),y=h(!1),u=h({brand:"",model:"",year:"",vin:"",plates:"",fuelType:"",gearType:"",kilometers:"",registration:"",owner:"",ownershipType:"",ownedSince:"",warrantyInfo:"",stockDays:null}),c=()=>{y.value=!1,u.value={brand:"",model:"",year:"",vin:"",plates:"",fuelType:"",gearType:"",kilometers:"",registration:"",owner:"",ownershipType:"",ownedSince:"",warrantyInfo:"",stockDays:null}};return{showAddModal:y,newVehicle:u,handleCloseModal:c,handleSubmit:async()=>{try{const w={brand:u.value.brand,model:u.value.model,year:parseInt(u.value.year)||null,vin:u.value.vin||null,plates:u.value.plates||null,fuelType:u.value.fuelType||null,gearType:u.value.gearType||null,kilometers:parseInt(u.value.kilometers)||0,registration:u.value.registration||null,owner:u.value.owner||null,ownershipType:u.value.ownershipType||null,ownedSince:u.value.ownedSince||null,warrantyInfo:u.value.warrantyInfo||null,stockDays:null,status:"Available"};await f.addVehicle(w),c()}catch(w){console.error("Error adding vehicle:",w)}}}}const Se={class:"page-container"},Te={class:"p-4 md:p-8"},Ce={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ae={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},De={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ue={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Be={__name:"Vehicles",setup(f){le();const y=R(),u=h("in-stock"),c=h({pageIndex:0,pageSize:10}),x=h(""),w=h([]),M=h([]),$=t=>{t||C()},N=V(()=>u.value==="in-stock"?y.vehicles.filter(t=>t.stockDays!==null&&t.stockDays!==void 0):y.vehicles.filter(t=>t.stockDays===null||t.stockDays===void 0)),U=V(()=>[{key:"in-stock",label:"In stock",count:y.vehicles.filter(t=>t.stockDays!==null&&t.stockDays!==void 0).length,borderColor:"border-t-blue-600"},{key:"customer-vehicles",label:"Customers' vehicles",count:y.vehicles.filter(t=>t.stockDays===null||t.stockDays===void 0).length,borderColor:"border-t-purple-600"}]),I=t=>{u.value=t},{showAddModal:T,newVehicle:o,handleCloseModal:C,handleSubmit:F}=Fe(),p=[{key:"status",label:"Status",type:"select",operators:[{value:"eq",label:"is"},{value:"ne",label:"is not"}],options:[{value:"Available",label:"Available"},{value:"In Stock",label:"In Stock"},{value:"Sold",label:"Sold"}],aiHint:"Vehicle availability status"},{key:"brand",label:"Brand",type:"multiselect",operators:[{value:"in",label:"is any of"},{value:"notIn",label:"is none of"}],options:[{value:"Volkswagen",label:"Volkswagen"},{value:"Mercedes-Benz",label:"Mercedes-Benz"},{value:"Audi",label:"Audi"},{value:"Porsche",label:"Porsche"}],aiHint:"Car manufacturer brand"},{key:"price",label:"Price",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],prefix:"â‚¬",aiHint:"Vehicle price in euros"},{key:"stockDays",label:"Stock Days",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],aiHint:"Number of days in stock"}];ee(()=>{y.fetchVehicles()});const d=t=>{t.original},g=t=>new Intl.NumberFormat("en-US").format(t),Y=V(()=>({class:{tr:()=>"cursor-pointer hover:bg-muted transition-colors"}})),j=t=>t.kilometers===0?t.year===new Date().getFullYear()?"New":"New 0km":"Used",K=t=>t?(typeof t=="string"&&t.includes("/"),t):"N/A",G=V(()=>u.value==="in-stock"?[{accessorKey:"image",header:"Photo",meta:{title:"Photo"},cell:({row:t})=>{const e=t.original;return e.image?m("img",{src:e.image,alt:`${e.brand} ${e.model}`,class:"w-16 h-16 object-cover rounded-md"}):m("div",{class:"w-16 h-16 bg-surface border border-border rounded-md flex items-center justify-center shrink-0"},[m("i",{class:"fa-solid fa-car text-2xl text-muted-foreground"})])}},{accessorKey:"brand",header:"Vehicle",meta:{title:"Vehicle"},cell:({row:t})=>{const e=t.original;return m("div",[m("div",{class:"text-content-bold"},`${e.brand} ${e.model}`),m("div",{class:"text-meta"},e.year)])}},{accessorKey:"type",header:"Type",meta:{title:"Type"},cell:({row:t})=>{const e=t.original,n=j(e);return m("span",{class:"text-meta"},n)}},{accessorKey:"engine",header:"Engine",meta:{title:"Engine"},cell:({row:t})=>m("span",{class:"text-meta"},"N/A")},{accessorKey:"fuelType",header:"Fuel type",meta:{title:"Fuel type"},cell:({row:t})=>m("span",{class:"text-meta"},t.original.fuelType||"N/A")},{accessorKey:"gearType",header:"Gear type",meta:{title:"Gear type"},cell:({row:t})=>m("span",{class:"text-meta"},t.original.gearType||"N/A")},{accessorKey:"registration",header:"Registered at",meta:{title:"Registered at"},cell:({row:t})=>{const e=t.original;return m("span",{class:"text-meta"},K(e.registration)||"N/A")}},{accessorKey:"kilometers",header:"Mileage",meta:{title:"Mileage"},cell:({row:t})=>m("span",{class:"text-meta"},`${g(t.original.kilometers)} km`)},{accessorKey:"stockDays",header:"Days in stock",meta:{title:"Days in stock"},cell:({row:t})=>{const e=t.original.stockDays,n=e>300?"text-red-600":"text-gray-600";return m("span",{class:`text-sm font-medium ${n}`},`${e} days`)}},{accessorKey:"dealership",header:"Dealership",meta:{title:"Dealership"},cell:({row:t})=>m("span",{class:"text-meta"},t.original.dealership||"N/A")},{accessorKey:"status",header:"Availability",meta:{title:"Availability"},cell:({row:t})=>{const e=t.original.status;return m(H,{text:e,size:"small",theme:e==="Available"?"green":e==="In Stock"?"blue":"gray"})}}]:[{accessorKey:"brand",header:"Vehicle",meta:{title:"Vehicle"},cell:({row:t})=>{const e=t.original;return m("div",[m("div",{class:"text-content-bold"},`${e.brand} ${e.model}`),m("div",{class:"text-meta"},e.year)])}},{accessorKey:"plates",header:"Plates",meta:{title:"Plates"},cell:({row:t})=>{const e=t.original,n=e.plates||(e.vin?e.vin.slice(-6):null)||"N/A";return m("span",{class:"text-meta"},n)}},{accessorKey:"kilometers",header:"Mileage",meta:{title:"Mileage"},cell:({row:t})=>m("span",{class:"text-meta"},`${g(t.original.kilometers)} km`)},{accessorKey:"registration",header:"Registered at",meta:{title:"Registered at"},cell:({row:t})=>{const e=t.original;return m("span",{class:"text-meta"},K(e.registration)||"N/A")}},{accessorKey:"owner",header:"Owner",meta:{title:"Owner"},cell:({row:t})=>{const e=t.original,n=e.owner||(e.requestedBy&&e.requestedBy.length>0?e.requestedBy[0]:null)||"N/A";return m("span",{class:"text-meta"},n)}},{accessorKey:"ownershipType",header:"Ownership type",meta:{title:"Ownership type"},cell:({row:t})=>m("span",{class:"text-meta"},"N/A")},{accessorKey:"ownedSince",header:"Owned since",meta:{title:"Owned since"},cell:({row:t})=>{const e=t.original;return m("span",{class:"text-meta"},K(e.registration)||"N/A")}},{accessorKey:"warrantyInfo",header:"Warranty info",meta:{title:"Warranty info"},cell:({row:t})=>m("span",{class:"text-meta"},"N/A")}]);return(t,e)=>(S(),A("div",Se,[a(ae,{title:"Vehicles Inventory"},{actions:s(()=>[a(l(D),{onClick:e[0]||(e[0]=n=>T.value=!0),variant:"outline",size:"small",class:"flex items-center gap-2"},{default:s(()=>[...e[19]||(e[19]=[r("i",{class:"fa-solid fa-plus text-sm"},null,-1),r("span",{class:"hidden sm:inline"},"Add new",-1)])]),_:1})]),_:1}),r("div",Te,[a(be,{"vehicle-tabs":U.value,"vehicle-filter":u.value,onFilterChange:I},null,8,["vehicle-tabs","vehicle-filter"]),a(xe,{"filtered-vehicles":N.value,columns:G.value,loading:l(y).loading,"table-meta":Y.value,"filter-definitions":p,pagination:c.value,"onUpdate:pagination":e[1]||(e[1]=n=>c.value=n),"global-filter":x.value,"onUpdate:globalFilter":e[2]||(e[2]=n=>x.value=n),sorting:w.value,"onUpdate:sorting":e[3]||(e[3]=n=>w.value=n),"column-filters":M.value,"onUpdate:columnFilters":e[4]||(e[4]=n=>M.value=n),onRowClick:d},null,8,["filtered-vehicles","columns","loading","table-meta","pagination","global-filter","sorting","column-filters"])]),a(l(se),{open:l(T),"onUpdate:open":$},{default:s(()=>[a(l(ne),null,{default:s(()=>[a(l(re),{class:"fixed inset-0 z-50 bg-black/50"}),a(l(oe),{class:"w-full sm:max-w-lg"},{default:s(()=>[a(l(ie),null,{default:s(()=>[a(l(ue),null,{default:s(()=>[...e[20]||(e[20]=[i("Add Customer Vehicle",-1)])]),_:1}),a(l(de),null,{default:s(()=>[...e[21]||(e[21]=[i("Fill in the details for the new customer vehicle.",-1)])]),_:1})]),_:1}),r("form",{onSubmit:e[18]||(e[18]=te((...n)=>l(F)&&l(F)(...n),["prevent"])),class:"space-y-4"},[r("div",Ce,[r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[22]||(e[22]=[i("Brand",-1)])]),_:1}),a(l(k),{modelValue:l(o).brand,"onUpdate:modelValue":e[5]||(e[5]=n=>l(o).brand=n),type:"text",placeholder:"e.g., Volkswagen",required:""},null,8,["modelValue"])]),r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[23]||(e[23]=[i("Model",-1)])]),_:1}),a(l(k),{modelValue:l(o).model,"onUpdate:modelValue":e[6]||(e[6]=n=>l(o).model=n),type:"text",placeholder:"e.g., ID.4",required:""},null,8,["modelValue"])]),r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[24]||(e[24]=[i("Year",-1)])]),_:1}),a(l(k),{modelValue:l(o).year,"onUpdate:modelValue":e[7]||(e[7]=n=>l(o).year=n),type:"number",placeholder:"e.g., 2024",min:1900,max:new Date().getFullYear()+1,required:""},null,8,["modelValue","max"])])]),r("div",Ae,[r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[25]||(e[25]=[i("VIN",-1)])]),_:1}),a(l(k),{modelValue:l(o).vin,"onUpdate:modelValue":e[8]||(e[8]=n=>l(o).vin=n),type:"text",placeholder:"Vehicle Identification Number"},null,8,["modelValue"])]),r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[26]||(e[26]=[i("Plates",-1)])]),_:1}),a(l(k),{modelValue:l(o).plates,"onUpdate:modelValue":e[9]||(e[9]=n=>l(o).plates=n),type:"text",placeholder:"License plate number"},null,8,["modelValue"])])]),r("div",De,[r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[27]||(e[27]=[i("Fuel Type",-1)])]),_:1}),a(l(O),{modelValue:l(o).fuelType,"onUpdate:modelValue":e[10]||(e[10]=n=>l(o).fuelType=n)},{default:s(()=>[a(l(q),null,{default:s(()=>[a(l(B),{placeholder:"Select fuel type..."})]),_:1}),a(l(P),null,{default:s(()=>[a(l(b),{value:"Petrol"},{default:s(()=>[...e[28]||(e[28]=[i("Petrol",-1)])]),_:1}),a(l(b),{value:"Diesel"},{default:s(()=>[...e[29]||(e[29]=[i("Diesel",-1)])]),_:1}),a(l(b),{value:"Electric"},{default:s(()=>[...e[30]||(e[30]=[i("Electric",-1)])]),_:1}),a(l(b),{value:"Hybrid"},{default:s(()=>[...e[31]||(e[31]=[i("Hybrid",-1)])]),_:1}),a(l(b),{value:"Plug-in Hybrid"},{default:s(()=>[...e[32]||(e[32]=[i("Plug-in Hybrid",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[33]||(e[33]=[i("Gear Type",-1)])]),_:1}),a(l(O),{modelValue:l(o).gearType,"onUpdate:modelValue":e[11]||(e[11]=n=>l(o).gearType=n)},{default:s(()=>[a(l(q),null,{default:s(()=>[a(l(B),{placeholder:"Select gear type..."})]),_:1}),a(l(P),null,{default:s(()=>[a(l(b),{value:"Manual"},{default:s(()=>[...e[34]||(e[34]=[i("Manual",-1)])]),_:1}),a(l(b),{value:"Automatic"},{default:s(()=>[...e[35]||(e[35]=[i("Automatic",-1)])]),_:1}),a(l(b),{value:"CVT"},{default:s(()=>[...e[36]||(e[36]=[i("CVT",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[37]||(e[37]=[i("Mileage (km)",-1)])]),_:1}),a(l(k),{modelValue:l(o).kilometers,"onUpdate:modelValue":e[12]||(e[12]=n=>l(o).kilometers=n),modelModifiers:{number:!0},type:"number",placeholder:"0",min:0},null,8,["modelValue"])])]),r("div",Me,[r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[38]||(e[38]=[i("Registered At",-1)])]),_:1}),a(l(k),{modelValue:l(o).registration,"onUpdate:modelValue":e[13]||(e[13]=n=>l(o).registration=n),type:"text",placeholder:"MM/YYYY (e.g., 01/2024)"},null,8,["modelValue"])]),r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[39]||(e[39]=[i("Owned Since",-1)])]),_:1}),a(l(k),{modelValue:l(o).ownedSince,"onUpdate:modelValue":e[14]||(e[14]=n=>l(o).ownedSince=n),type:"text",placeholder:"MM/YYYY (e.g., 01/2024)"},null,8,["modelValue"])])]),r("div",Ue,[r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[40]||(e[40]=[i("Owner",-1)])]),_:1}),a(l(k),{modelValue:l(o).owner,"onUpdate:modelValue":e[15]||(e[15]=n=>l(o).owner=n),type:"text",placeholder:"Owner name"},null,8,["modelValue"])]),r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[41]||(e[41]=[i("Ownership Type",-1)])]),_:1}),a(l(O),{modelValue:l(o).ownershipType,"onUpdate:modelValue":e[16]||(e[16]=n=>l(o).ownershipType=n)},{default:s(()=>[a(l(q),null,{default:s(()=>[a(l(B),{placeholder:"Select ownership type..."})]),_:1}),a(l(P),null,{default:s(()=>[a(l(b),{value:"Private"},{default:s(()=>[...e[42]||(e[42]=[i("Private",-1)])]),_:1}),a(l(b),{value:"Company"},{default:s(()=>[...e[43]||(e[43]=[i("Company",-1)])]),_:1}),a(l(b),{value:"Lease"},{default:s(()=>[...e[44]||(e[44]=[i("Lease",-1)])]),_:1}),a(l(b),{value:"Fleet"},{default:s(()=>[...e[45]||(e[45]=[i("Fleet",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),r("div",null,[a(l(v),{class:"form-label"},{default:s(()=>[...e[46]||(e[46]=[i("Warranty Info",-1)])]),_:1}),a(l(me),{modelValue:l(o).warrantyInfo,"onUpdate:modelValue":e[17]||(e[17]=n=>l(o).warrantyInfo=n),rows:3,placeholder:"Warranty information..."},null,8,["modelValue"])])],32),a(l(pe),{class:"flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3"},{default:s(()=>[a(l(D),{label:"Cancel",variant:"outline",class:"w-full sm:w-auto",onClick:l(C)},null,8,["onClick"]),a(l(D),{label:"Add Vehicle",variant:"primary",class:"w-full sm:w-auto",onClick:l(F)},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}};export{Be as default};
