import{u as E,c as b,r as $,A,k as B,p as F,o as a,y as w,e as t,z as i,G as c,B as p,d as n,g as M,F as g,i as y,t as v,m as N,j as h}from"./index-DhXdPUMX.js";import{_ as j}from"./ModalShell-CHgAd1m8.js";import{u as O}from"./users-CzjLCIoh.js";const W={class:"space-y-4"},q={class:"grid grid-cols-2 gap-4"},z=["disabled","value"],G=["disabled"],L={label:"Teams"},H=["value"],I={label:"Users"},J=["value"],K={key:0,class:"text-xs text-gray-500 mt-1"},P=["value"],Y={__name:"CreateEventModal",props:{show:{type:Boolean,required:!0},initialDate:{type:String,default:""},dealerships:{type:Array,default:()=>[]},customer:{type:Object,default:null},assignee:{type:String,default:null},disabledFields:{type:Array,default:()=>[]}},emits:["create","cancel"],setup(o,{emit:C}){const u=o,f=C,m=E(),k=O(),V=b(()=>k.assignableUsers),x=b(()=>k.assignableTeams),T=b(()=>s.value.assignee&&s.value.assignee.startsWith("team-")),s=$({type:"test-drive",title:"",date:"",time:"",customer:"",assignee:"",dealership:""});A(()=>u.show,r=>{var e,d;if(r){const l=u.assignee||`user-${((e=m.currentUser)==null?void 0:e.id)||1}`;s.value={type:"test-drive",title:"",date:u.initialDate||"",time:"",customer:((d=u.customer)==null?void 0:d.name)||"",assignee:l,dealership:""}}}),B(()=>{var r;s.value.assignee||(s.value.assignee=u.assignee||`user-${((r=m.currentUser)==null?void 0:r.id)||1}`)});const S=()=>{s.value.title&&s.value.date&&f("create",{...s.value})},D=()=>{f("cancel")};return(r,e)=>(a(),F(j,{show:o.show,title:"Create New Event",subtitle:"Fill in the details for the new event.",onCancel:D},{actions:w(()=>[t("button",{onClick:S,class:"btn-primary"}," Create Event ")]),default:w(()=>{var d;return[t("div",W,[t("div",null,[e[8]||(e[8]=t("label",{class:"block label-upper mb-2"},"Event Type",-1)),i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.type=l),class:"input"},[...e[7]||(e[7]=[t("option",{value:"test-drive"},"Test Drive",-1),t("option",{value:"appointment"},"Dealership Visit",-1),t("option",{value:"offsite"},"Offsite Visit",-1),t("option",{value:"workshop"},"Workshop",-1),t("option",{value:"call"},"Call",-1),t("option",{value:"delivery"},"Delivery",-1),t("option",{value:"meeting"},"Meeting",-1)])],512),[[c,s.value.type]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block label-upper mb-2"},"Title",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.title=l),type:"text",placeholder:"Event title...",class:"input"},null,512),[[p,s.value.title]])]),t("div",q,[t("div",null,[e[10]||(e[10]=t("label",{class:"block label-upper mb-2"},"Date",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.date=l),type:"date",class:"input"},null,512),[[p,s.value.date]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block label-upper mb-2"},"Time",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.time=l),type:"time",class:"input"},null,512),[[p,s.value.time]])])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block label-upper mb-2"},"Customer",-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.customer=l),type:"text",placeholder:"Customer name...",class:"input",disabled:o.disabledFields.includes("customer"),value:((d=o.customer)==null?void 0:d.name)||s.value.customer},null,8,z),[[p,s.value.customer]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block label-upper mb-2"},"Assign to",-1)),i(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.assignee=l),class:"input",disabled:o.disabledFields.includes("assignee")},[t("optgroup",L,[(a(!0),n(g,null,y(x.value,l=>(a(),n("option",{key:`team-${l.id}`,value:`team-${l.id}`},v(l.name)+" Team ",9,H))),128))]),t("optgroup",I,[(a(!0),n(g,null,y(V.value,l=>{var U;return a(),n("option",{key:`user-${l.id}`,value:`user-${l.id}`},v(l.name)+v(l.id===((U=N(m).currentUser)==null?void 0:U.id)?" (Me)":""),9,J)}),128))])],8,G),[[c,s.value.assignee]]),T.value?(a(),n("p",K,[...e[13]||(e[13]=[t("i",{class:"fa-solid fa-users text-gray-400"},null,-1),h(" Any available team member will be assigned ",-1)])])):M("",!0)]),t("div",null,[e[16]||(e[16]=t("label",{class:"block label-upper mb-2"},"Dealership",-1)),i(t("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.dealership=l),class:"input"},[e[15]||(e[15]=t("option",{value:""},"Select dealership...",-1)),(a(!0),n(g,null,y(o.dealerships,l=>(a(),n("option",{key:l,value:l},v(l),9,P))),128))],512),[[c,s.value.dealership]])])])]}),_:1},8,["show"]))}};export{Y as _};
