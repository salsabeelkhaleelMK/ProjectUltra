import{m as c,l as N,j as m,p as M,i as T,c as p,d as t,t as i,e as h,g as C,w as A,v as B,F as k,r as S,f as E,o as x,q as I,h as V}from"./index-BD7Ni8RS.js";const v=(n=300)=>new Promise(s=>setTimeout(s,n)),j=async(n={})=>{await v();let s=[...c];if(n.search){const a=n.search.toLowerCase();s=s.filter(o=>{var u;return o.name.toLowerCase().includes(a)||o.email.toLowerCase().includes(a)||((u=o.company)==null?void 0:u.toLowerCase().includes(a))})}return{data:s,total:s.length}},Q=async n=>{await v();const s=c.find(a=>a.id===parseInt(n));if(!s)throw new Error("Contact not found");return s},F=async n=>{await v();const s={id:c.length+1,...n,createdAt:new Date().toISOString()};return c.push(s),s},P=async(n,s)=>{await v();const a=c.findIndex(o=>o.id===parseInt(n));if(a===-1)throw new Error("Contact not found");return c[a]={...c[a],...s},c[a]},U=async n=>{await v();const s=c.findIndex(a=>a.id===parseInt(n));if(s===-1)throw new Error("Contact not found");return c.splice(s,1),{success:!0}},$=N("contacts",()=>{const n=m([]),s=m(null),a=m(!1),o=m(null),u=m(""),b=M(()=>n.value.length);async function y(){a.value=!0,o.value=null;try{const r=await j({search:u.value});n.value=r.data}catch(r){o.value=r.message}finally{a.value=!1}}async function e(r){a.value=!0,o.value=null;try{s.value=await Q(r)}catch(d){o.value=d.message}finally{a.value=!1}}async function l(r){a.value=!0,o.value=null;try{const d=await F(r);return n.value.unshift(d),d}catch(d){throw o.value=d.message,d}finally{a.value=!1}}async function f(r,d){a.value=!0,o.value=null;try{const g=await P(r,d),_=n.value.findIndex(L=>L.id===r);return _!==-1&&(n.value[_]=g),g}catch(g){throw o.value=g.message,g}finally{a.value=!1}}async function w(r){a.value=!0,o.value=null;try{await U(r),n.value=n.value.filter(d=>d.id!==r)}catch(d){throw o.value=d.message,d}finally{a.value=!1}}function D(r){u.value=r,y()}return{contacts:n,currentContact:s,loading:a,error:o,searchQuery:u,totalContacts:b,loadContacts:y,loadContactById:e,addContact:l,modifyContact:f,removeContact:w,setSearchQuery:D}}),q={class:"page-container"},O={class:"page-header"},Y={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},z={class:"page-header-subtitle"},G={class:"mt-4 md:mt-6 flex flex-col sm:flex-row items-stretch sm:items-center gap-3"},H={class:"flex-1 min-w-0 sm:max-w-md"},J={class:"relative"},K={class:"p-4 md:p-8"},R={key:0,class:"empty-state"},W={key:1,class:"empty-state"},X={key:2,class:"card overflow-hidden"},Z={class:"overflow-x-auto -mx-4 md:mx-0"},tt={class:"w-full min-w-[1000px]"},et={class:"divide-y divide-gray-100"},st={class:"px-3 md:px-6 py-4 whitespace-nowrap"},at={class:"flex items-center gap-2 md:gap-3"},nt={class:"w-8 h-8 md:w-9 md:h-9 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold shrink-0"},ot={class:"min-w-0"},lt={class:"font-semibold text-gray-900 truncate max-w-[120px] md:max-w-none"},rt={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 whitespace-nowrap"},dt={class:"truncate block max-w-[100px]"},it={class:"px-3 md:px-6 py-4 whitespace-nowrap"},ct={class:"text-xs md:text-sm text-gray-600 truncate max-w-[150px]"},pt={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 whitespace-nowrap"},xt={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 whitespace-nowrap hidden lg:table-cell"},ut={class:"truncate block max-w-xs"},mt={class:"px-3 md:px-6 py-4 whitespace-nowrap"},yt={class:"inline-flex px-2 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-700"},ft={class:"px-3 md:px-6 py-4 whitespace-nowrap hidden xl:table-cell"},wt={class:"flex flex-wrap gap-1"},ht={key:0,class:"text-xs text-gray-400"},gt={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 whitespace-nowrap hidden lg:table-cell"},vt={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 whitespace-nowrap hidden xl:table-cell"},bt={class:"px-4 md:px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3"},_t={class:"text-xs md:text-sm text-gray-600"},kt={__name:"Contacts",setup(n){const s=$(),a=m(""),o=m(!1);T(()=>{s.loadContacts()});const u=()=>{s.setSearchQuery(a.value)},b=y=>{if(!y)return"-";const e=new Date(y),f=Math.abs(new Date-e),w=Math.ceil(f/(1e3*60*60*24));return w===0?"Today":w===1?"Yesterday":w<7?`${w} days ago`:e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})};return(y,e)=>(x(),p("div",q,[t("div",O,[t("div",Y,[t("div",null,[e[4]||(e[4]=t("h1",{class:"page-header-title"},"Contacts & Accounts",-1)),t("p",z,i(h(s).totalContacts)+" contacts",1)]),t("button",{onClick:e[0]||(e[0]=l=>o.value=!0),class:"btn-primary self-start sm:self-auto"},[...e[5]||(e[5]=[t("i",{class:"fa-solid fa-plus"},null,-1),C(),t("span",{class:"hidden sm:inline"},"New Contact",-1),t("span",{class:"sm:hidden"},"New",-1)])])]),t("div",G,[t("div",H,[t("div",J,[e[6]||(e[6]=t("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),A(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>a.value=l),onInput:u,type:"text",placeholder:"Search contacts...",class:"input-with-icon"},null,544),[[B,a.value]])])]),e[7]||(e[7]=t("button",{class:"btn-secondary text-sm"},[t("i",{class:"fa-solid fa-filter mr-2"}),C(" Filters ")],-1))])]),t("div",K,[h(s).loading?(x(),p("div",R,[...e[8]||(e[8]=[t("i",{class:"fa-solid fa-spinner fa-spin text-4xl text-gray-400 mb-4"},null,-1),t("p",{class:"empty-state-text"},"Loading contacts...",-1)])])):h(s).contacts.length===0?(x(),p("div",W,[...e[9]||(e[9]=[t("i",{class:"fa-solid fa-users empty-state-icon"},null,-1),t("p",{class:"empty-state-text"},"No contacts found",-1)])])):(x(),p("div",X,[t("div",Z,[t("table",tt,[e[12]||(e[12]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",null,[t("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},[t("input",{type:"checkbox",class:"rounded"})]),t("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Contact"),t("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Company"),t("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Email"),t("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Phone"),t("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap hidden lg:table-cell"},"Address"),t("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Source"),t("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap hidden xl:table-cell"},"Tags"),t("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap hidden lg:table-cell"},"Last Contact"),t("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap hidden xl:table-cell"},"Created At"),t("th",{class:"px-3 md:px-6 py-3"})])],-1)),t("tbody",et,[(x(!0),p(k,null,S(h(s).contacts,l=>(x(),p("tr",{key:l.id,class:"hover:bg-gray-50 cursor-pointer transition-colors"},[t("td",{class:"px-3 md:px-6 py-4 whitespace-nowrap",onClick:e[2]||(e[2]=I(()=>{},["stop"]))},[...e[10]||(e[10]=[t("input",{type:"checkbox",class:"rounded"},null,-1)])]),t("td",st,[t("div",at,[t("div",nt,i(l.initials),1),t("div",ot,[t("div",lt,i(l.name),1)])])]),t("td",rt,[t("span",dt,i(l.company||"-"),1)]),t("td",it,[t("div",ct,i(l.email),1)]),t("td",pt,i(l.phone),1),t("td",xt,[t("span",ut,i(l.address),1)]),t("td",mt,[t("span",yt,i(l.source),1)]),t("td",ft,[t("div",wt,[(x(!0),p(k,null,S(l.tags,f=>(x(),p("span",{key:f,class:"px-2 py-0.5 rounded-full bg-blue-50 text-blue-700 text-xs font-semibold"},i(f),1))),128)),!l.tags||l.tags.length===0?(x(),p("span",ht,"-")):V("",!0)])]),t("td",gt,i(b(l.lastContact)),1),t("td",vt,i(b(l.createdAt)),1),t("td",{class:"px-3 md:px-6 py-4 whitespace-nowrap",onClick:e[3]||(e[3]=I(()=>{},["stop"]))},[...e[11]||(e[11]=[t("button",{class:"text-gray-400 hover:text-gray-600"},[t("i",{class:"fa-solid fa-ellipsis-vertical"})],-1)])])]))),128))])])]),t("div",bt,[t("div",_t," Showing "+i(h(s).contacts.length)+" of "+i(h(s).totalContacts)+" contacts ",1),e[13]||(e[13]=E('<div class="flex items-center gap-1 md:gap-2 flex-wrap"><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 whitespace-nowrap">Previous</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm bg-blue-600 text-white rounded">1</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50">2</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 whitespace-nowrap">Next</button></div>',1))])]))])]))}};export{kt as default};
