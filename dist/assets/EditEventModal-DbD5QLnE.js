import{f as Q,F as G,L as R,C as J,n as F,d as K,g as X,h as Y,Q as x,G as N,W as L,U as z,H as B,j as u,c as U}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-DVyH4GI_.js";import{c as V,d as v,o as m,e as a,g as y,t as f,x as w,B as s,s as l,y as t,n as I,u as Z,r as E,l as _,k as d,F as W,i as q}from"./index-D8nDSNmq.js";import{u as ee}from"./users-CPXYaoWs.js";const te={class:"space-y-4"},le={class:"flex items-start gap-3"},se={class:"text-content-bold"},ae={class:"text-meta"},re={key:0,class:"flex items-start gap-3"},ne={class:"text-content-bold"},oe={key:1,class:"flex items-start gap-3"},de={class:"text-content-bold"},ie={key:2,class:"flex items-start gap-3"},ue={class:"text-content-bold"},me={key:3,class:"flex items-start gap-3"},be={class:"text-content-bold"},ge={key:4,class:"flex items-start gap-3"},fe={class:"text-content-bold"},ve={__name:"CalendarEventDetails",props:{event:{type:Object,required:!0}},setup(r){const g=r,c=V(()=>{var n;return(n=g.event)!=null&&n.start?new Date(g.event.start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A"}),h=V(()=>{var n;return(n=g.event)!=null&&n.start?new Date(g.event.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"}),p=V(()=>{var n;return(n=g.event)!=null&&n.end?new Date(g.event.end).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"});return(b,n)=>(m(),v("div",te,[a("div",le,[n[0]||(n[0]=a("div",{class:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center shrink-0"},[a("i",{class:"fa-regular fa-calendar text-blue-600 text-sm"})],-1)),a("div",null,[a("p",se,f(c.value),1),a("p",ae,f(h.value)+" - "+f(p.value),1)])]),r.event.customer?(m(),v("div",re,[n[2]||(n[2]=a("div",{class:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center shrink-0"},[a("i",{class:"fa-regular fa-user text-green-600 text-sm"})],-1)),a("div",null,[a("p",ne,f(r.event.customer),1),n[1]||(n[1]=a("p",{class:"text-meta"},"Customer",-1))])])):y("",!0),r.event.vehicle?(m(),v("div",oe,[n[4]||(n[4]=a("div",{class:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center shrink-0"},[a("i",{class:"fa-solid fa-car text-purple-600 text-sm"})],-1)),a("div",null,[a("p",de,f(r.event.vehicle),1),n[3]||(n[3]=a("p",{class:"text-meta"},"Vehicle",-1))])])):y("",!0),r.event.dealership?(m(),v("div",ie,[n[6]||(n[6]=a("div",{class:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center shrink-0"},[a("i",{class:"fa-solid fa-building text-orange-600 text-sm"})],-1)),a("div",null,[a("p",ue,f(r.event.dealership),1),n[5]||(n[5]=a("p",{class:"text-meta"},"Dealership",-1))])])):y("",!0),r.event.assignee?(m(),v("div",me,[n[8]||(n[8]=a("div",{class:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center shrink-0"},[a("i",{class:"fa-regular fa-id-badge text-indigo-600 text-sm"})],-1)),a("div",null,[a("p",be,f(r.event.assignee),1),n[7]||(n[7]=a("p",{class:"text-meta"},"Assigned to",-1))])])):y("",!0),r.event.team?(m(),v("div",ge,[n[10]||(n[10]=a("div",{class:"w-8 h-8 rounded-lg bg-teal-50 flex items-center justify-center shrink-0"},[a("i",{class:"fa-solid fa-users text-teal-600 text-sm"})],-1)),a("div",null,[a("p",fe,f(r.event.team),1),n[9]||(n[9]=a("p",{class:"text-meta"},"Team",-1))])])):y("",!0)]))}},pe=r=>({"test-drive":"Test Drive",appointment:"Dealership Visit",offsite:"Offsite Visit",workshop:"Workshop",call:"Call",delivery:"Delivery",meeting:"Meeting",training:"Training",marketing:"Marketing Event",leave:"Leave",memo:"Memo",recall:"Recall",absence:"Absence",other:"Other"})[r]||r,ce=r=>({"test-drive":"bg-blue-50 border-b border-blue-200",appointment:"bg-green-50 border-b border-green-200",offsite:"bg-emerald-50 border-b border-emerald-200",workshop:"bg-indigo-50 border-b border-indigo-200",call:"bg-orange-50 border-b border-orange-200",delivery:"bg-teal-50 border-b border-teal-200",meeting:"bg-purple-50 border-b border-purple-200",training:"bg-pink-50 border-b border-pink-200",marketing:"bg-yellow-50 border-b border-yellow-200",leave:"bg-red-50 border-b border-red-200",memo:"bg-gray-50 border-b border-gray-200",recall:"bg-cyan-50 border-b border-cyan-200",absence:"bg-rose-50 border-b border-rose-200",other:"bg-slate-50 border-b border-slate-200"})[r]||"bg-blue-50 border-b border-blue-200",xe=r=>({"test-drive":"bg-blue-100 text-blue-700 border-blue-200",appointment:"bg-green-100 text-green-700 border-green-200",offsite:"bg-emerald-100 text-emerald-700 border-emerald-200",workshop:"bg-indigo-100 text-indigo-700 border-indigo-200",call:"bg-orange-100 text-orange-700 border-orange-200",delivery:"bg-teal-100 text-teal-700 border-teal-200",meeting:"bg-purple-100 text-purple-700 border-purple-200",training:"bg-pink-100 text-pink-700 border-pink-200",marketing:"bg-yellow-100 text-yellow-700 border-yellow-200",leave:"bg-red-100 text-red-700 border-red-200",memo:"bg-gray-100 text-gray-700 border-gray-200",recall:"bg-cyan-100 text-cyan-700 border-cyan-200",absence:"bg-rose-100 text-rose-700 border-rose-200",other:"bg-slate-100 text-slate-700 border-slate-200"})[r]||"bg-blue-100 text-blue-700 border-blue-200",ye=r=>({"test-drive":"text-blue-900",appointment:"text-green-900",offsite:"text-emerald-900",workshop:"text-indigo-900",call:"text-orange-900",delivery:"text-teal-900",meeting:"text-purple-900",training:"text-pink-900",marketing:"text-yellow-900",leave:"text-red-900",memo:"text-gray-900",recall:"text-cyan-900",absence:"text-rose-900",other:"text-gray-900"})[r]||"text-blue-900",We=r=>({"test-drive":"event-blue",appointment:"event-green",offsite:"event-emerald",workshop:"event-indigo",call:"event-orange",delivery:"event-teal",meeting:"event-purple",training:"event-pink",marketing:"event-yellow",leave:"event-red",memo:"event-gray",recall:"event-cyan",absence:"event-rose",other:"event-slate"})[r]||"event-blue",ke={class:"flex-1 min-w-0 pr-4"},he={class:"flex items-center gap-2 mb-1"},we={key:0,class:"badge-ui bg-red-100 text-red-700 border-red-200"},Ve={key:1,class:"badge-ui bg-orange-100 text-orange-700 border-orange-200"},$e={class:"flex-1 overflow-y-auto p-6 w-full"},qe={__name:"QuickViewEventModal",props:{show:{type:Boolean,required:!0},event:{type:Object,default:null}},emits:["close","edit","delete"],setup(r,{emit:g}){const c=g,h=p=>{p||c("close")};return(p,b)=>(m(),w(t(K),{open:r.show,"onUpdate:open":h},{default:s(()=>[l(t(Q),null,{default:s(()=>[l(t(G),{class:"fixed inset-0 z-50 bg-black/50"}),l(t(R),{class:"w-full sm:max-w-md max-h-[calc(100vh-4rem)] flex flex-col p-0"},{default:s(()=>{var n,D,M,i,j,A,$;return[a("div",{class:I(["flex-shrink-0 px-6 py-5 border-b border flex items-center justify-between bg-surface",t(ce)((n=r.event)==null?void 0:n.type)])},[a("div",ke,[a("div",he,[a("span",{class:I(["badge-ui",t(xe)((D=r.event)==null?void 0:D.type)])},f(t(pe)((M=r.event)==null?void 0:M.type)),3),((i=r.event)==null?void 0:i.status)==="cancelled"?(m(),v("span",we," Cancelled ")):((j=r.event)==null?void 0:j.status)==="no-show"?(m(),v("span",Ve," No-show ")):y("",!0)]),a("h3",{class:I(["text-xl font-bold tracking-tight truncate",t(ye)((A=r.event)==null?void 0:A.type)])},f(($=r.event)==null?void 0:$.title),3)])],2),a("div",$e,[r.event?(m(),w(ve,{key:0,event:r.event},null,8,["event"])):y("",!0)]),l(t(J),{class:"flex-shrink-0 px-6 py-4 bg-surfaceSecondary flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3 border-t border"},{default:s(()=>{var k;return[(k=r.event)!=null&&k.id?(m(),v("button",{key:0,onClick:b[0]||(b[0]=e=>p.$emit("delete",r.event.id)),class:"text-sm text-red-600 hover:text-red-700 font-medium flex items-center gap-2 mr-auto order-1"},[...b[3]||(b[3]=[a("i",{class:"fa-regular fa-trash-can text-xs"},null,-1),a("span",null,"Delete",-1)])])):y("",!0),l(t(F),{label:"Cancel",variant:"outline",size:"small",class:"rounded-sm w-full sm:w-auto order-3 sm:order-2",onClick:b[1]||(b[1]=e=>p.$emit("close"))}),l(t(F),{label:"Edit",variant:"primary",size:"small",class:"rounded-sm w-full sm:w-auto order-2 sm:order-3 !bg-brand-red !hover:bg-brand-red-dark !text-white !border-brand-red",onClick:b[2]||(b[2]=e=>p.$emit("edit"))},{"icon-left":s(()=>[...b[4]||(b[4]=[a("i",{class:"fa-regular fa-pen-to-square"},null,-1)])]),_:1})]}),_:1})]}),_:1})]),_:1})]),_:1},8,["open"]))}},Ce={class:"flex-1 overflow-y-auto px-6 py-4 w-full space-y-6"},Se={class:"space-y-2"},Te={class:"space-y-2"},Ue={class:"grid grid-cols-2 gap-4"},De={class:"space-y-2"},Me={class:"space-y-2"},je={class:"space-y-2"},Ae={class:"space-y-2"},Oe={key:0,class:"text-xs text-sub mt-1"},Ne={class:"space-y-2"},Le={class:"space-y-2"},ze={class:"space-y-2"},He={__name:"EditEventModal",props:{show:{type:Boolean,required:!0},event:{type:Object,default:null},dealerships:{type:Array,default:()=>[]},customer:{type:Object,default:null},assignee:{type:String,default:null},disabledFields:{type:Array,default:()=>[]}},emits:["save","cancel"],setup(r,{emit:g}){const c=r,h=g,p=Z(),b=ee(),n=V(()=>b.assignableUsers),D=V(()=>b.assignableTeams),M=V(()=>i.value.assignee&&i.value.assignee.startsWith("team-")),i=E({id:null,type:"test-drive",title:"",date:"",time:"",customer:"",assignee:"",vehicle:"",dealership:"",status:"confirmed"});_(()=>[c.show,c.event],([k,e])=>{var C,o,S,H;if(k&&e)try{const T=e.start?new Date(e.start):new Date;if(isNaN(T.getTime()))throw new Error("Invalid date");const O=e.assigneeId?`user-${e.assigneeId}`:e.assignee||c.assignee||`user-${((C=p.currentUser)==null?void 0:C.id)||1}`;i.value={id:e.id,type:e.type||"test-drive",title:e.title||"",date:T.toISOString().split("T")[0],time:T.toTimeString().slice(0,5),customer:((o=c.customer)==null?void 0:o.name)||e.customer||"",assignee:O,vehicle:e.vehicle||"",dealership:e.dealership||"",status:e.status||"confirmed"}}catch(T){console.error("Error parsing event date:",T);const O=new Date,P=e.assigneeId?`user-${e.assigneeId}`:e.assignee||c.assignee||`user-${((S=p.currentUser)==null?void 0:S.id)||1}`;i.value={id:e.id,type:e.type||"test-drive",title:e.title||"",date:O.toISOString().split("T")[0],time:O.toTimeString().slice(0,5),customer:((H=c.customer)==null?void 0:H.name)||e.customer||"",assignee:P,vehicle:e.vehicle||"",dealership:e.dealership||"",status:e.status||"confirmed"}}});const j=()=>{i.value.title&&i.value.date&&h("save",{...i.value})},A=k=>{k||$()},$=()=>{h("cancel")};return(k,e)=>(m(),w(t(K),{open:r.show,"onUpdate:open":A},{default:s(()=>[l(t(Q),null,{default:s(()=>[l(t(G),{class:"fixed inset-0 z-50 bg-black/50"}),l(t(R),{class:"w-full sm:max-w-lg max-h-[calc(100vh-4rem)] flex flex-col"},{default:s(()=>{var C;return[l(t(X),{class:"flex-shrink-0"},{default:s(()=>[l(t(Y),null,{default:s(()=>[...e[9]||(e[9]=[d("Edit Event",-1)])]),_:1})]),_:1}),a("div",Ce,[a("div",Se,[l(t(x),{class:"block text-sm font-semibold text-heading"},{default:s(()=>[...e[10]||(e[10]=[d("Event Type",-1)])]),_:1}),l(t(N),{modelValue:i.value.type,"onUpdate:modelValue":e[0]||(e[0]=o=>i.value.type=o)},{default:s(()=>[l(t(L),{class:"w-full h-10"},{default:s(()=>[l(t(z),{placeholder:"Select event type..."})]),_:1}),l(t(B),null,{default:s(()=>[l(t(u),{value:"test-drive"},{default:s(()=>[...e[11]||(e[11]=[d("Test Drive",-1)])]),_:1}),l(t(u),{value:"appointment"},{default:s(()=>[...e[12]||(e[12]=[d("Dealership Visit",-1)])]),_:1}),l(t(u),{value:"offsite"},{default:s(()=>[...e[13]||(e[13]=[d("Offsite Visit",-1)])]),_:1}),l(t(u),{value:"workshop"},{default:s(()=>[...e[14]||(e[14]=[d("Workshop",-1)])]),_:1}),l(t(u),{value:"call"},{default:s(()=>[...e[15]||(e[15]=[d("Call",-1)])]),_:1}),l(t(u),{value:"delivery"},{default:s(()=>[...e[16]||(e[16]=[d("Delivery",-1)])]),_:1}),l(t(u),{value:"meeting"},{default:s(()=>[...e[17]||(e[17]=[d("Meeting",-1)])]),_:1}),l(t(u),{value:"training"},{default:s(()=>[...e[18]||(e[18]=[d("Training",-1)])]),_:1}),l(t(u),{value:"marketing"},{default:s(()=>[...e[19]||(e[19]=[d("Marketing Event",-1)])]),_:1}),l(t(u),{value:"leave"},{default:s(()=>[...e[20]||(e[20]=[d("Leave",-1)])]),_:1}),l(t(u),{value:"memo"},{default:s(()=>[...e[21]||(e[21]=[d("Memo",-1)])]),_:1}),l(t(u),{value:"recall"},{default:s(()=>[...e[22]||(e[22]=[d("Recall",-1)])]),_:1}),l(t(u),{value:"absence"},{default:s(()=>[...e[23]||(e[23]=[d("Absence",-1)])]),_:1}),l(t(u),{value:"other"},{default:s(()=>[...e[24]||(e[24]=[d("Other",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a("div",Te,[l(t(x),{class:"block text-sm font-semibold text-heading"},{default:s(()=>[...e[25]||(e[25]=[d("Title",-1)])]),_:1}),l(t(U),{modelValue:i.value.title,"onUpdate:modelValue":e[1]||(e[1]=o=>i.value.title=o),type:"text",placeholder:"Event title...",class:"w-full h-10"},null,8,["modelValue"])]),a("div",Ue,[a("div",De,[l(t(x),{class:"block text-sm font-semibold text-heading"},{default:s(()=>[...e[26]||(e[26]=[d("Date",-1)])]),_:1}),l(t(U),{modelValue:i.value.date,"onUpdate:modelValue":e[2]||(e[2]=o=>i.value.date=o),type:"date",class:"w-full h-10"},null,8,["modelValue"])]),a("div",Me,[l(t(x),{class:"block text-sm font-semibold text-heading"},{default:s(()=>[...e[27]||(e[27]=[d("Time",-1)])]),_:1}),l(t(U),{modelValue:i.value.time,"onUpdate:modelValue":e[3]||(e[3]=o=>i.value.time=o),type:"time",class:"w-full h-10"},null,8,["modelValue"])])]),a("div",je,[l(t(x),{class:"block text-sm font-semibold text-heading"},{default:s(()=>[...e[28]||(e[28]=[d("Customer",-1)])]),_:1}),l(t(U),{modelValue:i.value.customer,"onUpdate:modelValue":e[4]||(e[4]=o=>i.value.customer=o),type:"text",placeholder:"Customer name...",class:"w-full h-10",disabled:r.disabledFields.includes("customer"),value:((C=r.customer)==null?void 0:C.name)||i.value.customer},null,8,["modelValue","disabled","value"])]),a("div",Ae,[l(t(x),{class:"block text-sm font-semibold text-heading"},{default:s(()=>[...e[29]||(e[29]=[d("Assign to",-1)])]),_:1}),l(t(N),{modelValue:i.value.assignee,"onUpdate:modelValue":e[5]||(e[5]=o=>i.value.assignee=o),disabled:r.disabledFields.includes("assignee")},{default:s(()=>[l(t(L),{class:"w-full h-10"},{default:s(()=>[l(t(z),{placeholder:"Select assignee..."})]),_:1}),l(t(B),null,{default:s(()=>[(m(!0),v(W,null,q(D.value,o=>(m(),w(t(u),{key:`team-${o.id}`,value:`team-${o.id}`},{default:s(()=>[d(f(o.name)+" Team ",1)]),_:2},1032,["value"]))),128)),(m(!0),v(W,null,q(n.value,o=>(m(),w(t(u),{key:`user-${o.id}`,value:`user-${o.id}`},{default:s(()=>{var S;return[d(f(o.name)+f(o.id===((S=t(p).currentUser)==null?void 0:S.id)?" (Me)":""),1)]}),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue","disabled"]),M.value?(m(),v("p",Oe,[...e[30]||(e[30]=[a("i",{class:"fa-solid fa-users text-sub"},null,-1),d(" Any available team member will be assigned ",-1)])])):y("",!0)]),a("div",Ne,[l(t(x),{class:"block text-sm font-semibold text-heading"},{default:s(()=>[...e[31]||(e[31]=[d("Vehicle",-1)])]),_:1}),l(t(U),{modelValue:i.value.vehicle,"onUpdate:modelValue":e[6]||(e[6]=o=>i.value.vehicle=o),type:"text",placeholder:"Vehicle...",class:"w-full h-10"},null,8,["modelValue"])]),a("div",Le,[l(t(x),{class:"block text-sm font-semibold text-heading"},{default:s(()=>[...e[32]||(e[32]=[d("Dealership",-1)])]),_:1}),l(t(N),{modelValue:i.value.dealership,"onUpdate:modelValue":e[7]||(e[7]=o=>i.value.dealership=o)},{default:s(()=>[l(t(L),{class:"w-full h-10"},{default:s(()=>[l(t(z),{placeholder:"Select dealership..."})]),_:1}),l(t(B),null,{default:s(()=>[(m(!0),v(W,null,q(r.dealerships,o=>(m(),w(t(u),{key:o,value:o},{default:s(()=>[d(f(o),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),a("div",ze,[l(t(x),{class:"block text-sm font-semibold text-heading"},{default:s(()=>[...e[33]||(e[33]=[d("Status",-1)])]),_:1}),l(t(N),{modelValue:i.value.status,"onUpdate:modelValue":e[8]||(e[8]=o=>i.value.status=o)},{default:s(()=>[l(t(L),{class:"w-full h-10"},{default:s(()=>[l(t(z),{placeholder:"Select status..."})]),_:1}),l(t(B),null,{default:s(()=>[l(t(u),{value:"confirmed"},{default:s(()=>[...e[34]||(e[34]=[d("Confirmed",-1)])]),_:1}),l(t(u),{value:"cancelled"},{default:s(()=>[...e[35]||(e[35]=[d("Cancelled",-1)])]),_:1}),l(t(u),{value:"no-show"},{default:s(()=>[...e[36]||(e[36]=[d("No-show",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),l(t(J),{class:"flex-shrink-0 flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3"},{default:s(()=>[l(t(F),{label:"Cancel",variant:"outline",size:"small",class:"rounded-sm w-full sm:w-auto",onClick:$}),l(t(F),{label:"Save Changes",variant:"primary",size:"small",class:"rounded-sm w-full sm:w-auto !bg-brand-red !hover:bg-brand-red-dark !text-white !border-brand-red",onClick:j})]),_:1})]}),_:1})]),_:1})]),_:1},8,["open"]))}};export{qe as _,He as a,We as g};
