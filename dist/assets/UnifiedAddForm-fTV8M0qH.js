import{ac as F,D as me,r as U,c as B,ad as te,l as ne,m as fe,L as pe,p as X,d as M,o as E,s as l,B as s,y as t,k as m,x as W,g as N,e as a,a2 as re,F as ve,i as ye,t as A,n as Q,w as xe}from"./index-BSxt259F.js";import{e as Z,t as ee,J as O,Q as V,c as I,Y as R,n as ge,G as H,W as z,U as G,H as $,j as T,o as be,p as ue}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-CK4ymTFf.js";import{fetchContacts as we,fetchContactById as de,createContact as Ce,updateContact as Ve,deleteContact as he,addRequestedCarToContact as ke,convertContactToLead as Te,convertContactToOpportunity as Se}from"./contacts-CvrS-If3.js";const Y=(n=300)=>new Promise(d=>setTimeout(d,n)),le=()=>F.filter(n=>n.company&&n.company!==""),_e=async(n={})=>{await Y();let d=le();if(n.search){const c=n.search.toLowerCase();d=d.filter(i=>{var w;return i.name.toLowerCase().includes(c)||i.email.toLowerCase().includes(c)||((w=i.company)==null?void 0:w.toLowerCase().includes(c))})}return{data:d,total:d.length}},ie=async n=>{await Y();const c=le().find(i=>i.id===parseInt(n));if(!c)throw new Error("Account not found");return c},Ee=async n=>{await Y();const d={id:F.length+1,...n,createdAt:new Date().toISOString(),lastContact:new Date().toISOString()};return F.push(d),d},qe=async(n,d)=>{if(await Y(),le().findIndex(k=>k.id===parseInt(n))===-1)throw new Error("Account not found");const w=F.findIndex(k=>k.id===parseInt(n));return w!==-1&&(F[w]={...F[w],...d}),F[w]},Ae=async n=>{await Y();const d=F.findIndex(c=>c.id===parseInt(n));if(d===-1)throw new Error("Account not found");return F.splice(d,1),{success:!0}},Ue=me("customers",()=>{const n=U([]),d=U(null),c=U(!1),i=U(null),w=U(""),k=B(()=>n.value.filter(o=>o.type==="contact")),C=B(()=>n.value.filter(o=>o.type==="account")),S=B(()=>n.value.length),x=B(()=>k.value.length),g=B(()=>C.value.length),b=async(o={})=>{c.value=!0,i.value=null;try{const[f,p]=await Promise.all([we(o),_e(o)]),y=[...f.data.map(h=>({...h,type:"contact"})),...p.data.map(h=>({...h,type:"account"}))];return n.value=y,{data:y,total:y.length}}catch(f){throw i.value=f.message,f}finally{c.value=!1}},u=async(o,f=null)=>{c.value=!0,i.value=null;try{if(f==="contact")d.value={...await de(o),type:"contact"};else if(f==="account")d.value={...await ie(o),type:"account"};else try{const p=await de(o);d.value={...p,type:"contact"}}catch{const p=await ie(o);d.value={...p,type:"account"}}return d.value}catch(p){throw i.value=p.message,p}finally{c.value=!1}},D=async o=>{c.value=!0,i.value=null;try{const f=o.company&&o.company!=="",y={...await(f?Ee(o):Ce(o)),type:f?"account":"contact"};return n.value.unshift(y),y}catch(f){throw i.value=f.message,f}finally{c.value=!1}},_=async(o,f,p)=>{var y;c.value=!0,i.value=null;try{const h=await(p==="account"?qe(o,f):Ve(o,f)),K=n.value.findIndex(v=>v.id===o);return K!==-1&&(n.value[K]={...h,type:p}),((y=d.value)==null?void 0:y.id)===o&&(d.value={...h,type:p}),{...h,type:p}}catch(h){throw i.value=h.message,h}finally{c.value=!1}},L=async(o,f)=>{var p;c.value=!0,i.value=null;try{await(f==="account"?Ae(o):he(o)),n.value=n.value.filter(y=>y.id!==o),((p=d.value)==null?void 0:p.id)===o&&(d.value=null)}catch(y){throw i.value=y.message,y}finally{c.value=!1}};function q(o){w.value=o,b({search:o})}return{customers:n,contacts:k,accounts:C,currentCustomer:d,loading:c,error:i,searchQuery:w,totalCustomers:S,totalContacts:x,totalAccounts:g,fetchCustomers:b,fetchCustomerById:u,addCustomer:D,updateCustomer:_,removeCustomer:L,setSearchQuery:q,addContact:async o=>await D({...o,company:null}),modifyContact:async(o,f)=>await _(o,f,"contact"),removeContact:async o=>await L(o,"contact"),addRequestedCar:async(o,f)=>{const p=n.value.find(y=>y.id===o);if(!p)throw new Error("Customer not found");if(p.type==="contact")return await ke(o,f);throw new Error("Requested cars not supported for accounts")},convertToLead:async o=>{var p;const f=n.value.find(y=>y.id===o);if(!f)throw new Error("Customer not found");if(f.type==="contact"){const y=await Te(o);return n.value=n.value.filter(h=>h.id!==o),((p=d.value)==null?void 0:p.id)===o&&(d.value=null),y}throw new Error("Only contacts can be converted to leads")},convertToOpportunity:async o=>{var p;const f=n.value.find(y=>y.id===o);if(!f)throw new Error("Customer not found");if(f.type==="contact"){const y=await Se(o);return n.value=n.value.filter(h=>h.id!==o),((p=d.value)==null?void 0:p.id)===o&&(d.value=null),y}throw new Error("Only contacts can be converted to opportunities")}}});function De({contactMode:n,selectedContact:d,contactFormData:c}){const i=te({name:"",email:""}),w=x=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x),k=B(()=>n.value==="existing"?!!d.value:!!(c.name&&c.email));return{errors:i,canSubmit:k,validateEmail:w,validateContactForm:()=>{if(i.name="",i.email="",n.value==="new"){let x=!0;return c.name.trim()||(i.name="Contact name is required",x=!1),c.email.trim()?w(c.email)||(i.email="Please enter a valid email address",x=!1):(i.email="Email is required",x=!1),x}else return!!d.value},clearErrors:()=>{i.name="",i.email=""}}}function Le({contactMode:n,selectedContact:d,contactFormData:c,vehicleFormData:i,markAsLead:w,markAsOpportunity:k,validateContactForm:C,onSubmit:S}){const x=U(!1),g=_=>Object.entries(_).reduce((L,[q,P])=>{if(P!==null&&P!==""&&P!==void 0){if(q==="year"&&P===new Date().getFullYear())return L;L[q]=P}return L},{}),b=()=>n.value==="new"?{name:c.name.trim(),email:c.email.trim(),phone:c.phone.trim(),company:c.company.trim()}:null,u=()=>{if(!C())return;x.value=!0;const _=g(i),L=b(),q={contactMode:n.value,selectedContact:d.value,contactData:L,vehicleData:Object.keys(_).length>0?_:null,markAsLead:w.value,markAsOpportunity:k.value};S&&S(q)},D=()=>{x.value=!1};return{isSubmitting:B(()=>x.value),handleSubmit:u,resetSubmitting:D}}const Oe={key:0,class:"space-y-6"},Re={class:"space-y-2"},Me={class:"flex gap-6"},Ie={key:0,class:"space-y-6"},Be={class:"relative space-y-2"},Fe={class:"relative w-full"},Pe=["onClick"],je={class:"w-8 h-8 rounded-full bg-muted text-primary flex items-center justify-center text-xs font-bold shrink-0"},Ne={class:"flex-1 min-w-0"},We={class:"font-semibold text-foreground text-xs truncate"},Ye={class:"text-muted-foreground text-xs truncate"},Qe={class:"flex items-center justify-between"},He={class:"flex items-center gap-3"},ze={class:"w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center text-xs font-bold border border-border"},Ge={class:"font-bold text-foreground text-xs"},$e={class:"text-muted-foreground text-xs"},Je={key:1,class:"space-y-6"},Ke={class:"space-y-2"},Xe={key:0,class:"text-brand-red text-xs mt-1"},Ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},et={class:"space-y-2"},tt={key:0,class:"text-brand-red text-xs mt-1"},lt={class:"space-y-2"},st={class:"space-y-2"},at={class:"flex items-center gap-3"},ot={class:"w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center text-xs font-bold border border-border"},nt={class:"font-bold text-foreground text-xs"},rt={class:"text-muted-foreground text-xs"},ut={class:"space-y-4"},dt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6"},it={class:"space-y-2"},ct={class:"space-y-2"},mt={class:"space-y-2"},ft={class:"space-y-2"},pt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},vt={class:"space-y-4"},yt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},xt={class:"space-y-2"},gt={class:"space-y-2"},bt={class:"space-y-4"},wt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Ct={class:"space-y-2"},Vt={class:"space-y-2"},ht={class:"space-y-2"},kt={key:0,class:"flex flex-col md:flex-row gap-3"},Tt={class:"text-xs font-bold text-foreground"},At={__name:"UnifiedAddForm",props:{initialContact:{type:Object,default:null},hideContactSelection:{type:Boolean,default:!1},forceType:{type:String,default:""}},emits:["submit"],setup(n,{expose:d,emit:c}){const i=n,w=c,k=Ue(),C=U(i.initialContact?"existing":"new"),S=U(""),x=U(!1),g=U(i.initialContact||null),b=te({name:"",email:"",phone:"",company:""}),u=te({brand:"",model:"",year:new Date().getFullYear(),price:null,requestMessage:"",requestType:"",source:"",dealership:"",channel:"Email",fuelType:"",gearType:"",kilometers:null,stockDays:null}),D=U(i.forceType==="lead"),_=U(i.forceType==="opportunity");ne(()=>i.forceType,v=>{v==="lead"?(D.value=!0,_.value=!1):v==="opportunity"&&(D.value=!1,_.value=!0)}),ne(()=>i.initialContact,v=>{v&&(g.value=v,S.value=v.name,C.value="existing")},{immediate:!0});let L=null;const{errors:q,canSubmit:P,validateContactForm:se,clearErrors:ae}=De({contactMode:C,selectedContact:g,contactFormData:b});fe(()=>{k.customers.length===0&&k.fetchCustomers()});const J=B(()=>{if(!S.value.trim())return k.customers.slice(0,10);const v=S.value.toLowerCase();return k.customers.filter(e=>e.name.toLowerCase().includes(v)||e.email.toLowerCase().includes(v)||e.company&&e.company.toLowerCase().includes(v)).slice(0,10)}),j=B(()=>!!(u.brand||u.model||u.year!==new Date().getFullYear()||u.price||u.requestMessage||u.requestType||u.source||u.dealership||u.fuelType||u.gearType||u.kilometers||u.stockDays)),{isSubmitting:oe,handleSubmit:o,resetSubmitting:f}=Le({contactMode:C,selectedContact:g,contactFormData:b,vehicleFormData:u,markAsLead:D,markAsOpportunity:_,validateContactForm:se,onSubmit:v=>{w("submit",v)}}),p=()=>{clearTimeout(L),L=setTimeout(()=>{x.value=!0},300)},y=v=>{g.value=v,S.value=v.name,x.value=!1},h=()=>{g.value=null,S.value="",x.value=!1};return d({resetSubmitting:f,submit:o,clear:()=>{C.value="new",g.value=null,S.value="",x.value=!1,b.name="",b.email="",b.phone="",b.company="",Object.keys(u).forEach(v=>{v==="year"?u[v]=new Date().getFullYear():v==="channel"?u[v]="Email":typeof u[v]=="number"?u[v]=null:u[v]=""}),D.value=!1,_.value=!1,ae()},canSubmit:P,isSubmitting:oe}),(v,e)=>{const ce=pe("click-outside");return X((E(),M("form",{onSubmit:e[19]||(e[19]=xe((...r)=>v.handleSubmit&&v.handleSubmit(...r),["prevent"])),class:"w-full"},[l(t(R),{class:"mb-4"},{default:s(()=>[l(t(Z),null,{default:s(()=>[l(t(ee),null,{default:s(()=>[...e[20]||(e[20]=[m("Contact Information",-1)])]),_:1})]),_:1}),l(t(O),{class:"space-y-6"},{default:s(()=>[n.hideContactSelection?g.value?(E(),W(t(R),{key:1,class:"bg-muted border-border"},{default:s(()=>[l(t(O),{class:"p-4"},{default:s(()=>[a("div",at,[a("div",ot,A(g.value.initials),1),a("div",null,[a("div",nt,A(g.value.name),1),a("div",rt,A(g.value.email),1)])])]),_:1})]),_:1})):N("",!0):(E(),M("div",Oe,[a("div",Re,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[21]||(e[21]=[m("Contact Type",-1)])]),_:1}),a("div",Me,[l(t(V),{class:"flex items-center gap-2 cursor-pointer"},{default:s(()=>[X(a("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=r=>C.value=r),value:"new",class:"w-4 h-4 text-brand-primary focus:ring-brand-primary border-gray-300"},null,512),[[re,C.value]]),e[22]||(e[22]=a("span",{class:"text-sm text-muted-foreground"},"New Contact",-1))]),_:1}),l(t(V),{class:"flex items-center gap-2 cursor-pointer"},{default:s(()=>[X(a("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=r=>C.value=r),value:"existing",class:"w-4 h-4 text-brand-primary focus:ring-brand-primary border-gray-300"},null,512),[[re,C.value]]),e[23]||(e[23]=a("span",{class:"text-sm text-muted-foreground"},"Existing Contact",-1))]),_:1})])]),C.value==="existing"?(E(),M("div",Ie,[a("div",Be,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[24]||(e[24]=[m("Search Contact",-1)])]),_:1}),a("div",Fe,[e[25]||(e[25]=a("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-xs z-10"},null,-1)),l(t(I),{modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=r=>S.value=r),onInput:p,onFocus:e[3]||(e[3]=r=>x.value=!0),type:"text",placeholder:"Search by name, email, or company...",class:"pl-9 w-full h-10"},null,8,["modelValue"])]),x.value&&J.value.length>0?(E(),W(t(R),{key:0,class:"absolute z-50 w-full mt-1 max-h-64 overflow-y-auto shadow-lg"},{default:s(()=>[l(t(O),{class:"p-0"},{default:s(()=>[(E(!0),M(ve,null,ye(J.value,r=>(E(),M("div",{key:r.id,onClick:St=>y(r),class:"flex items-center gap-2 p-3 hover:bg-muted cursor-pointer border-b border-border last:border-b-0"},[a("div",je,A(r.initials),1),a("div",Ne,[a("div",We,A(r.name),1),a("div",Ye,A(r.email),1)]),e[26]||(e[26]=a("i",{class:"fa-solid fa-chevron-right text-muted-foreground text-xs"},null,-1))],8,Pe))),128))]),_:1})]),_:1})):N("",!0)]),g.value?(E(),W(t(R),{key:0,class:"bg-muted border-border"},{default:s(()=>[l(t(O),{class:"p-4"},{default:s(()=>[a("div",Qe,[a("div",He,[a("div",ze,A(g.value.initials),1),a("div",null,[a("div",Ge,A(g.value.name),1),a("div",$e,A(g.value.email),1)])]),l(t(ge),{variant:"ghost",size:"small",class:"h-8 w-8 p-0",onClick:h},{default:s(()=>[...e[27]||(e[27]=[a("i",{class:"fa-solid fa-xmark text-sm"},null,-1)])]),_:1})])]),_:1})]),_:1})):N("",!0)])):(E(),M("div",Je,[a("div",Ke,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[28]||(e[28]=[m(" Contact Name ",-1),a("span",{class:"text-brand-red"},"*",-1)])]),_:1}),l(t(I),{modelValue:b.name,"onUpdate:modelValue":e[4]||(e[4]=r=>b.name=r),type:"text",placeholder:"Enter contact name...",class:"w-full h-10",required:C.value==="new",error:t(q).name},null,8,["modelValue","required","error"]),t(q).name?(E(),M("p",Xe,A(t(q).name),1)):N("",!0)]),a("div",Ze,[a("div",et,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[29]||(e[29]=[m(" Email ",-1),a("span",{class:"text-brand-red"},"*",-1)])]),_:1}),l(t(I),{modelValue:b.email,"onUpdate:modelValue":e[5]||(e[5]=r=>b.email=r),type:"email",placeholder:"contact@example.com",class:"w-full h-10",required:C.value==="new",error:t(q).email},null,8,["modelValue","required","error"]),t(q).email?(E(),M("p",tt,A(t(q).email),1)):N("",!0)]),a("div",lt,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[30]||(e[30]=[m("Phone",-1)])]),_:1}),l(t(I),{modelValue:b.phone,"onUpdate:modelValue":e[6]||(e[6]=r=>b.phone=r),type:"tel",placeholder:"+49...",class:"w-full h-10"},null,8,["modelValue"])])]),a("div",st,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[31]||(e[31]=[m("Company (optional)",-1)])]),_:1}),l(t(I),{modelValue:b.company,"onUpdate:modelValue":e[7]||(e[7]=r=>b.company=r),type:"text",placeholder:"Company name...",class:"w-full h-10"},null,8,["modelValue"])])]))]))]),_:1})]),_:1}),l(t(R),{class:"mb-4"},{default:s(()=>[l(t(Z),null,{default:s(()=>[l(t(ee),null,{default:s(()=>[...e[32]||(e[32]=[m(" Vehicle Details ",-1),a("span",{class:"text-meta font-normal text-xs"},"(Optional)",-1)])]),_:1})]),_:1}),l(t(O),{class:"space-y-8"},{default:s(()=>[a("div",ut,[e[37]||(e[37]=a("h4",{class:"text-xs font-bold uppercase text-muted-foreground tracking-wider"},"Basic Information",-1)),a("div",dt,[a("div",it,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[33]||(e[33]=[m("Brand",-1)])]),_:1}),l(t(I),{modelValue:u.brand,"onUpdate:modelValue":e[8]||(e[8]=r=>u.brand=r),type:"text",placeholder:"e.g., VW",class:"w-full h-10"},null,8,["modelValue"])]),a("div",ct,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[34]||(e[34]=[m("Model",-1)])]),_:1}),l(t(I),{modelValue:u.model,"onUpdate:modelValue":e[9]||(e[9]=r=>u.model=r),type:"text",placeholder:"e.g., ID.4",class:"w-full h-10"},null,8,["modelValue"])]),a("div",mt,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[35]||(e[35]=[m("Year",-1)])]),_:1}),l(t(I),{modelValue:u.year,"onUpdate:modelValue":e[10]||(e[10]=r=>u.year=r),type:"number",min:1900,max:new Date().getFullYear()+1,placeholder:"2024",class:"w-full h-10"},null,8,["modelValue","max"])]),a("div",ft,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[36]||(e[36]=[m("Price",-1)])]),_:1}),l(t(I),{modelValue:u.price,"onUpdate:modelValue":e[11]||(e[11]=r=>u.price=r),type:"number",min:0,placeholder:"45000",class:"w-full h-10"},null,8,["modelValue"])])])]),a("div",pt,[a("div",vt,[e[49]||(e[49]=a("h4",{class:"text-xs font-bold uppercase text-muted-foreground tracking-wider"},"Request Details",-1)),a("div",yt,[a("div",xt,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[38]||(e[38]=[m("Request Type",-1)])]),_:1}),l(t(H),{modelValue:u.requestType,"onUpdate:modelValue":e[12]||(e[12]=r=>u.requestType=r)},{default:s(()=>[l(t(z),{class:"w-full h-10"},{default:s(()=>[l(t(G),{placeholder:"Select type"})]),_:1}),l(t($),null,{default:s(()=>[l(t(T),{value:"Quotation"},{default:s(()=>[...e[39]||(e[39]=[m("Quotation",-1)])]),_:1}),l(t(T),{value:"Test Drive"},{default:s(()=>[...e[40]||(e[40]=[m("Test Drive",-1)])]),_:1}),l(t(T),{value:"Information"},{default:s(()=>[...e[41]||(e[41]=[m("Information",-1)])]),_:1}),l(t(T),{value:"Purchase"},{default:s(()=>[...e[42]||(e[42]=[m("Purchase",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a("div",gt,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[43]||(e[43]=[m("Source",-1)])]),_:1}),l(t(H),{modelValue:u.source,"onUpdate:modelValue":e[13]||(e[13]=r=>u.source=r)},{default:s(()=>[l(t(z),{class:"w-full h-10"},{default:s(()=>[l(t(G),{placeholder:"Select source"})]),_:1}),l(t($),null,{default:s(()=>[l(t(T),{value:"Marketing"},{default:s(()=>[...e[44]||(e[44]=[m("Marketing",-1)])]),_:1}),l(t(T),{value:"Website"},{default:s(()=>[...e[45]||(e[45]=[m("Website",-1)])]),_:1}),l(t(T),{value:"Phone"},{default:s(()=>[...e[46]||(e[46]=[m("Phone",-1)])]),_:1}),l(t(T),{value:"Walk-in"},{default:s(()=>[...e[47]||(e[47]=[m("Walk-in",-1)])]),_:1}),l(t(T),{value:"Referral"},{default:s(()=>[...e[48]||(e[48]=[m("Referral",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),a("div",bt,[e[58]||(e[58]=a("h4",{class:"text-xs font-bold uppercase text-muted-foreground tracking-wider"},"Vehicle Specs",-1)),a("div",wt,[a("div",Ct,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[50]||(e[50]=[m("Fuel Type",-1)])]),_:1}),l(t(H),{modelValue:u.fuelType,"onUpdate:modelValue":e[14]||(e[14]=r=>u.fuelType=r)},{default:s(()=>[l(t(z),{class:"w-full h-10"},{default:s(()=>[l(t(G),{placeholder:"Select fuel"})]),_:1}),l(t($),null,{default:s(()=>[l(t(T),{value:"Petrol"},{default:s(()=>[...e[51]||(e[51]=[m("Petrol",-1)])]),_:1}),l(t(T),{value:"Diesel"},{default:s(()=>[...e[52]||(e[52]=[m("Diesel",-1)])]),_:1}),l(t(T),{value:"Electric"},{default:s(()=>[...e[53]||(e[53]=[m("Electric",-1)])]),_:1}),l(t(T),{value:"Hybrid"},{default:s(()=>[...e[54]||(e[54]=[m("Hybrid",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),a("div",Vt,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[55]||(e[55]=[m("Gear Type",-1)])]),_:1}),l(t(H),{modelValue:u.gearType,"onUpdate:modelValue":e[15]||(e[15]=r=>u.gearType=r)},{default:s(()=>[l(t(z),{class:"w-full h-10"},{default:s(()=>[l(t(G),{placeholder:"Select gear"})]),_:1}),l(t($),null,{default:s(()=>[l(t(T),{value:"Manual"},{default:s(()=>[...e[56]||(e[56]=[m("Manual",-1)])]),_:1}),l(t(T),{value:"Automatic"},{default:s(()=>[...e[57]||(e[57]=[m("Automatic",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])]),a("div",ht,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:s(()=>[...e[59]||(e[59]=[m("Request Message",-1)])]),_:1}),l(t(be),{modelValue:u.requestMessage,"onUpdate:modelValue":e[16]||(e[16]=r=>u.requestMessage=r),rows:3,placeholder:"Customer's message or notes...",class:"w-full"},null,8,["modelValue"])])]),_:1})]),_:1}),l(t(R),{class:"bg-muted border-border mb-4"},{default:s(()=>[l(t(Z),null,{default:s(()=>[l(t(ee),null,{default:s(()=>[...e[60]||(e[60]=[m("Create Task (Optional)",-1)])]),_:1})]),_:1}),l(t(O),{class:"space-y-3"},{default:s(()=>[e[65]||(e[65]=a("p",{class:"text-muted-foreground text-xs"},[m(" Convert this contact to a lead or opportunity. "),a("span",{class:"font-semibold text-muted-foreground"},"Requires vehicle details.")],-1)),n.forceType?(E(),W(t(R),{key:1,class:"bg-white border-border"},{default:s(()=>[l(t(O),{class:"flex items-center gap-3"},{default:s(()=>[e[63]||(e[63]=a("i",{class:"fa-solid fa-info-circle text-primary text-sm"},null,-1)),a("div",null,[a("p",Tt," Converting to "+A(n.forceType==="lead"?"Lead":"Opportunity"),1)])]),_:1})]),_:1})):(E(),M("div",kt,[l(t(R),{class:Q(["flex-1 border-border",j.value?"cursor-pointer hover:border-primary/30":"cursor-not-allowed opacity-60"])},{default:s(()=>[l(t(O),{class:"flex items-center gap-3"},{default:s(()=>[l(t(ue),{modelValue:D.value,"onUpdate:modelValue":e[17]||(e[17]=r=>D.value=r),disabled:!j.value,label:""},null,8,["modelValue","disabled"]),a("div",null,[a("span",{class:Q(["text-xs font-bold",j.value?"text-foreground":"text-muted-foreground"])}," Mark as Lead ",2),e[61]||(e[61]=a("p",{class:"text-xs text-muted-foreground"},"New lead task",-1))])]),_:1})]),_:1},8,["class"]),l(t(R),{class:Q(["flex-1 border-border",j.value?"cursor-pointer hover:border-primary/30":"cursor-not-allowed opacity-60"])},{default:s(()=>[l(t(O),{class:"flex items-center gap-3"},{default:s(()=>[l(t(ue),{modelValue:_.value,"onUpdate:modelValue":e[18]||(e[18]=r=>_.value=r),disabled:!j.value,label:""},null,8,["modelValue","disabled"]),a("div",null,[a("span",{class:Q(["text-xs font-bold",j.value?"text-foreground":"text-muted-foreground"])}," Mark as Opportunity ",2),e[62]||(e[62]=a("p",{class:"text-xs text-muted-foreground"},"New opportunity",-1))])]),_:1})]),_:1},8,["class"])])),!j.value&&!n.forceType?(E(),W(t(R),{key:2,class:"bg-orange-50 border-orange-200"},{default:s(()=>[l(t(O),{class:"flex items-start gap-2"},{default:s(()=>[...e[64]||(e[64]=[a("i",{class:"fa-solid fa-exclamation-triangle text-orange-600 mt-0.5 text-sm"},null,-1),a("span",{class:"text-xs text-orange-700"},"Fill in vehicle details to enable lead/opportunity creation",-1)])]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1})],32)),[[ce,()=>x.value=!1]])}}};export{At as _,Ue as u};
