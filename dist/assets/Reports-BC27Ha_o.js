import{al as q,am as B,an as K,ao as O,ap as N,aq as X,d as r,o as i,F as T,i as V,e,t as g,n as C,j,ar as S,r as P,c as I,E as w,l as k,m as D,z as E,B as F,as as G,K as R,k as z,y as H}from"./index-DhXdPUMX.js";import{y as Q}from"./components-BWnj0vXB.js";import{_ as U}from"./PageHeader-DgVtM0CV.js";const L=(u=300)=>new Promise(p=>setTimeout(p,u)),W=async()=>(await L(),q),Z=async()=>(await L(),B),J=async()=>(await L(),K),Y=async()=>(await L(),O),ee=async()=>(await L(),N),te=async()=>(await L(),X),se={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-4"},ne={class:"flex items-start justify-between mb-2"},ae={class:"flex-1"},oe={class:"label-upper mb-0.5"},re={class:"flex items-baseline gap-1.5"},ie={class:"text-content-bold text-xl md:text-2xl font-bold leading-tight"},le={class:"h-8 mt-2 relative"},ce={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},de=["id"],ue=["id"],pe=["d","fill"],ge=["d","stroke","filter"],me=["cx","cy","fill"],xe={__name:"DashboardKPIs",props:{kpis:{type:Array,required:!0}},setup(u){const p=t=>{if(!t||t.length===0)return"";const n=Math.max(...t),s=Math.min(...t),a=n-s||1,m=100,b=40,y=4,x=t.map((f,v)=>({x:v/(t.length-1)*(m-y*2)+y,y:b-y-(f-s)/a*(b-y*2)}));if(x.length<2)return"";let h=`M ${x[0].x},${x[0].y}`;for(let f=0;f<x.length-1;f++){const v=x[f],l=x[f+1],_=v.x+(l.x-v.x)/2,$=v.x+(l.x-v.x)/2;h+=` C ${_},${v.y} ${$},${l.y} ${l.x},${l.y}`}return h},d=t=>{const n=p(t);if(!n)return"";const s=100,a=40,m=4,b=m,y=s-m;return`${n} L ${y},${a} L ${b},${a} Z`},o=t=>{if(!t||t.length===0)return{x:0,y:0};const n=Math.max(...t),s=Math.min(...t),a=n-s||1,m=4;return{x:100-m,y:40-m-(t[t.length-1]-s)/a*(40-m*2)}},c=t=>t.changeType==="increase"&&t.id===1?"#10b981":t.changeType==="increase"&&t.id===2?"#3b82f6":t.changeType==="decrease"?"#ef4444":t.changeType==="increase"&&t.id===4?"#f97316":"#6b7280";return(t,n)=>(i(),r("div",se,[(i(!0),r(T,null,V(u.kpis,s=>(i(),r("div",{key:s.id,class:"bg-white rounded-xl border border-gray-100 shadow-sm p-3 md:p-4 hover:shadow-md transition-shadow group"},[e("div",ne,[e("div",ae,[e("h3",oe,g(s.title),1),e("div",re,[e("span",ie,g(s.value),1),e("span",{class:C(["text-xs font-bold flex items-center gap-0.5",s.changeType==="increase"?"text-green-600":"text-red-600"])},[e("i",{class:C([s.changeType==="increase"?"fa-solid fa-arrow-up":"fa-solid fa-arrow-down","text-[10px]"])},null,2),j(" "+g(Math.abs(s.change))+"% ",1)],2)]),n[0]||(n[0]=e("p",{class:"text-xs text-gray-400 mt-0.5"},"vs Last month",-1))])]),e("div",le,[(i(),r("svg",ce,[e("defs",null,[e("linearGradient",{id:`gradient-${s.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:S(`stop-color:${c(s)};stop-opacity:0.2`)},null,4),e("stop",{offset:"100%",style:S(`stop-color:${c(s)};stop-opacity:0`)},null,4)],8,de),e("filter",{id:`glow-${s.id}`,x:"-20%",y:"-20%",width:"140%",height:"140%"},[...n[1]||(n[1]=[e("feGaussianBlur",{stdDeviation:"1",result:"blur"},null,-1),e("feComposite",{in:"SourceGraphic",in2:"blur",operator:"over"},null,-1)])],8,ue)]),e("path",{d:d(s.trend),fill:`url(#gradient-${s.id})`,class:"transition-all duration-700"},null,8,pe),e("path",{d:p(s.trend),stroke:c(s),"stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",filter:`url(#glow-${s.id})`,class:"transition-all duration-700"},null,8,ge),e("circle",{cx:o(s.trend).x,cy:o(s.trend).y,r:"2",fill:c(s),class:"group-hover:scale-150 transition-transform duration-300"},null,8,me)]))])]))),128))]))}},he={class:"bg-white rounded-xl border border-gray-100 shadow-sm p-4 md:p-5"},fe={class:"mb-4 pb-4 border-b border-gray-200"},ye={class:"flex flex-wrap items-center gap-x-6 gap-y-2"},be={class:"text-sm text-gray-600"},ve={class:"text-base font-bold text-gray-900"},_e={class:"text-xs text-gray-400"},$e={class:"mb-4"},we={class:"relative h-40 md:h-48 lg:h-56"},Pe={class:"w-full h-full",viewBox:"0 0 800 300",preserveAspectRatio:"none"},Te=["id"],Ve=["d","fill"],ke={class:"flex flex-wrap gap-4 mt-4"},Se={class:"text-xs text-gray-600"},Ce={class:"flex flex-wrap items-center gap-6 pt-4 border-t border-gray-200"},Le={class:"text-sm font-bold text-gray-700"},Me={__name:"SalesPipelineChart",props:{pipeline:{type:Object,required:!0}},setup(u){const p=u,d=n=>n.toLowerCase().replace(".","").replace(" ","-"),o=n=>({red:"#ef4444",orange:"#f97316",blue:"#3b82f6",gray:"#6b7280"})[n]||"#6b7280",c=n=>({"Coches.net":"12h",Autoscout24:"12h",OLX:"7d 9h","Cars.com":"12h"})[n]||"12h",t=(n,s)=>{const b=Math.max(...p.pipeline.leadSources[0].data),y=n.length,x=800/(y-1);let h=Array(y).fill(300);for(let l=0;l<s;l++){const _=p.pipeline.leadSources[l].data;for(let $=0;$<y;$++)h[$]-=_[$]/b*300}const f=n.map((l,_)=>h[_]-l/b*300);let v=`M 0,${f[0]}`;for(let l=0;l<y-1;l++){const _=l*x,$=(l+1)*x,M=_+($-_)/2,A=_+($-_)/2;v+=` C ${M},${f[l]} ${A},${f[l+1]} ${$},${f[l+1]}`}v+=` L 800,${h[y-1]}`;for(let l=y-1;l>0;l--){const _=l*x,$=(l-1)*x,M=_-(_-$)/2,A=_-(_-$)/2;v+=` C ${M},${h[l]} ${A},${h[l-1]} ${$},${h[l-1]}`}return v+=" Z",v};return(n,s)=>(i(),r("div",he,[s[2]||(s[2]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"section-title !mb-0"},"Sales Pipeline"),e("select",{class:"input !py-1.5 !px-3 text-sm w-auto"},[e("option",null,"This month"),e("option",null,"Last month"),e("option",null,"This quarter")])],-1)),e("div",fe,[e("div",ye,[(i(!0),r(T,null,V(u.pipeline.stages,a=>(i(),r("div",{key:a.name,class:"flex items-center gap-2"},[e("span",be,g(a.name),1),e("span",ve,g(a.percentage)+"%",1),e("span",_e,"("+g(a.count)+")",1)]))),128))])]),e("div",$e,[e("div",we,[(i(),r("svg",Pe,[e("defs",null,[(i(!0),r(T,null,V(u.pipeline.leadSources,a=>(i(),r("linearGradient",{key:`gradient-${a.name}`,id:`gradient-${d(a.name)}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:S(`stop-color:${o(a.color)};stop-opacity:0.8`)},null,4),e("stop",{offset:"100%",style:S(`stop-color:${o(a.color)};stop-opacity:0.1`)},null,4)],8,Te))),128))]),(i(!0),r(T,null,V(u.pipeline.leadSources,(a,m)=>(i(),r("path",{key:a.name,d:t(a.data,m),fill:`url(#gradient-${d(a.name)})`,opacity:"0.7"},null,8,Ve))),128))]))]),e("div",ke,[(i(!0),r(T,null,V(u.pipeline.leadSources,a=>(i(),r("div",{key:a.name,class:"flex items-center gap-2"},[e("div",{class:C(["w-3 h-3 rounded-full",{"bg-red-500":a.color==="red","bg-orange-500":a.color==="orange","bg-blue-500":a.color==="blue","bg-gray-500":a.color==="gray"}])},null,2),e("span",Se,g(a.name),1)]))),128))])]),e("div",Ce,[(i(!0),r(T,null,V(u.pipeline.leadSources,a=>(i(),r("div",{key:a.name,class:"flex items-center gap-2"},[s[0]||(s[0]=e("i",{class:"fa-regular fa-clock text-xs text-gray-400"},null,-1)),e("span",Le,g(c(a.name)),1),s[1]||(s[1]=e("span",{class:"text-xs text-gray-500"},"on avg.",-1))]))),128))])]))}},Ae={class:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden"},je={class:"table-wrapper w-full"},Ie={__name:"TeamPerformanceTable",props:{teamMembers:{type:Array,required:!0}},setup(u){const p=P({pageIndex:0,pageSize:10}),d=P(""),o=P([]),c=I(()=>[{accessorKey:"name",header:"Name",meta:{title:"Name"},cell:({row:t})=>w("div",{class:"text-sm font-bold text-gray-900"},t.original.name)},{accessorKey:"leads",header:"Leads",meta:{title:"Leads"},cell:({row:t})=>w("div",{class:"text-sm text-gray-700"},t.original.leads)},{accessorKey:"qualifiedLeads",header:"Qualified",meta:{title:"Qualified"},cell:({row:t})=>{const n=t.original;return w("div",{class:"text-sm text-gray-700"},[w("span",n.qualifiedLeads),w("span",{class:"text-gray-500 text-xs ml-1"},`(${n.qualifiedPercentage}%)`)])}},{accessorKey:"opportunities",header:"Opportunities",meta:{title:"Opportunities"},cell:({row:t})=>w("div",{class:"text-sm text-gray-700"},t.original.opportunities)},{accessorKey:"inNegotiation",header:"In Negotiation",meta:{title:"In Negotiation"},cell:({row:t})=>{const n=t.original;return w("div",{class:"text-sm text-gray-700"},[w("span",n.inNegotiation),w("span",{class:"text-gray-500 text-xs ml-1"},`(${n.inNegotiationPercentage}%)`)])}},{accessorKey:"won",header:"Won",meta:{title:"Won"},cell:({row:t})=>{const n=t.original;return w("div",{class:"text-sm text-gray-700"},[w("span",n.won),w("span",{class:"text-gray-500 text-xs ml-1"},`(${n.wonPercentage}%)`)])}}]);return(t,n)=>(i(),r("div",Ae,[n[3]||(n[3]=e("div",{class:"p-4 md:p-5 border-b border-gray-200"},[e("h2",{class:"heading-main"},"Team Performance")],-1)),e("div",je,[k(D(Q),{data:u.teamMembers,columns:c.value,pagination:p.value,"onUpdate:pagination":n[0]||(n[0]=s=>p.value=s),globalFilter:d.value,"onUpdate:globalFilter":n[1]||(n[1]=s=>d.value=s),sorting:o.value,"onUpdate:sorting":n[2]||(n[2]=s=>o.value=s),paginationOptions:{rowCount:u.teamMembers.length},globalFilterOptions:{debounce:300}},null,8,["data","columns","pagination","globalFilter","sorting","paginationOptions"])])]))}},qe={class:"bg-white rounded-xl border border-gray-100 shadow-sm p-4 md:p-5"},Be={class:"space-y-3"},Ke={class:"flex items-start gap-3"},Oe={class:"w-10 h-10 rounded-lg bg-gray-50 border border-gray-100 flex flex-col items-center justify-center shrink-0 leading-none"},Ne={class:"text-[10px] font-bold text-gray-400 uppercase"},Xe={class:"text-xs font-bold text-gray-900 mt-0.5"},De={class:"flex-1 min-w-0"},Ee={class:"flex items-center justify-between"},Fe={class:"text-[11px] font-bold text-gray-900 truncate"},Ge={class:"text-[10px] text-gray-400"},Re={class:"text-[10px] text-gray-500 mt-0.5 truncate"},ze={class:"text-[10px] text-gray-400 mt-0.5 truncate flex items-center gap-1"},He={__name:"TodaysEventsSidebar",props:{events:{type:Array,required:!0}},setup(u){return(p,d)=>(i(),r("div",qe,[d[1]||(d[1]=e("h2",{class:"label-upper !text-[10px] mb-4"},"Today's Events",-1)),e("div",Be,[(i(!0),r(T,null,V(u.events,o=>(i(),r("div",{key:o.id,class:"pb-3 border-b border-gray-50 last:border-0 last:pb-0"},[e("div",Ke,[e("div",Oe,[e("span",Ne,g(o.time.split(":")[0]),1),e("span",Xe,g(o.time.split(":")[1].split(" ")[0]),1)]),e("div",De,[e("div",Ee,[e("div",Fe,g(o.type),1),e("div",Ge,g(o.time),1)]),e("div",Re,g(o.customer),1),e("div",ze,[d[0]||(d[0]=e("i",{class:"fa-solid fa-location-dot text-[8px]"},null,-1)),j(" "+g(o.location),1)])])])]))),128))])]))}},Qe={class:"bg-white border border-gray-200 rounded-xl shadow-sm overflow-hidden flex flex-col h-full"},Ue={class:"bg-white flex-1 overflow-y-auto"},We={class:"p-4 space-y-2"},Ze=["onClick"],Je={class:"px-4 pb-4"},Ye={class:"p-4 bg-white border-t border-gray-200"},et={class:"flex gap-2 items-center"},tt={class:"flex-1 relative"},st={__name:"AIInsightsSidebar",setup(u){const p=P(["Who are my top 3 best performing sales people?","What's our current pipeline conversion rate?","How many leads did we get today?","How many leads are in negotiation?"]),d=P(""),o=P(!1),c=n=>{d.value=n,t()},t=()=>{d.value.trim()&&(d.value="")};return(n,s)=>(i(),r("div",Qe,[s[5]||(s[5]=e("div",{class:"bg-gray-900 px-4 py-3 flex items-center justify-between"},[e("div",{class:"flex items-center gap-2"},[e("span",{class:"text-white font-bold text-sm"},"Insights"),e("span",{class:"text-gray-300 text-sm"},"powered by AI")])],-1)),e("div",Ue,[e("div",We,[(i(!0),r(T,null,V(p.value,(a,m)=>(i(),r("button",{key:m,onClick:b=>c(a),class:"w-full text-left px-4 py-3 bg-white hover:bg-gray-50 border border-gray-200 rounded-lg transition-colors text-sm text-gray-700"},g(a),9,Ze))),128))]),e("div",Je,[e("button",{onClick:s[0]||(s[0]=a=>o.value=!o.value),class:"w-full text-left text-sm text-gray-600 hover:text-gray-900 flex items-center gap-2 transition-colors"},[s[2]||(s[2]=e("span",null,"Show more ideas",-1)),e("i",{class:C(["fa-solid fa-chevron-down text-xs transition-transform duration-300",{"rotate-180":o.value}])},null,2)])])]),e("div",Ye,[e("div",et,[s[4]||(s[4]=e("div",{class:"w-8 h-8 rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-sparkles text-white text-xs"})],-1)),e("div",tt,[E(e("input",{"onUpdate:modelValue":s[1]||(s[1]=a=>d.value=a),onKeyup:G(t,["enter"]),type:"text",placeholder:"Ask me anything",class:"w-full bg-gray-50 border border-gray-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500 focus:bg-white transition-all"},null,544),[[F,d.value]])]),e("button",{onClick:t,class:"w-10 h-10 rounded-full bg-gray-800 hover:bg-gray-700 text-white flex items-center justify-center transition-all shrink-0"},[...s[3]||(s[3]=[e("i",{class:"fa-solid fa-arrow-right text-sm"},null,-1)])])])])]))}},nt={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-4 md:p-5"},at={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4"},ot={class:"mb-2"},rt={class:"text-xs font-bold text-gray-900 truncate mb-0.5"},it={class:"flex items-baseline gap-1.5"},lt={class:"text-base font-bold text-gray-900 leading-tight"},ct={class:"flex items-center gap-2 mb-2"},dt={class:"text-xs text-gray-500"},ut={class:"h-8 relative"},pt={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},gt=["id"],mt=["d","fill"],xt=["d","stroke"],ht={__name:"PageViewsByVehicle",props:{vehicles:{type:Array,required:!0}},setup(u){const p=o=>{if(!o||o.length===0)return"";const c=Math.max(...o),t=Math.min(...o),n=c-t||1,s=100,a=40,m=2,b=o.map((x,h)=>({x:h/(o.length-1)*(s-m*2)+m,y:a-m-(x-t)/n*(a-m*2)}));if(b.length<2)return"";let y=`M ${b[0].x},${b[0].y}`;for(let x=0;x<b.length-1;x++){const h=b[x],f=b[x+1],v=h.x+(f.x-h.x)/2,l=h.x+(f.x-h.x)/2;y+=` C ${v},${h.y} ${l},${f.y} ${f.x},${f.y}`}return y},d=o=>{const c=p(o);if(!c)return"";const t=100,n=40,s=2,a=s,m=t-s;return`${c} L ${m},${n} L ${a},${n} Z`};return(o,c)=>(i(),r("div",nt,[c[1]||(c[1]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"heading-main"},"Page Views by Vehicle"),e("select",{class:"input !py-1.5 !px-3 text-sm w-auto"},[e("option",null,"This month"),e("option",null,"Last month")])],-1)),e("div",at,[(i(!0),r(T,null,V(u.vehicles,t=>(i(),r("div",{key:t.id,class:"bg-gray-50 rounded-lg border border-gray-200 p-3"},[e("div",ot,[e("h3",rt,g(t.brand)+" "+g(t.model),1),e("div",it,[e("span",lt,g(t.views),1),c[0]||(c[0]=e("span",{class:"text-xs text-gray-500"},"views",-1))])]),e("div",ct,[e("span",{class:C(["text-xs font-bold flex items-center gap-0.5",t.changeType==="increase"?"text-green-600":"text-red-600"])},[e("i",{class:C([t.changeType==="increase"?"fa-solid fa-arrow-up":"fa-solid fa-arrow-down","text-[10px]"])},null,2),j(" "+g(Math.abs(t.change))+"% ",1)],2),e("span",dt,g(t.avgPerDay)+" avg/day",1)]),e("div",ut,[(i(),r("svg",pt,[e("defs",null,[e("linearGradient",{id:`gradient-v-${t.id}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:S(`stop-color:${t.changeType==="increase"?"#10b981":"#ef4444"};stop-opacity:0.2`)},null,4),e("stop",{offset:"100%",style:S(`stop-color:${t.changeType==="increase"?"#10b981":"#ef4444"};stop-opacity:0`)},null,4)],8,gt)]),e("path",{d:d(t.trend),fill:`url(#gradient-v-${t.id})`,class:"transition-all duration-700"},null,8,mt),e("path",{d:p(t.trend),stroke:t.changeType==="increase"?"#10b981":"#ef4444","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,xt)]))])]))),128))])]))}},ft={class:"bg-white rounded-xl border border-gray-200 shadow-sm p-4 md:p-5"},yt={class:"space-y-4"},bt={class:"flex items-end gap-1 h-64 overflow-x-auto pb-2"},vt={class:"w-full flex items-end justify-center h-full gap-0.5"},_t=["title"],$t=["title"],wt={class:"text-[9px] text-gray-500 mt-1"},Pt={__name:"PageViewsChart",props:{data:{type:Array,required:!0}},setup(u){const p=u,d=I(()=>Math.max(...p.data.map(o=>o.organic+o.paid)));return(o,c)=>(i(),r("div",ft,[c[1]||(c[1]=e("div",{class:"flex items-center justify-between mb-4"},[e("h2",{class:"heading-main"},"Page Views: Organic vs. Paid"),e("select",{class:"input text-sm w-auto"},[e("option",null,"This month"),e("option",null,"Last month"),e("option",null,"This quarter")])],-1)),e("div",yt,[e("div",bt,[(i(!0),r(T,null,V(u.data,(t,n)=>(i(),r("div",{key:n,class:"flex flex-col items-center gap-1 min-w-[20px]"},[e("div",vt,[e("div",{class:"bg-blue-600 rounded-t w-2",style:S({height:`${t.organic/d.value*100}%`,minHeight:"2px"}),title:`Organic: ${t.organic}`},null,12,_t),e("div",{class:"bg-orange-500 rounded-t w-2",style:S({height:`${t.paid/d.value*100}%`,minHeight:"2px"}),title:`Paid: ${t.paid}`},null,12,$t)]),e("span",wt,g(n+1),1)]))),128))]),c[0]||(c[0]=R('<div class="flex items-center justify-center gap-6 pt-4 border-t border-gray-200"><div class="flex items-center gap-2"><div class="w-4 h-4 bg-blue-600 rounded"></div><span class="text-meta text-gray-600">Organic</span></div><div class="flex items-center gap-2"><div class="w-4 h-4 bg-orange-500 rounded"></div><span class="text-meta text-gray-600">Paid</span></div></div>',1))])]))}},Tt={class:"page-container"},Vt={class:"p-4 md:p-6 lg:p-8"},kt={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 items-start"},St={class:"lg:col-span-2 space-y-4 md:space-y-6"},Ct={class:"space-y-4 md:space-y-6"},jt={__name:"Reports",setup(u){const p=P([]),d=P({stages:[],leadSources:[]}),o=P([]),c=P([]),t=P([]),n=P([]);return z(async()=>{p.value=await W(),d.value=await Z(),o.value=await J(),c.value=await Y(),t.value=await ee(),n.value=await te()}),(s,a)=>(i(),r("div",Tt,[k(U,{title:"Reports",subtitle:"Performance tracking and insights"},{actions:H(()=>[...a[0]||(a[0]=[e("select",{class:"input text-sm w-auto"},[e("option",null,"This month"),e("option",null,"Last month"),e("option",null,"This quarter"),e("option",null,"This year")],-1)])]),_:1}),e("div",Vt,[e("div",kt,[e("div",St,[k(xe,{kpis:p.value},null,8,["kpis"]),k(Me,{pipeline:d.value},null,8,["pipeline"]),k(Ie,{"team-members":o.value},null,8,["team-members"]),k(ht,{vehicles:t.value},null,8,["vehicles"])]),e("div",Ct,[k(He,{events:c.value},null,8,["events"]),k(st),k(Pt,{data:n.value},null,8,["data"])])])])]))}};export{jt as default};
