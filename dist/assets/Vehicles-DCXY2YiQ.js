import{d as T,o as A,F as E,i as W,n as G,e as u,s as a,t as L,y as l,c as x,B as r,O as Q,r as h,m as J,Q as d,h as X,k as n,w as Z}from"./index-Db_3peLd.js";import{u as P}from"./vehicles-ygxbygEI.js";import{_}from"./PageHeader-DewLlPvW.js";import{z as B,d as ee,n as M,f as le,F as te,L as ae,g as se,h as re,K as ne,Q as g,c as k,G as U,W as N,U as $,H as I,j as y,o as ie,C as oe}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-BDHqZScF.js";import{y as ue}from"./components-Ci9ddle2.js";const de={class:"flex items-center gap-3 mb-4 overflow-x-auto pb-2 scrollbar-hide"},pe=["onClick"],me={class:"text-sm font-medium text-foreground whitespace-nowrap"},ce={__name:"VehicleFilters",props:{vehicleTabs:{type:Array,required:!0},vehicleFilter:{type:String,required:!0}},emits:["filter-change"],setup(m){return(f,i)=>(A(),T("div",de,[(A(!0),T(E,null,W(m.vehicleTabs,p=>(A(),T("button",{key:p.key,onClick:V=>f.$emit("filter-change",p.key),class:G(["flex items-center justify-between gap-3 px-4 py-3 bg-white border border-border rounded-lg cursor-pointer hover:shadow-sm transition-all shrink-0 min-w-40 border-t-4",m.vehicleFilter===p.key?p.borderColor:"border-t-border"])},[u("span",me,L(p.label),1),a(l(B),{text:String(p.count),size:"small",theme:m.vehicleFilter===p.key?"blue":"gray"},null,8,["text","theme"])],10,pe))),128))]))}},fe={class:"table-wrapper w-full"},ge={__name:"VehicleGrid",props:{filteredVehicles:{type:Array,required:!0},columns:{type:Array,required:!0},loading:{type:Boolean,default:!1},tableMeta:{type:Object,required:!0},filterDefinitions:{type:Array,required:!0},pagination:{type:Object,required:!0},globalFilter:{type:String,required:!0},sorting:{type:Array,required:!0},columnFilters:{type:Array,required:!0}},emits:["row-click","update:pagination","update:globalFilter","update:sorting","update:columnFilters"],setup(m,{emit:f}){const i=m,p=f,V=x({get:()=>i.pagination,set:b=>p("update:pagination",b)}),w=x({get:()=>i.globalFilter,set:b=>p("update:globalFilter",b)}),F=x({get:()=>i.sorting,set:b=>p("update:sorting",b)}),S=x({get:()=>i.columnFilters,set:b=>p("update:columnFilters",b)});return(b,c)=>(A(),T("div",fe,[a(l(ue),{data:m.filteredVehicles,columns:m.columns,loading:m.loading,meta:m.tableMeta,onRowClick:c[0]||(c[0]=v=>b.$emit("row-click",v)),columnFiltersOptions:{filterDefs:m.filterDefinitions},pagination:V.value,"onUpdate:pagination":c[1]||(c[1]=v=>V.value=v),globalFilter:w.value,"onUpdate:globalFilter":c[2]||(c[2]=v=>w.value=v),sorting:F.value,"onUpdate:sorting":c[3]||(c[3]=v=>F.value=v),columnFilters:S.value,"onUpdate:columnFilters":c[4]||(c[4]=v=>S.value=v),paginationOptions:{rowCount:m.filteredVehicles.length},globalFilterOptions:{debounce:300,placeholder:"Q Search or ask a question"}},{toolbar:r(()=>[Q(b.$slots,"toolbar")]),"empty-state":r(()=>[...c[5]||(c[5]=[u("div",{class:"empty-state"},[u("i",{class:"fa-solid fa-car empty-state-icon"}),u("p",{class:"empty-state-text"},"No vehicles found")],-1)])]),_:3},8,["data","columns","loading","meta","columnFiltersOptions","pagination","globalFilter","sorting","columnFilters","paginationOptions"])]))}};function be(){const m=P(),f=h(!1),i=h({brand:"",model:"",year:"",vin:"",plates:"",fuelType:"",gearType:"",kilometers:"",registration:"",owner:"",ownershipType:"",ownedSince:"",warrantyInfo:"",stockDays:null}),p=()=>{f.value=!1,i.value={brand:"",model:"",year:"",vin:"",plates:"",fuelType:"",gearType:"",kilometers:"",registration:"",owner:"",ownershipType:"",ownedSince:"",warrantyInfo:"",stockDays:null}};return{showAddModal:f,newVehicle:i,handleCloseModal:p,handleSubmit:async()=>{try{const w={brand:i.value.brand,model:i.value.model,year:parseInt(i.value.year)||null,vin:i.value.vin||null,plates:i.value.plates||null,fuelType:i.value.fuelType||null,gearType:i.value.gearType||null,kilometers:parseInt(i.value.kilometers)||0,registration:i.value.registration||null,owner:i.value.owner||null,ownershipType:i.value.ownershipType||null,ownedSince:i.value.ownedSince||null,warrantyInfo:i.value.warrantyInfo||null,stockDays:null,status:"Available"};await m.addVehicle(w),p()}catch(w){console.error("Error adding vehicle:",w)}}}}const ye={class:"page-container"},ve={class:"p-4 md:p-8"},we={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ke={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},xe={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},Ve={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},he={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ce={__name:"Vehicles",setup(m){X();const f=P(),i=h("in-stock"),p=h({pageIndex:0,pageSize:10}),V=h(""),w=h([]),F=h([]),S=t=>{t||O()},b=x(()=>i.value==="in-stock"?f.vehicles.filter(t=>t.stockDays!==null&&t.stockDays!==void 0):f.vehicles.filter(t=>t.stockDays===null||t.stockDays===void 0)),c=x(()=>[{key:"in-stock",label:"In stock",count:f.vehicles.filter(t=>t.stockDays!==null&&t.stockDays!==void 0).length,borderColor:"border-t-blue-600"},{key:"customer-vehicles",label:"Customers' vehicles",count:f.vehicles.filter(t=>t.stockDays===null||t.stockDays===void 0).length,borderColor:"border-t-purple-600"}]),v=t=>{i.value=t},{showAddModal:K,newVehicle:o,handleCloseModal:O,handleSubmit:D}=be(),z=[{key:"status",label:"Status",type:"select",operators:[{value:"eq",label:"is"},{value:"ne",label:"is not"}],options:[{value:"Available",label:"Available"},{value:"In Stock",label:"In Stock"},{value:"Sold",label:"Sold"}],aiHint:"Vehicle availability status"},{key:"brand",label:"Brand",type:"multiselect",operators:[{value:"in",label:"is any of"},{value:"notIn",label:"is none of"}],options:[{value:"Volkswagen",label:"Volkswagen"},{value:"Mercedes-Benz",label:"Mercedes-Benz"},{value:"Audi",label:"Audi"},{value:"Porsche",label:"Porsche"}],aiHint:"Car manufacturer brand"},{key:"price",label:"Price",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],prefix:"â‚¬",aiHint:"Vehicle price in euros"},{key:"stockDays",label:"Stock Days",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],aiHint:"Number of days in stock"}];J(()=>{f.fetchVehicles()});const H=t=>{t.original},q=t=>new Intl.NumberFormat("en-US").format(t),Y=x(()=>({class:{tr:()=>"cursor-pointer hover:bg-surfaceSecondary transition-colors"}})),R=t=>t.kilometers===0?t.year===new Date().getFullYear()?"New":"New 0km":"Used",C=t=>t?(typeof t=="string"&&t.includes("/"),t):"N/A",j=x(()=>i.value==="in-stock"?[{accessorKey:"image",header:"Photo",meta:{title:"Photo"},cell:({row:t})=>{const e=t.original;return e.image?d("img",{src:e.image,alt:`${e.brand} ${e.model}`,class:"w-16 h-16 object-cover rounded-md"}):d("div",{class:"w-16 h-16 bg-surface border border-E5E7EB rounded-md flex items-center justify-center shrink-0"},[d("i",{class:"fa-solid fa-car text-2xl text-sub"})])}},{accessorKey:"brand",header:"Vehicle",meta:{title:"Vehicle"},cell:({row:t})=>{const e=t.original;return d("div",[d("div",{class:"text-content-bold"},`${e.brand} ${e.model}`),d("div",{class:"text-meta"},e.year)])}},{accessorKey:"type",header:"Type",meta:{title:"Type"},cell:({row:t})=>{const e=t.original,s=R(e);return d("span",{class:"text-meta"},s)}},{accessorKey:"engine",header:"Engine",meta:{title:"Engine"},cell:({row:t})=>d("span",{class:"text-meta"},"N/A")},{accessorKey:"fuelType",header:"Fuel type",meta:{title:"Fuel type"},cell:({row:t})=>d("span",{class:"text-meta"},t.original.fuelType||"N/A")},{accessorKey:"gearType",header:"Gear type",meta:{title:"Gear type"},cell:({row:t})=>d("span",{class:"text-meta"},t.original.gearType||"N/A")},{accessorKey:"registration",header:"Registered at",meta:{title:"Registered at"},cell:({row:t})=>{const e=t.original;return d("span",{class:"text-meta"},C(e.registration)||"N/A")}},{accessorKey:"kilometers",header:"Mileage",meta:{title:"Mileage"},cell:({row:t})=>d("span",{class:"text-meta"},`${q(t.original.kilometers)} km`)},{accessorKey:"stockDays",header:"Days in stock",meta:{title:"Days in stock"},cell:({row:t})=>{const e=t.original.stockDays,s=e>300?"text-red-600":"text-gray-600";return d("span",{class:`text-sm font-medium ${s}`},`${e} days`)}},{accessorKey:"dealership",header:"Dealership",meta:{title:"Dealership"},cell:({row:t})=>d("span",{class:"text-meta"},t.original.dealership||"N/A")},{accessorKey:"status",header:"Availability",meta:{title:"Availability"},cell:({row:t})=>{const e=t.original.status;return d(B,{text:e,size:"small",theme:e==="Available"?"green":e==="In Stock"?"blue":"gray"})}}]:[{accessorKey:"brand",header:"Vehicle",meta:{title:"Vehicle"},cell:({row:t})=>{const e=t.original;return d("div",[d("div",{class:"text-content-bold"},`${e.brand} ${e.model}`),d("div",{class:"text-meta"},e.year)])}},{accessorKey:"plates",header:"Plates",meta:{title:"Plates"},cell:({row:t})=>{const e=t.original,s=e.plates||(e.vin?e.vin.slice(-6):null)||"N/A";return d("span",{class:"text-meta"},s)}},{accessorKey:"kilometers",header:"Mileage",meta:{title:"Mileage"},cell:({row:t})=>d("span",{class:"text-meta"},`${q(t.original.kilometers)} km`)},{accessorKey:"registration",header:"Registered at",meta:{title:"Registered at"},cell:({row:t})=>{const e=t.original;return d("span",{class:"text-meta"},C(e.registration)||"N/A")}},{accessorKey:"owner",header:"Owner",meta:{title:"Owner"},cell:({row:t})=>{const e=t.original,s=e.owner||(e.requestedBy&&e.requestedBy.length>0?e.requestedBy[0]:null)||"N/A";return d("span",{class:"text-meta"},s)}},{accessorKey:"ownershipType",header:"Ownership type",meta:{title:"Ownership type"},cell:({row:t})=>d("span",{class:"text-meta"},"N/A")},{accessorKey:"ownedSince",header:"Owned since",meta:{title:"Owned since"},cell:({row:t})=>{const e=t.original;return d("span",{class:"text-meta"},C(e.registration)||"N/A")}},{accessorKey:"warrantyInfo",header:"Warranty info",meta:{title:"Warranty info"},cell:({row:t})=>d("span",{class:"text-meta"},"N/A")}]);return(t,e)=>(A(),T("div",ye,[a(_,{title:"Vehicles Inventory"},{actions:r(()=>[a(l(M),{onClick:e[0]||(e[0]=s=>K.value=!0),variant:"outline",size:"small",class:"flex items-center gap-2"},{default:r(()=>[...e[19]||(e[19]=[u("i",{class:"fa-solid fa-plus text-sm"},null,-1),u("span",{class:"hidden sm:inline"},"Add new",-1)])]),_:1})]),_:1}),u("div",ve,[a(ce,{"vehicle-tabs":c.value,"vehicle-filter":i.value,onFilterChange:v},null,8,["vehicle-tabs","vehicle-filter"]),a(ge,{"filtered-vehicles":b.value,columns:j.value,loading:l(f).loading,"table-meta":Y.value,"filter-definitions":z,pagination:p.value,"onUpdate:pagination":e[1]||(e[1]=s=>p.value=s),"global-filter":V.value,"onUpdate:globalFilter":e[2]||(e[2]=s=>V.value=s),sorting:w.value,"onUpdate:sorting":e[3]||(e[3]=s=>w.value=s),"column-filters":F.value,"onUpdate:columnFilters":e[4]||(e[4]=s=>F.value=s),onRowClick:H},null,8,["filtered-vehicles","columns","loading","table-meta","pagination","global-filter","sorting","column-filters"])]),a(l(ee),{open:l(K),"onUpdate:open":S},{default:r(()=>[a(l(le),null,{default:r(()=>[a(l(te),{class:"fixed inset-0 z-50 bg-black/50"}),a(l(ae),{class:"w-full sm:max-w-lg"},{default:r(()=>[a(l(se),null,{default:r(()=>[a(l(re),null,{default:r(()=>[...e[20]||(e[20]=[n("Add Customer Vehicle",-1)])]),_:1}),a(l(ne),null,{default:r(()=>[...e[21]||(e[21]=[n("Fill in the details for the new customer vehicle.",-1)])]),_:1})]),_:1}),u("form",{onSubmit:e[18]||(e[18]=Z((...s)=>l(D)&&l(D)(...s),["prevent"])),class:"space-y-4"},[u("div",we,[u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[22]||(e[22]=[n("Brand",-1)])]),_:1}),a(l(k),{modelValue:l(o).brand,"onUpdate:modelValue":e[5]||(e[5]=s=>l(o).brand=s),type:"text",placeholder:"e.g., Volkswagen",required:""},null,8,["modelValue"])]),u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[23]||(e[23]=[n("Model",-1)])]),_:1}),a(l(k),{modelValue:l(o).model,"onUpdate:modelValue":e[6]||(e[6]=s=>l(o).model=s),type:"text",placeholder:"e.g., ID.4",required:""},null,8,["modelValue"])]),u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[24]||(e[24]=[n("Year",-1)])]),_:1}),a(l(k),{modelValue:l(o).year,"onUpdate:modelValue":e[7]||(e[7]=s=>l(o).year=s),type:"number",placeholder:"e.g., 2024",min:1900,max:new Date().getFullYear()+1,required:""},null,8,["modelValue","max"])])]),u("div",ke,[u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[25]||(e[25]=[n("VIN",-1)])]),_:1}),a(l(k),{modelValue:l(o).vin,"onUpdate:modelValue":e[8]||(e[8]=s=>l(o).vin=s),type:"text",placeholder:"Vehicle Identification Number"},null,8,["modelValue"])]),u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[26]||(e[26]=[n("Plates",-1)])]),_:1}),a(l(k),{modelValue:l(o).plates,"onUpdate:modelValue":e[9]||(e[9]=s=>l(o).plates=s),type:"text",placeholder:"License plate number"},null,8,["modelValue"])])]),u("div",xe,[u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[27]||(e[27]=[n("Fuel Type",-1)])]),_:1}),a(l(U),{modelValue:l(o).fuelType,"onUpdate:modelValue":e[10]||(e[10]=s=>l(o).fuelType=s)},{default:r(()=>[a(l(N),null,{default:r(()=>[a(l($),{placeholder:"Select fuel type..."})]),_:1}),a(l(I),null,{default:r(()=>[a(l(y),{value:"Petrol"},{default:r(()=>[...e[28]||(e[28]=[n("Petrol",-1)])]),_:1}),a(l(y),{value:"Diesel"},{default:r(()=>[...e[29]||(e[29]=[n("Diesel",-1)])]),_:1}),a(l(y),{value:"Electric"},{default:r(()=>[...e[30]||(e[30]=[n("Electric",-1)])]),_:1}),a(l(y),{value:"Hybrid"},{default:r(()=>[...e[31]||(e[31]=[n("Hybrid",-1)])]),_:1}),a(l(y),{value:"Plug-in Hybrid"},{default:r(()=>[...e[32]||(e[32]=[n("Plug-in Hybrid",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[33]||(e[33]=[n("Gear Type",-1)])]),_:1}),a(l(U),{modelValue:l(o).gearType,"onUpdate:modelValue":e[11]||(e[11]=s=>l(o).gearType=s)},{default:r(()=>[a(l(N),null,{default:r(()=>[a(l($),{placeholder:"Select gear type..."})]),_:1}),a(l(I),null,{default:r(()=>[a(l(y),{value:"Manual"},{default:r(()=>[...e[34]||(e[34]=[n("Manual",-1)])]),_:1}),a(l(y),{value:"Automatic"},{default:r(()=>[...e[35]||(e[35]=[n("Automatic",-1)])]),_:1}),a(l(y),{value:"CVT"},{default:r(()=>[...e[36]||(e[36]=[n("CVT",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[37]||(e[37]=[n("Mileage (km)",-1)])]),_:1}),a(l(k),{modelValue:l(o).kilometers,"onUpdate:modelValue":e[12]||(e[12]=s=>l(o).kilometers=s),modelModifiers:{number:!0},type:"number",placeholder:"0",min:0},null,8,["modelValue"])])]),u("div",Ve,[u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[38]||(e[38]=[n("Registered At",-1)])]),_:1}),a(l(k),{modelValue:l(o).registration,"onUpdate:modelValue":e[13]||(e[13]=s=>l(o).registration=s),type:"text",placeholder:"MM/YYYY (e.g., 01/2024)"},null,8,["modelValue"])]),u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[39]||(e[39]=[n("Owned Since",-1)])]),_:1}),a(l(k),{modelValue:l(o).ownedSince,"onUpdate:modelValue":e[14]||(e[14]=s=>l(o).ownedSince=s),type:"text",placeholder:"MM/YYYY (e.g., 01/2024)"},null,8,["modelValue"])])]),u("div",he,[u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[40]||(e[40]=[n("Owner",-1)])]),_:1}),a(l(k),{modelValue:l(o).owner,"onUpdate:modelValue":e[15]||(e[15]=s=>l(o).owner=s),type:"text",placeholder:"Owner name"},null,8,["modelValue"])]),u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[41]||(e[41]=[n("Ownership Type",-1)])]),_:1}),a(l(U),{modelValue:l(o).ownershipType,"onUpdate:modelValue":e[16]||(e[16]=s=>l(o).ownershipType=s)},{default:r(()=>[a(l(N),null,{default:r(()=>[a(l($),{placeholder:"Select ownership type..."})]),_:1}),a(l(I),null,{default:r(()=>[a(l(y),{value:"Private"},{default:r(()=>[...e[42]||(e[42]=[n("Private",-1)])]),_:1}),a(l(y),{value:"Company"},{default:r(()=>[...e[43]||(e[43]=[n("Company",-1)])]),_:1}),a(l(y),{value:"Lease"},{default:r(()=>[...e[44]||(e[44]=[n("Lease",-1)])]),_:1}),a(l(y),{value:"Fleet"},{default:r(()=>[...e[45]||(e[45]=[n("Fleet",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])]),u("div",null,[a(l(g),{class:"block mb-2 text-sub text-fluid-xs font-bold uppercase tracking-wider"},{default:r(()=>[...e[46]||(e[46]=[n("Warranty Info",-1)])]),_:1}),a(l(ie),{modelValue:l(o).warrantyInfo,"onUpdate:modelValue":e[17]||(e[17]=s=>l(o).warrantyInfo=s),rows:3,placeholder:"Warranty information..."},null,8,["modelValue"])])],32),a(l(oe),{class:"flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3"},{default:r(()=>[a(l(M),{label:"Cancel",variant:"outline",class:"w-full sm:w-auto",onClick:l(O)},null,8,["onClick"]),a(l(M),{label:"Add Vehicle",variant:"primary",class:"w-full sm:w-auto",onClick:l(D)},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}};export{Ce as default};
