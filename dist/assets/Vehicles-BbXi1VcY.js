import{K as p,d as M,r as x,c as S,j,a as d,k as E,b as e,l as f,y as I,z as P,E as C,B as A,A as U,F,h as N,t as c,o as u,C as q,n as D,e as z}from"./index-BpJzGUMn.js";import{_ as T}from"./PageHeader-XFvgz0Db.js";const v=(l=300)=>new Promise(t=>setTimeout(t,l)),K=async(l={})=>{await v();let t=[...p];if(l.status&&(t=t.filter(a=>a.status===l.status)),l.brand&&(t=t.filter(a=>a.brand===l.brand)),l.search){const a=l.search.toLowerCase();t=t.filter(n=>n.brand.toLowerCase().includes(a)||n.model.toLowerCase().includes(a)||n.vin.toLowerCase().includes(a))}return{data:t,total:t.length}},$=async l=>{await v();const t=p.find(a=>a.id===parseInt(l));if(!t)throw new Error("Vehicle not found");return t},Q=async l=>{await v();const t={id:p.length+1,...l,stockDays:0};return p.push(t),t},R=async(l,t)=>{await v();const a=p.findIndex(n=>n.id===parseInt(l));if(a===-1)throw new Error("Vehicle not found");return p[a]={...p[a],...t},p[a]},G=async l=>{await v();const t=p.findIndex(a=>a.id===parseInt(l));if(t===-1)throw new Error("Vehicle not found");return p.splice(t,1),{success:!0}},H=M("vehicles",()=>{const l=x([]),t=x(null),a=x(!1),n=x(null),y=x({status:null,brand:null,search:""}),w=S(()=>l.value.length),g=S(()=>l.value.filter(r=>r.status==="Available")),V=S(()=>l.value.reduce((r,i)=>r+i.price,0));async function b(){a.value=!0,n.value=null;try{const r=await K(y.value);l.value=r.data}catch(r){n.value=r.message}finally{a.value=!1}}async function m(r){a.value=!0,n.value=null;try{t.value=await $(r)}catch(i){n.value=i.message}finally{a.value=!1}}async function s(r){a.value=!0,n.value=null;try{const i=await Q(r);return l.value.unshift(i),i}catch(i){throw n.value=i.message,i}finally{a.value=!1}}async function o(r,i){a.value=!0,n.value=null;try{const h=await R(r,i),B=l.value.findIndex(L=>L.id===r);return B!==-1&&(l.value[B]=h),h}catch(h){throw n.value=h.message,h}finally{a.value=!1}}async function _(r){a.value=!0,n.value=null;try{await G(r),l.value=l.value.filter(i=>i.id!==r)}catch(i){throw n.value=i.message,i}finally{a.value=!1}}function k(r){y.value={...y.value,...r},b()}return{vehicles:l,currentVehicle:t,loading:a,error:n,filters:y,totalVehicles:w,availableVehicles:g,totalInventoryValue:V,loadVehicles:b,loadVehicleById:m,addVehicle:s,modifyVehicle:o,removeVehicle:_,setFilters:k}}),J={class:"page-container"},O={class:"p-4 md:p-8"},W={class:"mb-6 bg-gray-50 border border-gray-200 rounded-lg px-4 py-3"},X={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3"},Y={class:"flex flex-wrap items-center gap-2 md:gap-3"},Z={class:"w-full sm:w-auto sm:min-w-[260px] sm:max-w-md"},ee={class:"relative"},te={key:0,class:"empty-state"},se={key:1,class:"empty-state"},ae={key:2,class:"card overflow-hidden"},le={class:"overflow-x-auto -mx-4 md:mx-0"},ne={class:"w-full"},oe={class:"divide-y divide-gray-100"},re={class:"px-3 md:px-6 py-3 whitespace-nowrap"},ie={class:"flex items-center gap-2 md:gap-3"},de={class:"min-w-0"},ce={class:"text-content-bold truncate max-w-[120px] md:max-w-none"},ue={class:"text-meta"},pe={class:"px-3 md:px-6 py-3 whitespace-nowrap"},xe={class:"px-3 md:px-6 py-3 whitespace-nowrap"},ye={class:"text-content-bold"},me={class:"px-3 md:px-6 py-3 text-content text-gray-600 whitespace-nowrap hidden md:table-cell"},fe={class:"px-3 md:px-6 py-3 whitespace-nowrap"},he={class:"px-3 md:px-6 py-3 whitespace-nowrap hidden xl:table-cell"},ve={key:0,class:"flex flex-wrap gap-1"},we={key:0,class:"badge-ui bg-gray-100 text-gray-600 font-semibold"},be={key:1,class:"text-meta"},ge={class:"px-4 md:px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3"},Ve={class:"text-sm text-gray-600"},Se={__name:"Vehicles",setup(l){const t=H(),a=x(""),n=x({status:"",brand:""});j(()=>{t.loadVehicles()});const y=()=>{t.setFilters({search:a.value})},w=()=>{t.setFilters(n.value)},g=()=>{n.value={status:"",brand:""},a.value="",t.setFilters({})},V=m=>new Intl.NumberFormat("en-US").format(m),b=m=>new Intl.NumberFormat("en-US").format(m);return(m,s)=>(u(),d("div",J,[E(T,{title:"Vehicles Inventory",subtitle:`${f(t).totalVehicles} vehicles in inventory`},null,8,["subtitle"]),e("div",O,[e("div",W,[e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[s[5]||(s[5]=e("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),I(e("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>a.value=o),onInput:y,type:"text",placeholder:"Search vehicles...",class:"input-with-icon"},null,544),[[P,a.value]])])]),I(e("select",{"onUpdate:modelValue":s[1]||(s[1]=o=>n.value.status=o),onChange:w,class:"input text-sm w-auto shrink-0"},[...s[6]||(s[6]=[e("option",{value:""},"All Status",-1),e("option",{value:"Available"},"Available",-1),e("option",{value:"In Stock"},"In Stock",-1),e("option",{value:"Sold"},"Sold",-1)])],544),[[C,n.value.status]]),I(e("select",{"onUpdate:modelValue":s[2]||(s[2]=o=>n.value.brand=o),onChange:w,class:"input text-sm w-auto shrink-0"},[...s[7]||(s[7]=[A('<option value="">All Brands</option><option value="Volkswagen">Volkswagen</option><option value="Mercedes-Benz">Mercedes-Benz</option><option value="Audi">Audi</option><option value="Porsche">Porsche</option>',5)])],544),[[C,n.value.brand]]),e("button",{onClick:g,class:"btn-secondary text-sm"}," Clear ")]),s[8]||(s[8]=e("div",{class:"flex justify-end"},[e("button",{class:"btn-primary-lg"},[e("i",{class:"fa-solid fa-plus"}),U(" Add new ")])],-1))])]),f(t).loading?(u(),d("div",te,[...s[9]||(s[9]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl text-gray-400 mb-4"},null,-1),e("p",{class:"empty-state-text"},"Loading vehicles...",-1)])])):f(t).vehicles.length===0?(u(),d("div",se,[...s[10]||(s[10]=[e("i",{class:"fa-solid fa-car empty-state-icon"},null,-1),e("p",{class:"empty-state-text"},"No vehicles found",-1)])])):(u(),d("div",ae,[e("div",le,[e("table",ne,[s[14]||(s[14]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-3 md:px-6 py-3 text-left"},[e("input",{type:"checkbox",class:"rounded"})]),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Vehicle"),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Status"),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Price"),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap hidden md:table-cell"},"Kilometers"),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Stock Days"),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap hidden xl:table-cell"},"Requested By"),e("th",{class:"px-3 md:px-6 py-3"})])],-1)),e("tbody",oe,[(u(!0),d(F,null,N(f(t).vehicles,o=>(u(),d("tr",{key:o.id,class:"hover:bg-gray-50 cursor-pointer transition-colors"},[e("td",{class:"px-3 md:px-6 py-3 whitespace-nowrap",onClick:s[3]||(s[3]=q(()=>{},["stop"]))},[...s[11]||(s[11]=[e("input",{type:"checkbox",class:"rounded"},null,-1)])]),e("td",re,[e("div",ie,[s[12]||(s[12]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-gray-100 to-gray-200 rounded-md flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-car text-2xl text-gray-400"})],-1)),e("div",de,[e("div",ce,c(o.brand)+" "+c(o.model),1),e("div",ue,c(o.year),1)])])]),e("td",pe,[e("span",{class:D(["badge-ui font-semibold",o.status==="Available"?"bg-green-100 text-green-700":o.status==="In Stock"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"])},c(o.status),3)]),e("td",xe,[e("span",ye,"â‚¬"+c(V(o.price)),1)]),e("td",me,c(b(o.kilometers))+" km ",1),e("td",fe,[e("span",{class:D(["text-content font-medium",o.stockDays>300?"text-red-600":"text-gray-600"])},c(o.stockDays)+" days ",3)]),e("td",he,[o.requestedBy&&o.requestedBy.length>0?(u(),d("div",ve,[(u(!0),d(F,null,N(o.requestedBy.slice(0,2),(_,k)=>(u(),d("span",{key:k,class:"badge-ui bg-blue-50 text-blue-700 font-semibold"},c(_),1))),128)),o.requestedBy.length>2?(u(),d("span",we," +"+c(o.requestedBy.length-2),1)):z("",!0)])):(u(),d("span",be,"-"))]),e("td",{class:"px-3 md:px-6 py-3 whitespace-nowrap",onClick:s[4]||(s[4]=q(()=>{},["stop"]))},[...s[13]||(s[13]=[e("button",{class:"text-gray-400 hover:text-gray-600"},[e("i",{class:"fa-solid fa-ellipsis-vertical"})],-1)])])]))),128))])])]),e("div",ge,[e("div",Ve," Showing "+c(f(t).vehicles.length)+" of "+c(f(t).totalVehicles)+" vehicles ",1),s[15]||(s[15]=A('<div class="flex items-center gap-2 flex-wrap"><button class="btn-secondary text-sm whitespace-nowrap">Previous</button><button class="px-3 py-2 text-sm bg-blue-600 text-white rounded-lg font-medium">1</button><button class="btn-secondary text-sm">2</button><button class="btn-secondary text-sm whitespace-nowrap">Next</button></div>',1))])]))])]))}};export{Se as default};
