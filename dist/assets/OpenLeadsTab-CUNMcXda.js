<<<<<<<< HEAD:dist/assets/OpenLeadsTab-mlHs8_CD.js
import{y as T}from"./components-D2RBuYr8.js";import{M as B,C as I,r as a,c as _,m as $,x as Q,o as R,B as V,e as n,y as i}from"./index-Dj_RD8l0.js";import{g as z,c as G,f as K}from"./opportunityRules-vWdCqPB2.js";import{u as W}from"./useCustomersTable-_pAYD1g7.js";import"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-B5cRDmy2.js";import"./opportunities-BC_ZMPUZ.js";import"./sparkles-hzGdDkcm.js";import"./vehicles-BgEBo0jD.js";const j={__name:"OpenLeadsTab",emits:["row-click"],setup(E,{emit:q}){const o=I(),A=a(!1),r=a({pageIndex:0,pageSize:10}),u=a(""),l=a([]),c=a([]),d=e=>e?new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",w=e=>({Valid:"bg-green-100 text-green-700","Not valid":"bg-red-100 text-red-700",Qualified:"bg-surfaceSecondary text-body","Not interested":"bg-red-100 text-red-700",Open:"bg-blue-100 text-blue-700"})[e]||"bg-surfaceSecondary text-body",p=_(()=>{let e=o.leads;return A.value?e=o.leads.filter(t=>t.isDisqualified===!0):e=o.leads.filter(t=>!t.isDisqualified),e.map(t=>{var s,g,f,b,y,x,D,C,v,k,F,S;return{id:`lead-${t.id}`,stageKey:"open-leads",customer:((s=t.customer)==null?void 0:s.name)||"Unknown",email:((g=t.customer)==null?void 0:g.email)||"",initials:((f=t.customer)==null?void 0:f.initials)||((y=(b=t.customer)==null?void 0:b.name)==null?void 0:y.slice(0,2).toUpperCase())||"?",nextAction:K(t.nextActionDue)||"No due date",nextActionFull:G(t.nextActionDue),deadlineStatus:z(t.nextActionDue),car:`${((x=t.requestedCar)==null?void 0:x.brand)||""} ${((D=t.requestedCar)==null?void 0:D.model)||""}`.trim()||"N/A",carStatus:((C=t.requestedCar)==null?void 0:C.stockDays)!==void 0&&((v=t.requestedCar)==null?void 0:v.stockDays)!==null?"In Stock":"Out of Stock",carStatusClass:((k=t.requestedCar)==null?void 0:k.stockDays)!==void 0&&((F=t.requestedCar)==null?void 0:F.stockDays)!==null?"bg-green-100 text-green-700":"bg-surfaceSecondary text-body",requestType:((S=t.requestedCar)==null?void 0:S.requestType)||"Quotation",source:t.source||"Marketing",assignee:t.assignee,assigneeInitials:t.assignee?t.assignee.slice(0,2).toUpperCase():"NA",createdAt:d(t.createdAt),lastActivity:d(t.lastActivity),status:t.status,statusClass:w(t.status),priority:t.priority||"Normal"}})}),O=q,m=e=>{e.id.startsWith("lead-")&&O("row-click",e)},N=a("open-leads"),{columns:U,filterDefinitions:L,tableMeta:M}=W(N,m);return $(async()=>{await o.fetchLeads()}),(e,t)=>(R(),Q(i(T),{data:p.value,columns:i(U),meta:i(M),onRowClick:m,columnFiltersOptions:{filterDefs:i(L)},pagination:r.value,"onUpdate:pagination":t[0]||(t[0]=s=>r.value=s),globalFilter:u.value,"onUpdate:globalFilter":t[1]||(t[1]=s=>u.value=s),sorting:l.value,"onUpdate:sorting":t[2]||(t[2]=s=>l.value=s),columnFilters:c.value,"onUpdate:columnFilters":t[3]||(t[3]=s=>c.value=s),paginationOptions:{rowCount:p.value.length},globalFilterOptions:{debounce:300},class:"h-full"},{"empty-state":V(()=>[...t[4]||(t[4]=[n("div",{class:"empty-state"},[n("i",{class:"fa-solid fa-inbox empty-state-icon"}),n("p",{class:"empty-state-text"},"No records found")],-1)])]),_:1},8,["data","columns","meta","columnFiltersOptions","pagination","globalFilter","sorting","columnFilters","paginationOptions"]))}},et=B(j,[["__scopeId","data-v-1f88cb37"]]);export{et as default};
========
import{R as B}from"./components-4J0anYM3.js";import{K as M,C as I,r as a,c as R,m as _,x as $,o as K,B as Q,e as n,y as i}from"./index-DqWyOYoU.js";import{g as V,c as z,f as G}from"./opportunityRules-BaC5nmNU.js";import{u as W}from"./useCustomersTable-CQmH99J8.js";import"./toggle-group-item.vue_vue_type_script_setup_true_lang-SVS8Zwad-DVNwBQcn.js";import"./opportunities-Cr-mXogK.js";import"./sparkles-C-JQGf45.js";import"./vehicles-BiOUVEQF.js";const j={__name:"OpenLeadsTab",emits:["row-click"],setup(E,{emit:q}){const o=I(),A=a(!1),r=a({pageIndex:0,pageSize:10}),u=a(""),l=a([]),c=a([]),d=e=>e?new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",w=e=>({Valid:"bg-green-100 text-green-700","Not valid":"bg-red-100 text-red-700",Qualified:"bg-surfaceSecondary text-body","Not interested":"bg-red-100 text-red-700",Open:"bg-blue-100 text-blue-700"})[e]||"bg-surfaceSecondary text-body",p=R(()=>{let e=o.leads;return A.value?e=o.leads.filter(t=>t.isDisqualified===!0):e=o.leads.filter(t=>!t.isDisqualified),e.map(t=>{var s,g,f,b,y,x,D,C,v,k,F,S;return{id:`lead-${t.id}`,stageKey:"open-leads",customer:((s=t.customer)==null?void 0:s.name)||"Unknown",email:((g=t.customer)==null?void 0:g.email)||"",initials:((f=t.customer)==null?void 0:f.initials)||((y=(b=t.customer)==null?void 0:b.name)==null?void 0:y.slice(0,2).toUpperCase())||"?",nextAction:G(t.nextActionDue)||"No due date",nextActionFull:z(t.nextActionDue),deadlineStatus:V(t.nextActionDue),car:`${((x=t.requestedCar)==null?void 0:x.brand)||""} ${((D=t.requestedCar)==null?void 0:D.model)||""}`.trim()||"N/A",carStatus:((C=t.requestedCar)==null?void 0:C.stockDays)!==void 0&&((v=t.requestedCar)==null?void 0:v.stockDays)!==null?"In Stock":"Out of Stock",carStatusClass:((k=t.requestedCar)==null?void 0:k.stockDays)!==void 0&&((F=t.requestedCar)==null?void 0:F.stockDays)!==null?"bg-green-100 text-green-700":"bg-surfaceSecondary text-body",requestType:((S=t.requestedCar)==null?void 0:S.requestType)||"Quotation",source:t.source||"Marketing",assignee:t.assignee,assigneeInitials:t.assignee?t.assignee.slice(0,2).toUpperCase():"NA",createdAt:d(t.createdAt),lastActivity:d(t.lastActivity),status:t.status,statusClass:w(t.status),priority:t.priority||"Normal"}})}),O=q,m=e=>{e.id.startsWith("lead-")&&O("row-click",e)},N=a("open-leads"),{columns:U,filterDefinitions:L,tableMeta:T}=W(N,m);return _(async()=>{await o.fetchLeads()}),(e,t)=>(K(),$(i(B),{data:p.value,columns:i(U),meta:i(T),onRowClick:m,columnFiltersOptions:{filterDefs:i(L)},pagination:r.value,"onUpdate:pagination":t[0]||(t[0]=s=>r.value=s),globalFilter:u.value,"onUpdate:globalFilter":t[1]||(t[1]=s=>u.value=s),sorting:l.value,"onUpdate:sorting":t[2]||(t[2]=s=>l.value=s),columnFilters:c.value,"onUpdate:columnFilters":t[3]||(t[3]=s=>c.value=s),paginationOptions:{rowCount:p.value.length},globalFilterOptions:{debounce:300},class:"h-full"},{"empty-state":Q(()=>[...t[4]||(t[4]=[n("div",{class:"empty-state"},[n("i",{class:"fa-solid fa-inbox empty-state-icon"}),n("p",{class:"empty-state-text"},"No records found")],-1)])]),_:1},8,["data","columns","meta","columnFiltersOptions","pagination","globalFilter","sorting","columnFilters","paginationOptions"]))}},et=M(j,[["__scopeId","data-v-1f88cb37"]]);export{et as default};
>>>>>>>> maciej-branch:dist/assets/OpenLeadsTab-CUNMcXda.js
