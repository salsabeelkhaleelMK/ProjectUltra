import{H as p,d as M,r as m,c as k,o as P,a as d,b as U,e,w as B,u as h,F as C,f as A,g as E,t as c,h as u,i as S,v as j,y as N,j as z,k as F,q,l as T}from"./index-BZLq_7J-.js";import{_ as $}from"./PageHeader-DSIx_Z5D.js";const v=(l=300)=>new Promise(t=>setTimeout(t,l)),H=async(l={})=>{await v();let t=[...p];if(l.status&&(t=t.filter(a=>a.status===l.status)),l.brand&&(t=t.filter(a=>a.brand===l.brand)),l.search){const a=l.search.toLowerCase();t=t.filter(o=>o.brand.toLowerCase().includes(a)||o.model.toLowerCase().includes(a)||o.vin.toLowerCase().includes(a))}return{data:t,total:t.length}},K=async l=>{await v();const t=p.find(a=>a.id===parseInt(l));if(!t)throw new Error("Vehicle not found");return t},Q=async l=>{await v();const t={id:p.length+1,...l,stockDays:0};return p.push(t),t},R=async(l,t)=>{await v();const a=p.findIndex(o=>o.id===parseInt(l));if(a===-1)throw new Error("Vehicle not found");return p[a]={...p[a],...t},p[a]},G=async l=>{await v();const t=p.findIndex(a=>a.id===parseInt(l));if(t===-1)throw new Error("Vehicle not found");return p.splice(t,1),{success:!0}},J=M("vehicles",()=>{const l=m([]),t=m(null),a=m(!1),o=m(null),y=m({status:null,brand:null,search:""}),w=k(()=>l.value.length),b=k(()=>l.value.filter(r=>r.status==="Available")),g=k(()=>l.value.reduce((r,i)=>r+i.price,0));async function x(){a.value=!0,o.value=null;try{const r=await H(y.value);l.value=r.data}catch(r){o.value=r.message}finally{a.value=!1}}async function s(r){a.value=!0,o.value=null;try{t.value=await K(r)}catch(i){o.value=i.message}finally{a.value=!1}}async function n(r){a.value=!0,o.value=null;try{const i=await Q(r);return l.value.unshift(i),i}catch(i){throw o.value=i.message,i}finally{a.value=!1}}async function V(r,i){a.value=!0,o.value=null;try{const f=await R(r,i),I=l.value.findIndex(L=>L.id===r);return I!==-1&&(l.value[I]=f),f}catch(f){throw o.value=f.message,f}finally{a.value=!1}}async function _(r){a.value=!0,o.value=null;try{await G(r),l.value=l.value.filter(i=>i.id!==r)}catch(i){throw o.value=i.message,i}finally{a.value=!1}}function D(r){y.value={...y.value,...r},x()}return{vehicles:l,currentVehicle:t,loading:a,error:o,filters:y,totalVehicles:w,availableVehicles:b,totalInventoryValue:g,loadVehicles:x,loadVehicleById:s,addVehicle:n,modifyVehicle:V,removeVehicle:_,setFilters:D}}),O={class:"page-container"},W={class:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3"},X={class:"flex-1 min-w-0 sm:max-w-md"},Y={class:"relative"},Z={class:"p-4 md:p-8"},ee={key:0,class:"empty-state"},te={key:1,class:"empty-state"},se={key:2,class:"card overflow-hidden"},ae={class:"overflow-x-auto -mx-4 md:mx-0"},le={class:"w-full"},ne={class:"divide-y divide-gray-100"},oe={class:"px-3 md:px-6 py-3 whitespace-nowrap"},re={class:"flex items-center gap-2 md:gap-3"},ie={class:"min-w-0"},de={class:"text-content-bold truncate max-w-[120px] md:max-w-none"},ce={class:"text-meta"},ue={class:"px-3 md:px-6 py-3 whitespace-nowrap"},pe={class:"px-3 md:px-6 py-3 whitespace-nowrap"},xe={class:"text-content-bold"},me={class:"px-3 md:px-6 py-3 text-content text-gray-600 whitespace-nowrap hidden md:table-cell"},ye={class:"px-3 md:px-6 py-3 whitespace-nowrap"},he={class:"px-3 md:px-6 py-3 whitespace-nowrap hidden xl:table-cell"},fe={key:0,class:"flex flex-wrap gap-1"},ve={key:0,class:"badge-ui bg-gray-100 text-gray-600 font-semibold"},we={key:1,class:"text-meta"},be={class:"px-4 md:px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3"},ge={class:"text-sm text-gray-600"},ke={__name:"Vehicles",setup(l){const t=J(),a=m(""),o=m({status:"",brand:""});P(()=>{t.loadVehicles()});const y=()=>{t.setFilters({search:a.value})},w=()=>{t.setFilters(o.value)},b=x=>new Intl.NumberFormat("en-US").format(x),g=x=>new Intl.NumberFormat("en-US").format(x);return(x,s)=>(u(),d("div",O,[U($,{title:"Vehicles Inventory",subtitle:`${h(t).totalVehicles} vehicles in inventory`},{actions:B(()=>[...s[5]||(s[5]=[e("button",{class:"btn-primary"},[e("i",{class:"fa-solid fa-plus"}),z(),e("span",{class:"hidden sm:inline"},"Add Vehicle"),e("span",{class:"sm:hidden"},"Add")],-1)])]),bottom:B(()=>[e("div",W,[e("div",X,[e("div",Y,[s[6]||(s[6]=e("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),S(e("input",{"onUpdate:modelValue":s[0]||(s[0]=n=>a.value=n),onInput:y,type:"text",placeholder:"Search vehicles...",class:"input-with-icon"},null,544),[[j,a.value]])])]),S(e("select",{"onUpdate:modelValue":s[1]||(s[1]=n=>o.value.status=n),onChange:w,class:"input text-sm w-auto"},[...s[7]||(s[7]=[e("option",{value:""},"All Status",-1),e("option",{value:"Available"},"Available",-1),e("option",{value:"In Stock"},"In Stock",-1),e("option",{value:"Sold"},"Sold",-1)])],544),[[N,o.value.status]]),S(e("select",{"onUpdate:modelValue":s[2]||(s[2]=n=>o.value.brand=n),onChange:w,class:"input text-sm w-auto"},[...s[8]||(s[8]=[e("option",{value:""},"All Brands",-1),e("option",{value:"Volkswagen"},"Volkswagen",-1),e("option",{value:"Mercedes-Benz"},"Mercedes-Benz",-1),e("option",{value:"Audi"},"Audi",-1),e("option",{value:"Porsche"},"Porsche",-1)])],544),[[N,o.value.brand]])])]),_:1},8,["subtitle"]),e("div",Z,[h(t).loading?(u(),d("div",ee,[...s[9]||(s[9]=[e("i",{class:"fa-solid fa-spinner fa-spin text-4xl text-gray-400 mb-4"},null,-1),e("p",{class:"empty-state-text"},"Loading vehicles...",-1)])])):h(t).vehicles.length===0?(u(),d("div",te,[...s[10]||(s[10]=[e("i",{class:"fa-solid fa-car empty-state-icon"},null,-1),e("p",{class:"empty-state-text"},"No vehicles found",-1)])])):(u(),d("div",se,[e("div",ae,[e("table",le,[s[14]||(s[14]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-3 md:px-6 py-3 text-left"},[e("input",{type:"checkbox",class:"rounded"})]),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Vehicle"),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Status"),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Price"),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap hidden md:table-cell"},"Kilometers"),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Stock Days"),e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap hidden xl:table-cell"},"Requested By"),e("th",{class:"px-3 md:px-6 py-3"})])],-1)),e("tbody",ne,[(u(!0),d(C,null,A(h(t).vehicles,n=>(u(),d("tr",{key:n.id,class:"hover:bg-gray-50 cursor-pointer transition-colors"},[e("td",{class:"px-3 md:px-6 py-3 whitespace-nowrap",onClick:s[3]||(s[3]=F(()=>{},["stop"]))},[...s[11]||(s[11]=[e("input",{type:"checkbox",class:"rounded"},null,-1)])]),e("td",oe,[e("div",re,[s[12]||(s[12]=e("div",{class:"w-12 h-12 bg-gradient-to-br from-gray-100 to-gray-200 rounded-md flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-car text-2xl text-gray-400"})],-1)),e("div",ie,[e("div",de,c(n.brand)+" "+c(n.model),1),e("div",ce,c(n.year),1)])])]),e("td",ue,[e("span",{class:q(["badge-ui font-semibold",n.status==="Available"?"bg-green-100 text-green-700":n.status==="In Stock"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"])},c(n.status),3)]),e("td",pe,[e("span",xe,"â‚¬"+c(b(n.price)),1)]),e("td",me,c(g(n.kilometers))+" km ",1),e("td",ye,[e("span",{class:q(["text-content font-medium",n.stockDays>300?"text-red-600":"text-gray-600"])},c(n.stockDays)+" days ",3)]),e("td",he,[n.requestedBy&&n.requestedBy.length>0?(u(),d("div",fe,[(u(!0),d(C,null,A(n.requestedBy.slice(0,2),(V,_)=>(u(),d("span",{key:_,class:"badge-ui bg-blue-50 text-blue-700 font-semibold"},c(V),1))),128)),n.requestedBy.length>2?(u(),d("span",ve," +"+c(n.requestedBy.length-2),1)):T("",!0)])):(u(),d("span",we,"-"))]),e("td",{class:"px-3 md:px-6 py-3 whitespace-nowrap",onClick:s[4]||(s[4]=F(()=>{},["stop"]))},[...s[13]||(s[13]=[e("button",{class:"text-gray-400 hover:text-gray-600"},[e("i",{class:"fa-solid fa-ellipsis-vertical"})],-1)])])]))),128))])])]),e("div",be,[e("div",ge," Showing "+c(h(t).vehicles.length)+" of "+c(h(t).totalVehicles)+" vehicles ",1),s[15]||(s[15]=E('<div class="flex items-center gap-2 flex-wrap"><button class="btn-secondary whitespace-nowrap">Previous</button><button class="px-3 py-2 text-sm bg-blue-600 text-white rounded-lg font-medium">1</button><button class="btn-secondary">2</button><button class="btn-secondary whitespace-nowrap">Next</button></div>',1))])]))])]))}};export{ke as default};
