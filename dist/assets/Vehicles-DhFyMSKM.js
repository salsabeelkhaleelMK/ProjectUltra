import{d as V,o as F,F as Y,i as H,n as R,e as l,s as u,t as z,y as s,z as $,c as w,D as v,L as j,r as h,m as L,N as i,h as W,k as U,w as G,p as m,K as g,v as D,Q as K}from"./index-BZwEnuDT.js";import{u as I}from"./vehicles-RXA5rnNk.js";import{_ as Q}from"./PageHeader-FAqpQjH4.js";import{W as J,a as X,F as Z,L as _,H as ee,j as le,K as te,C as ae}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-D2e1bD8Q.js";import{y as se}from"./components-BBuk30SU.js";const ne={class:"flex items-center gap-3 mb-4 overflow-x-auto pb-2 scrollbar-hide"},re=["onClick"],ie={class:"text-sm font-medium text-foreground whitespace-nowrap"},oe={__name:"VehicleFilters",props:{vehicleTabs:{type:Array,required:!0},vehicleFilter:{type:String,required:!0}},emits:["filter-change"],setup(d){return(c,n)=>(F(),V("div",ne,[(F(!0),V(Y,null,H(d.vehicleTabs,o=>(F(),V("button",{key:o.key,onClick:k=>c.$emit("filter-change",o.key),class:R(["flex items-center justify-between gap-3 px-4 py-3 bg-white border border-border rounded-lg cursor-pointer hover:shadow-sm transition-all shrink-0 min-w-40 border-t-4",d.vehicleFilter===o.key?o.borderColor:"border-t-border"])},[l("span",ie,z(o.label),1),u(s($),{text:String(o.count),size:"small",theme:d.vehicleFilter===o.key?"blue":"gray"},null,8,["text","theme"])],10,re))),128))]))}},ue={class:"table-wrapper w-full"},de={__name:"VehicleGrid",props:{filteredVehicles:{type:Array,required:!0},columns:{type:Array,required:!0},loading:{type:Boolean,default:!1},tableMeta:{type:Object,required:!0},filterDefinitions:{type:Array,required:!0},pagination:{type:Object,required:!0},globalFilter:{type:String,required:!0},sorting:{type:Array,required:!0},columnFilters:{type:Array,required:!0}},emits:["row-click","update:pagination","update:globalFilter","update:sorting","update:columnFilters"],setup(d,{emit:c}){const n=d,o=c,k=w({get:()=>n.pagination,set:b=>o("update:pagination",b)}),f=w({get:()=>n.globalFilter,set:b=>o("update:globalFilter",b)}),x=w({get:()=>n.sorting,set:b=>o("update:sorting",b)}),T=w({get:()=>n.columnFilters,set:b=>o("update:columnFilters",b)});return(b,p)=>(F(),V("div",ue,[u(s(se),{data:d.filteredVehicles,columns:d.columns,loading:d.loading,meta:d.tableMeta,onRowClick:p[0]||(p[0]=y=>b.$emit("row-click",y)),columnFiltersOptions:{filterDefs:d.filterDefinitions},pagination:k.value,"onUpdate:pagination":p[1]||(p[1]=y=>k.value=y),globalFilter:f.value,"onUpdate:globalFilter":p[2]||(p[2]=y=>f.value=y),sorting:x.value,"onUpdate:sorting":p[3]||(p[3]=y=>x.value=y),columnFilters:T.value,"onUpdate:columnFilters":p[4]||(p[4]=y=>T.value=y),paginationOptions:{rowCount:d.filteredVehicles.length},globalFilterOptions:{debounce:300,placeholder:"Q Search or ask a question"}},{toolbar:v(()=>[j(b.$slots,"toolbar")]),"empty-state":v(()=>[...p[5]||(p[5]=[l("div",{class:"empty-state"},[l("i",{class:"fa-solid fa-car empty-state-icon"}),l("p",{class:"empty-state-text"},"No vehicles found")],-1)])]),_:3},8,["data","columns","loading","meta","columnFiltersOptions","pagination","globalFilter","sorting","columnFilters","paginationOptions"])]))}};function pe(){const d=I(),c=h(!1),n=h({brand:"",model:"",year:"",vin:"",plates:"",fuelType:"",gearType:"",kilometers:"",registration:"",owner:"",ownershipType:"",ownedSince:"",warrantyInfo:"",stockDays:null}),o=()=>{c.value=!1,n.value={brand:"",model:"",year:"",vin:"",plates:"",fuelType:"",gearType:"",kilometers:"",registration:"",owner:"",ownershipType:"",ownedSince:"",warrantyInfo:"",stockDays:null}};return{showAddModal:c,newVehicle:n,handleCloseModal:o,handleSubmit:async()=>{try{const f={brand:n.value.brand,model:n.value.model,year:parseInt(n.value.year)||null,vin:n.value.vin||null,plates:n.value.plates||null,fuelType:n.value.fuelType||null,gearType:n.value.gearType||null,kilometers:parseInt(n.value.kilometers)||0,registration:n.value.registration||null,owner:n.value.owner||null,ownershipType:n.value.ownershipType||null,ownedSince:n.value.ownedSince||null,warrantyInfo:n.value.warrantyInfo||null,stockDays:null,status:"Available"};await d.addVehicle(f),o()}catch(f){console.error("Error adding vehicle:",f)}}}}const ce={class:"page-container"},me={class:"p-4 md:p-8"},be={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},ye=["max"],ge={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ve={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},fe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},we={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Te={__name:"Vehicles",setup(d){W();const c=I(),n=h("in-stock"),o=h({pageIndex:0,pageSize:10}),k=h(""),f=h([]),x=h([]),T=t=>{t||M()},b=w(()=>n.value==="in-stock"?c.vehicles.filter(t=>t.stockDays!==null&&t.stockDays!==void 0):c.vehicles.filter(t=>t.stockDays===null||t.stockDays===void 0)),p=w(()=>[{key:"in-stock",label:"In stock",count:c.vehicles.filter(t=>t.stockDays!==null&&t.stockDays!==void 0).length,borderColor:"border-t-blue-600"},{key:"customer-vehicles",label:"Customers' vehicles",count:c.vehicles.filter(t=>t.stockDays===null||t.stockDays===void 0).length,borderColor:"border-t-purple-600"}]),y=t=>{n.value=t},{showAddModal:C,newVehicle:r,handleCloseModal:M,handleSubmit:A}=pe(),q=[{key:"status",label:"Status",type:"select",operators:[{value:"eq",label:"is"},{value:"ne",label:"is not"}],options:[{value:"Available",label:"Available"},{value:"In Stock",label:"In Stock"},{value:"Sold",label:"Sold"}],aiHint:"Vehicle availability status"},{key:"brand",label:"Brand",type:"multiselect",operators:[{value:"in",label:"is any of"},{value:"notIn",label:"is none of"}],options:[{value:"Volkswagen",label:"Volkswagen"},{value:"Mercedes-Benz",label:"Mercedes-Benz"},{value:"Audi",label:"Audi"},{value:"Porsche",label:"Porsche"}],aiHint:"Car manufacturer brand"},{key:"price",label:"Price",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],prefix:"â‚¬",aiHint:"Vehicle price in euros"},{key:"stockDays",label:"Stock Days",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],aiHint:"Number of days in stock"}];L(()=>{c.fetchVehicles()});const O=t=>{t.original},N=t=>new Intl.NumberFormat("en-US").format(t),P=w(()=>({class:{tr:()=>"cursor-pointer hover:bg-surfaceSecondary transition-colors"}})),B=t=>t.kilometers===0?t.year===new Date().getFullYear()?"New":"New 0km":"Used",S=t=>t?(typeof t=="string"&&t.includes("/"),t):"N/A",E=w(()=>n.value==="in-stock"?[{accessorKey:"image",header:"Photo",meta:{title:"Photo"},cell:({row:t})=>{const e=t.original;return e.image?i("img",{src:e.image,alt:`${e.brand} ${e.model}`,class:"w-16 h-16 object-cover rounded-md"}):i("div",{class:"w-16 h-16 bg-surface border border-E5E7EB rounded-md flex items-center justify-center shrink-0"},[i("i",{class:"fa-solid fa-car text-2xl text-sub"})])}},{accessorKey:"brand",header:"Vehicle",meta:{title:"Vehicle"},cell:({row:t})=>{const e=t.original;return i("div",[i("div",{class:"text-content-bold"},`${e.brand} ${e.model}`),i("div",{class:"text-meta"},e.year)])}},{accessorKey:"type",header:"Type",meta:{title:"Type"},cell:({row:t})=>{const e=t.original,a=B(e);return i("span",{class:"text-meta"},a)}},{accessorKey:"engine",header:"Engine",meta:{title:"Engine"},cell:({row:t})=>i("span",{class:"text-meta"},"N/A")},{accessorKey:"fuelType",header:"Fuel type",meta:{title:"Fuel type"},cell:({row:t})=>i("span",{class:"text-meta"},t.original.fuelType||"N/A")},{accessorKey:"gearType",header:"Gear type",meta:{title:"Gear type"},cell:({row:t})=>i("span",{class:"text-meta"},t.original.gearType||"N/A")},{accessorKey:"registration",header:"Registered at",meta:{title:"Registered at"},cell:({row:t})=>{const e=t.original;return i("span",{class:"text-meta"},S(e.registration)||"N/A")}},{accessorKey:"kilometers",header:"Mileage",meta:{title:"Mileage"},cell:({row:t})=>i("span",{class:"text-meta"},`${N(t.original.kilometers)} km`)},{accessorKey:"stockDays",header:"Days in stock",meta:{title:"Days in stock"},cell:({row:t})=>{const e=t.original.stockDays,a=e>300?"text-red-600":"text-gray-600";return i("span",{class:`text-sm font-medium ${a}`},`${e} days`)}},{accessorKey:"dealership",header:"Dealership",meta:{title:"Dealership"},cell:({row:t})=>i("span",{class:"text-meta"},t.original.dealership||"N/A")},{accessorKey:"status",header:"Availability",meta:{title:"Availability"},cell:({row:t})=>{const e=t.original.status;return i($,{text:e,size:"small",theme:e==="Available"?"green":e==="In Stock"?"blue":"gray"})}}]:[{accessorKey:"brand",header:"Vehicle",meta:{title:"Vehicle"},cell:({row:t})=>{const e=t.original;return i("div",[i("div",{class:"text-content-bold"},`${e.brand} ${e.model}`),i("div",{class:"text-meta"},e.year)])}},{accessorKey:"plates",header:"Plates",meta:{title:"Plates"},cell:({row:t})=>{const e=t.original,a=e.plates||(e.vin?e.vin.slice(-6):null)||"N/A";return i("span",{class:"text-meta"},a)}},{accessorKey:"kilometers",header:"Mileage",meta:{title:"Mileage"},cell:({row:t})=>i("span",{class:"text-meta"},`${N(t.original.kilometers)} km`)},{accessorKey:"registration",header:"Registered at",meta:{title:"Registered at"},cell:({row:t})=>{const e=t.original;return i("span",{class:"text-meta"},S(e.registration)||"N/A")}},{accessorKey:"owner",header:"Owner",meta:{title:"Owner"},cell:({row:t})=>{const e=t.original,a=e.owner||(e.requestedBy&&e.requestedBy.length>0?e.requestedBy[0]:null)||"N/A";return i("span",{class:"text-meta"},a)}},{accessorKey:"ownershipType",header:"Ownership type",meta:{title:"Ownership type"},cell:({row:t})=>i("span",{class:"text-meta"},"N/A")},{accessorKey:"ownedSince",header:"Owned since",meta:{title:"Owned since"},cell:({row:t})=>{const e=t.original;return i("span",{class:"text-meta"},S(e.registration)||"N/A")}},{accessorKey:"warrantyInfo",header:"Warranty info",meta:{title:"Warranty info"},cell:({row:t})=>i("span",{class:"text-meta"},"N/A")}]);return(t,e)=>(F(),V("div",ce,[u(Q,{title:"Vehicles Inventory"},{actions:v(()=>[l("button",{onClick:e[0]||(e[0]=a=>C.value=!0),class:"group flex items-center gap-2 rounded-2xl border border-E5E7EB px-3 py-1.5 text-fluid-sm font-medium text-body hover:border-red-100 hover:bg-red-50 hover:text-brand-red transition-all"},[...e[19]||(e[19]=[l("i",{class:"fa-solid fa-plus text-gray-400 group-hover:text-brand-red"},null,-1),l("span",{class:"hidden sm:inline"},"Add new",-1)])])]),_:1}),l("div",me,[u(oe,{"vehicle-tabs":p.value,"vehicle-filter":n.value,onFilterChange:y},null,8,["vehicle-tabs","vehicle-filter"]),u(de,{"filtered-vehicles":b.value,columns:E.value,loading:s(c).loading,"table-meta":P.value,"filter-definitions":q,pagination:o.value,"onUpdate:pagination":e[1]||(e[1]=a=>o.value=a),"global-filter":k.value,"onUpdate:globalFilter":e[2]||(e[2]=a=>k.value=a),sorting:f.value,"onUpdate:sorting":e[3]||(e[3]=a=>f.value=a),"column-filters":x.value,"onUpdate:columnFilters":e[4]||(e[4]=a=>x.value=a),onRowClick:O},null,8,["filtered-vehicles","columns","loading","table-meta","pagination","global-filter","sorting","column-filters"])]),u(s(J),{open:s(C),"onUpdate:open":T},{default:v(()=>[u(s(X),null,{default:v(()=>[u(s(Z),{class:"fixed inset-0 z-50 bg-black/50"}),u(s(_),{class:"w-full sm:max-w-lg"},{default:v(()=>[u(s(ee),null,{default:v(()=>[u(s(le),null,{default:v(()=>[...e[20]||(e[20]=[U("Add Customer Vehicle",-1)])]),_:1}),u(s(te),null,{default:v(()=>[...e[21]||(e[21]=[U("Fill in the details for the new customer vehicle.",-1)])]),_:1})]),_:1}),l("form",{onSubmit:e[18]||(e[18]=G((...a)=>s(A)&&s(A)(...a),["prevent"])),class:"space-y-4"},[l("div",be,[l("div",null,[e[22]||(e[22]=l("label",{class:"block label-upper mb-2"},"Brand",-1)),m(l("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s(r).brand=a),type:"text",placeholder:"e.g., Volkswagen",class:"input",required:""},null,512),[[g,s(r).brand]])]),l("div",null,[e[23]||(e[23]=l("label",{class:"block label-upper mb-2"},"Model",-1)),m(l("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s(r).model=a),type:"text",placeholder:"e.g., ID.4",class:"input",required:""},null,512),[[g,s(r).model]])]),l("div",null,[e[24]||(e[24]=l("label",{class:"block label-upper mb-2"},"Year",-1)),m(l("input",{"onUpdate:modelValue":e[7]||(e[7]=a=>s(r).year=a),type:"number",placeholder:"e.g., 2024",class:"input",min:"1900",max:new Date().getFullYear()+1,required:""},null,8,ye),[[g,s(r).year]])])]),l("div",ge,[l("div",null,[e[25]||(e[25]=l("label",{class:"block label-upper mb-2"},"VIN",-1)),m(l("input",{"onUpdate:modelValue":e[8]||(e[8]=a=>s(r).vin=a),type:"text",placeholder:"Vehicle Identification Number",class:"input"},null,512),[[g,s(r).vin]])]),l("div",null,[e[26]||(e[26]=l("label",{class:"block label-upper mb-2"},"Plates",-1)),m(l("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>s(r).plates=a),type:"text",placeholder:"License plate number",class:"input"},null,512),[[g,s(r).plates]])])]),l("div",ve,[l("div",null,[e[28]||(e[28]=l("label",{class:"block label-upper mb-2"},"Fuel Type",-1)),m(l("select",{"onUpdate:modelValue":e[10]||(e[10]=a=>s(r).fuelType=a),class:"input"},[...e[27]||(e[27]=[l("option",{value:""},"Select fuel type...",-1),l("option",{value:"Petrol"},"Petrol",-1),l("option",{value:"Diesel"},"Diesel",-1),l("option",{value:"Electric"},"Electric",-1),l("option",{value:"Hybrid"},"Hybrid",-1),l("option",{value:"Plug-in Hybrid"},"Plug-in Hybrid",-1)])],512),[[D,s(r).fuelType]])]),l("div",null,[e[30]||(e[30]=l("label",{class:"block label-upper mb-2"},"Gear Type",-1)),m(l("select",{"onUpdate:modelValue":e[11]||(e[11]=a=>s(r).gearType=a),class:"input"},[...e[29]||(e[29]=[l("option",{value:""},"Select gear type...",-1),l("option",{value:"Manual"},"Manual",-1),l("option",{value:"Automatic"},"Automatic",-1),l("option",{value:"CVT"},"CVT",-1)])],512),[[D,s(r).gearType]])]),l("div",null,[e[31]||(e[31]=l("label",{class:"block label-upper mb-2"},"Mileage (km)",-1)),m(l("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>s(r).kilometers=a),type:"number",placeholder:"0",class:"input",min:"0"},null,512),[[g,s(r).kilometers,void 0,{number:!0}]])])]),l("div",fe,[l("div",null,[e[32]||(e[32]=l("label",{class:"block label-upper mb-2"},"Registered At",-1)),m(l("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>s(r).registration=a),type:"text",placeholder:"MM/YYYY (e.g., 01/2024)",class:"input"},null,512),[[g,s(r).registration]])]),l("div",null,[e[33]||(e[33]=l("label",{class:"block label-upper mb-2"},"Owned Since",-1)),m(l("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>s(r).ownedSince=a),type:"text",placeholder:"MM/YYYY (e.g., 01/2024)",class:"input"},null,512),[[g,s(r).ownedSince]])])]),l("div",we,[l("div",null,[e[34]||(e[34]=l("label",{class:"block label-upper mb-2"},"Owner",-1)),m(l("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>s(r).owner=a),type:"text",placeholder:"Owner name",class:"input"},null,512),[[g,s(r).owner]])]),l("div",null,[e[36]||(e[36]=l("label",{class:"block label-upper mb-2"},"Ownership Type",-1)),m(l("select",{"onUpdate:modelValue":e[16]||(e[16]=a=>s(r).ownershipType=a),class:"input"},[...e[35]||(e[35]=[l("option",{value:""},"Select ownership type...",-1),l("option",{value:"Private"},"Private",-1),l("option",{value:"Company"},"Company",-1),l("option",{value:"Lease"},"Lease",-1),l("option",{value:"Fleet"},"Fleet",-1)])],512),[[D,s(r).ownershipType]])])]),l("div",null,[e[37]||(e[37]=l("label",{class:"block label-upper mb-2"},"Warranty Info",-1)),m(l("textarea",{"onUpdate:modelValue":e[17]||(e[17]=a=>s(r).warrantyInfo=a),rows:"3",placeholder:"Warranty information...",class:"input"},null,512),[[g,s(r).warrantyInfo]])])],32),u(s(ae),{class:"flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3"},{default:v(()=>[u(s(K),{label:"Cancel",variant:"outline",class:"w-full sm:w-auto",onClick:s(M)},null,8,["onClick"]),u(s(K),{label:"Add Vehicle",variant:"primary",class:"w-full sm:w-auto",onClick:s(A)},null,8,["onClick"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]))}};export{Te as default};
