import{u as A,c,r as B,l as N,m as j,x as W,o as n,E as o,s as i,y as a,e as l,k as y,p as r,v as k,J as b,d,g as L,F as x,i as w,t as f,Q as S}from"./index-RmfAtVPr.js";import{z as O,F as h,L as H,H as K,j as Q,K as q,C as J,W as G}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-Dt8quB-6.js";import{u as I}from"./users-CPvXaVc6.js";const P={class:"space-y-4"},R={class:"grid grid-cols-2 gap-4"},X=["disabled","value"],Y=["disabled"],Z={label:"Teams"},_=["value"],ee={label:"Users"},le=["value"],te={key:0,class:"text-xs text-sub mt-1"},se=["value"],ue={__name:"CreateEventModal",props:{show:{type:Boolean,required:!0},initialDate:{type:String,default:""},dealerships:{type:Array,default:()=>[]},customer:{type:Object,default:null},assignee:{type:String,default:null},disabledFields:{type:Array,default:()=>[]}},emits:["create","cancel"],setup(p,{emit:D}){const m=p,C=D,g=A(),U=I(),E=c(()=>U.assignableUsers),F=c(()=>U.assignableTeams),M=c(()=>s.value.assignee&&s.value.assignee.startsWith("team-")),s=B({type:"test-drive",title:"",date:"",time:"",customer:"",assignee:"",dealership:""});N(()=>m.show,u=>{var e,v;if(u){const t=m.assignee||`user-${((e=g.currentUser)==null?void 0:e.id)||1}`;s.value={type:"test-drive",title:"",date:m.initialDate||"",time:"",customer:((v=m.customer)==null?void 0:v.name)||"",assignee:t,dealership:""}}}),j(()=>{var u;s.value.assignee||(s.value.assignee=m.assignee||`user-${((u=g.currentUser)==null?void 0:u.id)||1}`)});const $=()=>{s.value.title&&s.value.date&&C("create",{...s.value})},z=u=>{u||V()},V=()=>{C("cancel")};return(u,e)=>(n(),W(a(G),{open:p.show,"onUpdate:open":z},{default:o(()=>[i(a(O),null,{default:o(()=>[i(a(h),{class:"fixed inset-0 z-50 bg-black/50"}),i(a(H),{class:"w-full sm:max-w-lg"},{default:o(()=>{var v;return[i(a(K),null,{default:o(()=>[i(a(Q),null,{default:o(()=>[...e[7]||(e[7]=[y("Create New Event",-1)])]),_:1}),i(a(q),null,{default:o(()=>[...e[8]||(e[8]=[y("Fill in the details for the new event.",-1)])]),_:1})]),_:1}),l("div",P,[l("div",null,[e[10]||(e[10]=l("label",{class:"block label-upper mb-2"},"Event Type",-1)),r(l("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.type=t),class:"input"},[...e[9]||(e[9]=[l("option",{value:"test-drive"},"Test Drive",-1),l("option",{value:"appointment"},"Dealership Visit",-1),l("option",{value:"offsite"},"Offsite Visit",-1),l("option",{value:"workshop"},"Workshop",-1),l("option",{value:"call"},"Call",-1),l("option",{value:"delivery"},"Delivery",-1),l("option",{value:"meeting"},"Meeting",-1)])],512),[[k,s.value.type]])]),l("div",null,[e[11]||(e[11]=l("label",{class:"block label-upper mb-2"},"Title",-1)),r(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.title=t),type:"text",placeholder:"Event title...",class:"input"},null,512),[[b,s.value.title]])]),l("div",R,[l("div",null,[e[12]||(e[12]=l("label",{class:"block label-upper mb-2"},"Date",-1)),r(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.date=t),type:"date",class:"input"},null,512),[[b,s.value.date]])]),l("div",null,[e[13]||(e[13]=l("label",{class:"block label-upper mb-2"},"Time",-1)),r(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.time=t),type:"time",class:"input"},null,512),[[b,s.value.time]])])]),l("div",null,[e[14]||(e[14]=l("label",{class:"block label-upper mb-2"},"Customer",-1)),r(l("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.customer=t),type:"text",placeholder:"Customer name...",class:"input",disabled:p.disabledFields.includes("customer"),value:((v=p.customer)==null?void 0:v.name)||s.value.customer},null,8,X),[[b,s.value.customer]])]),l("div",null,[e[16]||(e[16]=l("label",{class:"block label-upper mb-2"},"Assign to",-1)),r(l("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.assignee=t),class:"input",disabled:p.disabledFields.includes("assignee")},[l("optgroup",Z,[(n(!0),d(x,null,w(F.value,t=>(n(),d("option",{key:`team-${t.id}`,value:`team-${t.id}`},f(t.name)+" Team ",9,_))),128))]),l("optgroup",ee,[(n(!0),d(x,null,w(E.value,t=>{var T;return n(),d("option",{key:`user-${t.id}`,value:`user-${t.id}`},f(t.name)+f(t.id===((T=a(g).currentUser)==null?void 0:T.id)?" (Me)":""),9,le)}),128))])],8,Y),[[k,s.value.assignee]]),M.value?(n(),d("p",te,[...e[15]||(e[15]=[l("i",{class:"fa-solid fa-users text-sub"},null,-1),y(" Any available team member will be assigned ",-1)])])):L("",!0)]),l("div",null,[e[18]||(e[18]=l("label",{class:"block label-upper mb-2"},"Dealership",-1)),r(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.dealership=t),class:"input"},[e[17]||(e[17]=l("option",{value:""},"Select dealership...",-1)),(n(!0),d(x,null,w(p.dealerships,t=>(n(),d("option",{key:t,value:t},f(t),9,se))),128))],512),[[k,s.value.dealership]])])]),i(a(J),{class:"flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3"},{default:o(()=>[i(a(S),{label:"Cancel",variant:"outline",size:"small",class:"rounded-sm w-full sm:w-auto",onClick:V}),i(a(S),{label:"Create Event",variant:"primary",size:"small",class:"rounded-sm w-full sm:w-auto !bg-brand-red !hover:bg-brand-red-dark !text-white !border-brand-red",onClick:$})]),_:1})]}),_:1})]),_:1})]),_:1},8,["open"]))}};export{ue as _};
