import{j as m,G as J,p as w,H as Q,D as E,c as p,d as e,k as F,F as S,r as V,w as i,v as u,s as h,f as T,g as U,t as n,h as M,q as k,T as K,o as d,n as c}from"./index-BD7Ni8RS.js";const P={class:"page-container"},H={class:"page-header"},W={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},z={class:"flex-1 min-w-0"},G={class:"flex items-center gap-2 md:gap-4 mt-3 md:mt-4 overflow-x-auto pb-2 scrollbar-hide"},X=["onClick"],Y={class:"p-3"},Z={class:"text-xs font-medium text-gray-600 mb-1"},ee={class:"flex items-center gap-2"},te={key:0,class:"px-2 py-0.5 rounded-full text-xs font-semibold bg-gray-100 text-gray-700"},se={class:"mt-4 md:mt-6 flex flex-col sm:flex-row items-stretch sm:items-center gap-2 md:gap-3 flex-wrap"},ae={class:"flex-1 min-w-0 sm:min-w-[200px] md:min-w-[300px] max-w-full md:max-w-md"},oe={class:"relative"},le={class:"p-4 md:p-8"},ne={class:"mb-4 flex justify-end"},ie={key:0,class:"empty-state"},re={key:1,class:"card overflow-hidden"},de={class:"overflow-x-auto -mx-4 md:mx-0"},pe={class:"w-full min-w-[1200px]"},ue={class:"divide-y divide-gray-100"},xe={class:"px-3 md:px-6 py-4 whitespace-nowrap"},me={class:"flex items-center gap-2 md:gap-3"},ce={class:"w-8 h-8 md:w-9 md:h-9 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center text-xs font-bold shrink-0"},ge={class:"min-w-0"},ye={class:"font-semibold text-gray-900 truncate"},be={class:"text-xs text-gray-500 truncate hidden sm:block"},ve={class:"px-3 md:px-6 py-4 whitespace-nowrap"},fe={class:"px-3 md:px-6 py-4 whitespace-nowrap"},we={class:"flex items-center gap-2"},he={class:"text-xs md:text-sm font-medium text-gray-900 truncate max-w-[120px]"},ke={class:"px-3 md:px-6 py-4 whitespace-nowrap"},Ce={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 whitespace-nowrap"},Ne={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 whitespace-nowrap"},Ae={class:"px-3 md:px-6 py-4 whitespace-nowrap"},Se={class:"flex items-center gap-2"},Ve={class:"w-5 h-5 md:w-6 md:h-6 rounded-full bg-gray-100 flex items-center justify-center text-[9px] md:text-[10px] font-bold text-gray-600 shrink-0"},Te={class:"text-xs md:text-sm text-gray-600 truncate max-w-[80px] hidden md:inline"},Ue={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 whitespace-nowrap"},Me={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 whitespace-nowrap hidden lg:table-cell"},Le={class:"px-3 md:px-6 py-4 whitespace-nowrap"},_e={class:"bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 overflow-hidden animate-fade-in"},De={class:"p-5 border-b border-gray-100 bg-gray-50/50"},qe={class:"font-bold text-lg text-gray-900"},Ie={class:"p-5 space-y-4"},Oe={key:0},Re={key:1},je={key:2},$e={class:"p-4 bg-gray-50 flex justify-end gap-3 border-t border-gray-100"},Qe={__name:"Pipeline",setup(Be){const g=m(J),x=m("open-leads"),y=m(""),b=m(!1),r=m({status:"",priority:"",source:""}),o=m({customerName:"",email:"",vehicle:"",value:"",probability:"",reason:""}),L=w(()=>[{key:"open-leads",label:"Open Leads",count:g.value.openLeads,barColor:"bg-gray-300"},{key:"open-opportunities",label:"Open opportunities",count:g.value.openOpportunities,barColor:"bg-orange-500"},{key:"in-negotiation",label:"In negotiation",count:g.value.inNegotiation,barColor:"bg-blue-500"},{key:"won",label:"Won",count:g.value.won,barColor:"bg-green-500"},{key:"lost",label:"Lost",count:g.value.lost,barColor:"bg-red-500"}]),_=()=>({"open-leads":"Create a new lead","open-opportunities":"Create a new opportunity","in-negotiation":"Create a new opportunity",won:"Add won deal",lost:"Add lost deal"})[x.value]||"Add new",D=()=>({"open-leads":"Create New Lead","open-opportunities":"Create New Opportunity","in-negotiation":"Create New Opportunity",won:"Add Won Deal",lost:"Add Lost Deal"})[x.value]||"Add New",q=()=>({"open-leads":"Lead","open-opportunities":"Opportunity","in-negotiation":"Opportunity",won:"Deal",lost:"Deal"})[x.value]||"Item",I=()=>{console.log("Adding new item:",{type:x.value,data:o.value}),o.value={customerName:"",email:"",vehicle:"",value:"",probability:"",reason:""},b.value=!1},O=w(()=>{const l=Q.map(a=>({id:`lead-${a.id}`,stageKey:"open-leads",customer:a.customer.name,email:a.customer.email,initials:a.customer.initials||a.customer.name.slice(0,2).toUpperCase(),nextAction:a.nextActionDue||"1h 12m",car:`${a.requestedCar.brand} ${a.requestedCar.model}`,carStatus:a.carStatus||"New",carStatusClass:a.carStatus==="New"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",requestType:a.requestType||"Quotation",source:a.source||"Marketing",assignee:a.assignee,assigneeInitials:a.assigneeInitials||(a.assignee?a.assignee.slice(0,2).toUpperCase():"NA"),createdAt:v(a.createdAt),lastActivity:v(a.lastActivity),status:a.status,statusClass:B(a.status),priority:a.priority})),t=E.map(a=>{const A=a.stage==="In Negotiation"?"in-negotiation":"open-opportunities";return{id:`opp-${a.id}`,stageKey:A,customer:a.customer.name,email:a.customer.email,initials:a.customer.initials||a.customer.name.slice(0,2).toUpperCase(),nextAction:"1h 12m",car:`${a.vehicle.brand} ${a.vehicle.model}`,carStatus:"New",carStatusClass:"bg-green-100 text-green-700",requestType:"Opportunity",source:"Marketing",assignee:a.assignee,assigneeInitials:a.assignee?a.assignee.slice(0,2).toUpperCase():"NA",createdAt:v(a.createdAt),lastActivity:v(a.lastActivity),status:a.stage,statusClass:A==="in-negotiation"?"bg-orange-100 text-orange-700":"bg-purple-100 text-purple-700",priority:"Normal"}}),s=[{id:"won-1",stageKey:"won",customer:"John Doe",email:"john.doe@example.com",initials:"JD",nextAction:"-",car:"Audi A6",carStatus:"New",carStatusClass:"bg-green-100 text-green-700",requestType:"Quotation",source:"Marketing",assignee:"Michael Thomas",assigneeInitials:"MT",createdAt:"15/03/2025",lastActivity:"15/03/2025",status:"Won",statusClass:"bg-green-100 text-green-700",priority:"Normal"}],N=[{id:"lost-1",stageKey:"lost",customer:"Jane Smith",email:"jane.smith@example.com",initials:"JS",nextAction:"-",car:"BMW X5",carStatus:"New",carStatusClass:"bg-green-100 text-green-700",requestType:"Test Drive",source:"Marketing",assignee:"Sarah Jenkins",assigneeInitials:"SJ",createdAt:"10/03/2025",lastActivity:"10/03/2025",status:"Lost",statusClass:"bg-red-100 text-red-700",priority:"Normal"}];return[...l,...t,...s,...N]}),C=w(()=>{let l=O.value.filter(t=>t.stageKey===x.value);if(y.value){const t=y.value.toLowerCase();l=l.filter(s=>s.customer.toLowerCase().includes(t)||s.email.toLowerCase().includes(t)||s.car.toLowerCase().includes(t))}return r.value.status&&(l=l.filter(t=>t.status===r.value.status)),r.value.priority&&(l=l.filter(t=>t.priority===r.value.priority)),r.value.source&&(l=l.filter(t=>t.source===r.value.source)),l}),R=l=>{x.value=l},j=()=>{},f=()=>{},$=()=>{r.value={status:"",priority:"",source:""},y.value=""},B=l=>({Valid:"bg-green-100 text-green-700","Not valid":"bg-red-100 text-red-700",Qualified:"bg-gray-100 text-gray-700","Not interested":"bg-red-100 text-red-700",Open:"bg-blue-100 text-blue-700"})[l]||"bg-gray-100 text-gray-700",v=l=>l?new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";return(l,t)=>(d(),p("div",P,[e("div",H,[e("div",W,[e("div",z,[t[19]||(t[19]=e("h1",{class:"page-header-title"},"Sales",-1)),e("div",G,[(d(!0),p(S,null,V(L.value,s=>(d(),p("div",{key:s.key,onClick:N=>R(s.key),class:c(["bg-white rounded-lg border border-gray-200 shadow-sm cursor-pointer hover:shadow-md transition-all min-w-[120px] md:min-w-[140px] shrink-0",x.value===s.key?"ring-2 ring-blue-500":""])},[e("div",{class:c(["h-1 rounded-t-lg",s.barColor])},null,2),e("div",Y,[e("div",Z,n(s.label),1),e("div",ee,[e("span",{class:c(["text-lg font-bold text-gray-900",s.key==="open-leads"?"text-blue-600":""])},n(s.count),3),s.key==="open-leads"?(d(),p("span",te,n(s.count),1)):M("",!0)])])],10,X))),128))])])]),e("div",se,[e("div",ae,[e("div",oe,[t[20]||(t[20]=e("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),i(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>y.value=s),onInput:j,type:"text",placeholder:"Search or ask a question",class:"input-with-icon"},null,544),[[u,y.value]])])]),i(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>r.value.status=s),onChange:f,class:"px-3 py-2 text-sm border border-gray-200 rounded-lg bg-white focus:outline-none focus:border-blue-500"},[...t[21]||(t[21]=[T('<option value="">Status</option><option value="Valid">Valid</option><option value="Not valid">Not valid</option><option value="Qualified">Qualified</option><option value="Not interested">Not interested</option>',5)])],544),[[h,r.value.status]]),i(e("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>r.value.priority=s),onChange:f,class:"px-3 py-2 text-sm border border-gray-200 rounded-lg bg-white focus:outline-none focus:border-blue-500"},[...t[22]||(t[22]=[e("option",{value:""},"Priority",-1),e("option",{value:"Hot"},"Hot",-1),e("option",{value:"Normal"},"Normal",-1)])],544),[[h,r.value.priority]]),i(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>r.value.source=s),onChange:f,class:"px-3 py-2 text-sm border border-gray-200 rounded-lg bg-white focus:outline-none focus:border-blue-500"},[...t[23]||(t[23]=[e("option",{value:""},"Source",-1),e("option",{value:"Marketing"},"Marketing",-1)])],544),[[h,r.value.source]]),t[24]||(t[24]=e("button",{class:"btn-secondary text-sm"},[e("i",{class:"fa-solid fa-plus mr-1"}),U(" More filters ")],-1)),e("button",{onClick:$,class:"btn-secondary text-sm"}," Clear "),t[25]||(t[25]=e("button",{class:"btn-secondary text-sm"}," Save ",-1))])]),e("div",le,[e("div",ne,[e("button",{onClick:t[4]||(t[4]=s=>b.value=!0),class:"btn-primary-lg"},[t[26]||(t[26]=e("i",{class:"fa-solid fa-plus"},null,-1)),U(" "+n(_()),1)])]),C.value.length===0?(d(),p("div",ie,[...t[27]||(t[27]=[e("i",{class:"fa-solid fa-inbox empty-state-icon"},null,-1),e("p",{class:"empty-state-text"},"No records found",-1)])])):(d(),p("div",re,[e("div",de,[e("table",pe,[t[31]||(t[31]=e("thead",{class:"bg-gray-50 border-b border-gray-200"},[e("tr",null,[e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},[e("input",{type:"checkbox",class:"rounded"})]),e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Customer"),e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Next action due"),e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Requested car"),e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Car status"),e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Request type"),e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Source"),e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Assignee"),e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Created at"),e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Last activity"),e("th",{class:"px-3 md:px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider whitespace-nowrap"},"Status"),e("th",{class:"px-3 md:px-6 py-3"})])],-1)),e("tbody",ue,[(d(!0),p(S,null,V(C.value,s=>(d(),p("tr",{key:s.id,class:"hover:bg-gray-50 cursor-pointer transition-colors"},[e("td",{class:"px-3 md:px-6 py-4 whitespace-nowrap",onClick:t[5]||(t[5]=k(()=>{},["stop"]))},[...t[28]||(t[28]=[e("input",{type:"checkbox",class:"rounded"},null,-1)])]),e("td",xe,[e("div",me,[e("div",ce,n(s.initials),1),e("div",ge,[e("div",ye,n(s.customer),1),e("div",be,n(s.email),1)])])]),e("td",ve,[e("span",{class:c(["text-xs md:text-sm font-medium",s.priority==="Hot"?"text-red-600":"text-gray-600"])},n(s.nextAction),3)]),e("td",fe,[e("div",we,[t[29]||(t[29]=e("i",{class:"fa-brands fa-volkswagen text-gray-400 text-xs md:text-sm"},null,-1)),e("span",he,n(s.car),1)])]),e("td",ke,[e("span",{class:c(["inline-flex px-2 py-1 rounded-full text-xs font-semibold",s.carStatusClass])},n(s.carStatus),3)]),e("td",Ce,n(s.requestType),1),e("td",Ne,n(s.source),1),e("td",Ae,[e("div",Se,[e("div",Ve,n(s.assigneeInitials),1),e("span",Te,n(s.assignee),1)])]),e("td",Ue,n(s.createdAt),1),e("td",Me,n(s.lastActivity),1),e("td",Le,[e("span",{class:c(["inline-flex px-2 py-1 rounded text-xs font-semibold",s.statusClass])},n(s.status),3)]),e("td",{class:"px-3 md:px-6 py-4 whitespace-nowrap",onClick:t[6]||(t[6]=k(()=>{},["stop"]))},[...t[30]||(t[30]=[e("button",{class:"text-gray-400 hover:text-gray-600"},[e("i",{class:"fa-solid fa-ellipsis-vertical"})],-1)])])]))),128))])])]),t[32]||(t[32]=T('<div class="px-4 md:px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3"><div class="text-xs md:text-sm text-gray-600 flex items-center"> Rows per page: <select class="ml-2 px-2 py-1 border border-gray-200 rounded text-xs md:text-sm"><option>10</option><option>25</option><option>50</option><option>100</option></select></div><div class="flex items-center gap-1 md:gap-2 flex-wrap"><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 whitespace-nowrap">Previous</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm bg-blue-600 text-white rounded">1</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50">2</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 hidden sm:inline-block">3</button><span class="px-1 md:px-2 text-xs md:text-sm text-gray-500 hidden sm:inline">...</span><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 whitespace-nowrap">Next</button></div></div>',1))]))]),(d(),F(K,{to:"body"},[b.value?(d(),p("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",onClick:t[18]||(t[18]=k(s=>b.value=!1,["self"]))},[e("div",_e,[e("div",De,[e("h3",qe,n(D()),1),t[33]||(t[33]=e("p",{class:"text-xs text-gray-500 mt-1"},"Fill in the details below",-1))]),e("div",Ie,[x.value==="open-leads"?(d(),p("div",Oe,[t[34]||(t[34]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Customer Name",-1)),i(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>o.value.customerName=s),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[u,o.value.customerName]]),t[35]||(t[35]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1 mt-4"},"Email",-1)),i(e("input",{"onUpdate:modelValue":t[8]||(t[8]=s=>o.value.email=s),type:"email",placeholder:"customer@example.com",class:"input"},null,512),[[u,o.value.email]]),t[36]||(t[36]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1 mt-4"},"Requested Vehicle",-1)),i(e("input",{"onUpdate:modelValue":t[9]||(t[9]=s=>o.value.vehicle=s),type:"text",placeholder:"e.g., Volkswagen ID.4",class:"input"},null,512),[[u,o.value.vehicle]])])):x.value==="open-opportunities"||x.value==="in-negotiation"?(d(),p("div",Re,[t[37]||(t[37]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Customer Name",-1)),i(e("input",{"onUpdate:modelValue":t[10]||(t[10]=s=>o.value.customerName=s),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[u,o.value.customerName]]),t[38]||(t[38]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1 mt-4"},"Vehicle",-1)),i(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>o.value.vehicle=s),type:"text",placeholder:"e.g., Porsche Taycan",class:"input"},null,512),[[u,o.value.vehicle]]),t[39]||(t[39]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1 mt-4"},"Opportunity Value",-1)),i(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>o.value.value=s),type:"number",placeholder:"0",class:"input"},null,512),[[u,o.value.value]]),t[40]||(t[40]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1 mt-4"},"Probability (%)",-1)),i(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>o.value.probability=s),type:"number",min:"0",max:"100",placeholder:"75",class:"input"},null,512),[[u,o.value.probability]])])):(d(),p("div",je,[t[41]||(t[41]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1"},"Customer Name",-1)),i(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>o.value.customerName=s),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[u,o.value.customerName]]),t[42]||(t[42]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1 mt-4"},"Vehicle",-1)),i(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>o.value.vehicle=s),type:"text",placeholder:"Vehicle model",class:"input"},null,512),[[u,o.value.vehicle]]),t[43]||(t[43]=e("label",{class:"block text-xs font-medium text-gray-500 mb-1 mt-4"},"Reason",-1)),i(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=s=>o.value.reason=s),rows:"3",placeholder:"Reason for {{ activeTab === 'won' ? 'win' : 'loss' }}...",class:"input resize-none"},null,512),[[u,o.value.reason]])]))]),e("div",$e,[e("button",{onClick:t[17]||(t[17]=s=>b.value=!1),class:"btn-secondary text-sm"}," Cancel "),e("button",{onClick:I,class:"btn-primary text-sm"}," Create "+n(q()),1)])])])):M("",!0)]))]))}};export{Qe as default};
