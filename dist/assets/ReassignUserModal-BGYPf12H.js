import{Q as T,c,R,S as I,r as j,H as A,p as z,o as n,L as C,h as s,e as m,g as _,F as $,i as U,n as w,t as f}from"./index-BWBI-39A.js";import{_ as F}from"./ModalShell-BIWc87zS.js";const L=T("users",()=>{const i=c(()=>R),u=c(()=>I),v=r=>i.value.find(d=>d.id===r),h=r=>u.value.find(d=>d.id===r),x=c(()=>i.value),t=c(()=>u.value),k=c(()=>{const r=u.value.map(o=>({...o,type:"team",icon:"fa-users",label:o.name})),d=i.value.map(o=>({...o,type:"user",icon:"fa-user",label:o.name}));return[...r,...d]});return{users:i,teams:u,getUserById:v,getTeamById:h,assignableUsers:x,assignableTeams:t,mixedAssignees:k}}),N={class:"space-y-2 max-h-96 overflow-y-auto mb-4"},V={key:0,class:"mb-3"},q=["onClick"],D={class:"flex-1"},E={class:"font-medium text-slate-800"},H={key:0,class:"fa-solid fa-check text-primary-600"},M=["onClick"],Q={class:"flex-1"},G={class:"font-medium text-slate-800"},J={class:"text-xs text-gray-500 capitalize"},K={key:0,class:"fa-solid fa-check text-primary-600"},O={class:"p-4 bg-gray-50 flex justify-end gap-3 border-t border-gray-100"},P=["disabled"],Y={__name:"ReassignUserModal",props:{show:{type:Boolean,required:!0}},emits:["close","confirm"],setup(i,{emit:u}){const v=i,h=u,x=L(),t=j(null),k=c(()=>x.assignableUsers),r=c(()=>x.assignableTeams),d=l=>({manager:"bg-blue-100 text-blue-700",salesman:"bg-purple-100 text-purple-700",operator:"bg-orange-100 text-orange-700"})[l]||"bg-gray-100 text-gray-700";A(()=>v.show,l=>{l||(t.value=null)});const o=l=>{t.value=l},B=()=>{t.value&&(h("confirm",t.value),t.value=null)};return(l,a)=>(n(),z(F,{show:i.show,onClose:a[1]||(a[1]=e=>l.$emit("close")),title:"Reassign"},{footer:C(()=>[s("div",O,[s("button",{onClick:a[0]||(a[0]=e=>l.$emit("close")),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"}," Cancel "),s("button",{onClick:B,disabled:!t.value,class:"px-4 py-2 text-sm font-medium text-primary-700 bg-primary-50 hover:bg-primary-100 border border-primary-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"}," Reassign ",8,P)])]),default:C(()=>[a[6]||(a[6]=s("p",{class:"text-sm text-gray-600 mb-4"}," Select a user or team to reassign: ",-1)),s("div",N,[r.value.length?(n(),m("div",V,[a[4]||(a[4]=s("p",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2 px-1"},"Teams",-1)),(n(!0),m($,null,U(r.value,e=>{var p,g,b,y;return n(),m("button",{key:`team-${e.id}`,onClick:S=>o({type:"team",id:e.id,name:e.name}),class:w(["w-full flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-primary-300 transition-colors text-left",{"bg-primary-50 border-primary-400":((p=t.value)==null?void 0:p.type)==="team"&&((g=t.value)==null?void 0:g.id)===e.id}])},[a[3]||(a[3]=s("div",{class:"w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm bg-green-100 text-green-700"},[s("i",{class:"fa-solid fa-users text-sm"})],-1)),s("div",D,[s("p",E,f(e.name),1),a[2]||(a[2]=s("p",{class:"text-xs text-gray-500"},"Team",-1))]),((b=t.value)==null?void 0:b.type)==="team"&&((y=t.value)==null?void 0:y.id)===e.id?(n(),m("i",H)):_("",!0)],10,q)}),128))])):_("",!0),s("div",null,[a[5]||(a[5]=s("p",{class:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2 px-1"},"Users",-1)),(n(!0),m($,null,U(k.value,e=>{var p,g,b,y;return n(),m("button",{key:`user-${e.id}`,onClick:S=>o({type:"user",id:e.id,name:e.name}),class:w(["w-full flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50 hover:border-primary-300 transition-colors text-left",{"bg-primary-50 border-primary-400":((p=t.value)==null?void 0:p.type)==="user"&&((g=t.value)==null?void 0:g.id)===e.id}])},[s("div",{class:w(["w-10 h-10 rounded-full flex items-center justify-center font-semibold text-sm",d(e.role)])},f(e.initials),3),s("div",Q,[s("p",G,f(e.name),1),s("p",J,f(e.role)+" â€¢ "+f(e.email),1)]),((b=t.value)==null?void 0:b.type)==="user"&&((y=t.value)==null?void 0:y.id)===e.id?(n(),m("i",K)):_("",!0)],10,M)}),128))])])]),_:1},8,["show"]))}};export{Y as _,L as u};
