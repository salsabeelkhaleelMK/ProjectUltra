import{m as i,d as B,r as m,c as E,o as M,a as d,b as Q,e as t,w as b,u as y,F as _,f as C,g as T,t as p,h as u,i as j,v as D,j as k,k as S,l as F}from"./index-BZLq_7J-.js";import{_ as P}from"./PageHeader-DSIx_Z5D.js";const h=(n=300)=>new Promise(e=>setTimeout(e,n)),$=async(n={})=>{await h();let e=[...i];if(n.search){const a=n.search.toLowerCase();e=e.filter(o=>{var x;return o.name.toLowerCase().includes(a)||o.email.toLowerCase().includes(a)||((x=o.company)==null?void 0:x.toLowerCase().includes(a))})}return{data:e,total:e.length}},A=async n=>{await h();const e=i.find(a=>a.id===parseInt(n));if(!e)throw new Error("Contact not found");return e},O=async n=>{await h();const e={id:i.length+1,...n,createdAt:new Date().toISOString()};return i.push(e),e},U=async(n,e)=>{await h();const a=i.findIndex(o=>o.id===parseInt(n));if(a===-1)throw new Error("Contact not found");return i[a]={...i[a],...e},i[a]},q=async n=>{await h();const e=i.findIndex(a=>a.id===parseInt(n));if(e===-1)throw new Error("Contact not found");return i.splice(e,1),{success:!0}},z=B("contacts",()=>{const n=m([]),e=m(null),a=m(!1),o=m(null),x=m(""),v=E(()=>n.value.length);async function s(){a.value=!0,o.value=null;try{const r=await $({search:x.value});n.value=r.data}catch(r){o.value=r.message}finally{a.value=!1}}async function l(r){a.value=!0,o.value=null;try{e.value=await A(r)}catch(c){o.value=c.message}finally{a.value=!1}}async function w(r){a.value=!0,o.value=null;try{const c=await O(r);return n.value.unshift(c),c}catch(c){throw o.value=c.message,c}finally{a.value=!1}}async function I(r,c){a.value=!0,o.value=null;try{const f=await U(r,c),g=n.value.findIndex(V=>V.id===r);return g!==-1&&(n.value[g]=f),f}catch(f){throw o.value=f.message,f}finally{a.value=!1}}async function N(r){a.value=!0,o.value=null;try{await q(r),n.value=n.value.filter(c=>c.id!==r)}catch(c){throw o.value=c.message,c}finally{a.value=!1}}function L(r){x.value=r,s()}return{contacts:n,currentContact:e,loading:a,error:o,searchQuery:x,totalContacts:v,loadContacts:s,loadContactById:l,addContact:w,modifyContact:I,removeContact:N,setSearchQuery:L}}),G={class:"page-container"},H={class:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3"},J={class:"flex-1 min-w-0 sm:max-w-md"},K={class:"relative"},R={class:"p-4 md:p-8"},W={key:0,class:"empty-state"},X={key:1,class:"empty-state"},Y={key:2,class:"card overflow-hidden"},Z={class:"overflow-x-auto -mx-4 md:mx-0"},tt={class:"w-full"},et={class:"divide-y divide-gray-100"},st={class:"px-3 md:px-6 py-3 whitespace-nowrap"},at={class:"flex items-center gap-2 md:gap-3"},nt={class:"w-9 h-9 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold shrink-0"},ot={class:"min-w-0"},lt={class:"text-content-bold truncate max-w-[120px] md:max-w-none"},rt={class:"px-3 md:px-6 py-3 text-content text-gray-600 whitespace-nowrap"},ct={class:"truncate block max-w-[100px]"},it={class:"px-3 md:px-6 py-3 whitespace-nowrap"},dt={class:"text-content text-gray-600 truncate max-w-[150px]"},pt={class:"px-3 md:px-6 py-3 text-content text-gray-600 whitespace-nowrap"},ut={class:"px-3 md:px-6 py-3 whitespace-nowrap"},xt={class:"badge-ui bg-gray-100 text-gray-700 font-semibold"},mt={class:"px-3 md:px-6 py-3 whitespace-nowrap hidden xl:table-cell"},yt={class:"flex flex-wrap gap-1"},ft={key:0,class:"text-xs text-gray-400"},ht={class:"px-4 md:px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3"},wt={class:"text-xs text-gray-600"},bt={__name:"Contacts",setup(n){const e=z(),a=m(""),o=m(!1);M(()=>{e.loadContacts()});const x=()=>{e.setSearchQuery(a.value)};return(v,s)=>(u(),d("div",G,[Q(P,{title:"Contacts & Accounts",subtitle:`${y(e).totalContacts} contacts`},{actions:b(()=>[t("button",{onClick:s[0]||(s[0]=l=>o.value=!0),class:"btn-primary"},[...s[4]||(s[4]=[t("i",{class:"fa-solid fa-plus"},null,-1),k(),t("span",{class:"hidden sm:inline"},"New Contact",-1),t("span",{class:"sm:hidden"},"New",-1)])])]),bottom:b(()=>[t("div",H,[t("div",J,[t("div",K,[s[5]||(s[5]=t("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),j(t("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>a.value=l),onInput:x,type:"text",placeholder:"Search contacts...",class:"input-with-icon"},null,544),[[D,a.value]])])]),s[6]||(s[6]=t("button",{class:"btn-secondary text-sm"},[t("i",{class:"fa-solid fa-filter mr-2"}),k(" Filters ")],-1))])]),_:1},8,["subtitle"]),t("div",R,[y(e).loading?(u(),d("div",W,[...s[7]||(s[7]=[t("i",{class:"fa-solid fa-spinner fa-spin text-4xl text-gray-400 mb-4"},null,-1),t("p",{class:"empty-state-text"},"Loading contacts...",-1)])])):y(e).contacts.length===0?(u(),d("div",X,[...s[8]||(s[8]=[t("i",{class:"fa-solid fa-users empty-state-icon"},null,-1),t("p",{class:"empty-state-text"},"No contacts found",-1)])])):(u(),d("div",Y,[t("div",Z,[t("table",tt,[s[11]||(s[11]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",null,[t("th",{class:"px-3 md:px-6 py-3 text-left"},[t("input",{type:"checkbox",class:"rounded"})]),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Contact"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Company"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Email"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Phone"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Source"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap hidden xl:table-cell"},"Tags"),t("th",{class:"px-3 md:px-6 py-3"})])],-1)),t("tbody",et,[(u(!0),d(_,null,C(y(e).contacts,l=>(u(),d("tr",{key:l.id,class:"hover:bg-gray-50 cursor-pointer transition-colors"},[t("td",{class:"px-3 md:px-6 py-3 whitespace-nowrap",onClick:s[2]||(s[2]=S(()=>{},["stop"]))},[...s[9]||(s[9]=[t("input",{type:"checkbox",class:"rounded"},null,-1)])]),t("td",st,[t("div",at,[t("div",nt,p(l.initials),1),t("div",ot,[t("div",lt,p(l.name),1)])])]),t("td",rt,[t("span",ct,p(l.company||"-"),1)]),t("td",it,[t("div",dt,p(l.email),1)]),t("td",pt,p(l.phone),1),t("td",ut,[t("span",xt,p(l.source),1)]),t("td",mt,[t("div",yt,[(u(!0),d(_,null,C(l.tags,w=>(u(),d("span",{key:w,class:"badge-ui bg-blue-50 text-blue-700 font-semibold"},p(w),1))),128)),!l.tags||l.tags.length===0?(u(),d("span",ft,"-")):F("",!0)])]),t("td",{class:"px-3 md:px-6 py-3 whitespace-nowrap",onClick:s[3]||(s[3]=S(()=>{},["stop"]))},[...s[10]||(s[10]=[t("button",{class:"text-gray-400 hover:text-gray-600"},[t("i",{class:"fa-solid fa-ellipsis-vertical"})],-1)])])]))),128))])])]),t("div",ht,[t("div",wt," Showing "+p(y(e).contacts.length)+" of "+p(y(e).totalContacts)+" contacts ",1),s[12]||(s[12]=T('<div class="flex items-center gap-1 md:gap-2 flex-wrap"><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 whitespace-nowrap">Previous</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm bg-blue-600 text-white rounded">1</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50">2</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 whitespace-nowrap">Next</button></div>',1))])]))])]))}};export{bt as default};
