import{_ as I}from"./ModalShell-B-Tai2ka.js";import{c,d,o as i,e,g as m,t as u,p as j,y as $,j as A,n as M,m as h,u as F,r as q,A as z,z as g,G as D,B as k,F as U,i as V}from"./index-BKcf9KHs.js";import{u as W}from"./users-J-IiIbb3.js";const R={class:"space-y-4"},G={class:"flex items-start gap-3"},H={class:"text-content-bold"},Q={class:"text-meta"},E={key:0,class:"flex items-start gap-3"},J={class:"text-content-bold"},K={key:1,class:"flex items-start gap-3"},P={class:"text-content-bold"},X={key:2,class:"flex items-start gap-3"},Y={class:"text-content-bold"},Z={key:3,class:"flex items-start gap-3"},_={class:"text-content-bold"},ee={key:4,class:"flex items-start gap-3"},te={class:"text-content-bold"},se={__name:"CalendarEventDetails",props:{event:{type:Object,required:!0}},setup(s){const o=s,n=c(()=>{var l;return(l=o.event)!=null&&l.start?new Date(o.event.start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A"}),p=c(()=>{var l;return(l=o.event)!=null&&l.start?new Date(o.event.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"}),b=c(()=>{var l;return(l=o.event)!=null&&l.end?new Date(o.event.end).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"});return(v,l)=>(i(),d("div",R,[e("div",G,[l[0]||(l[0]=e("div",{class:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-regular fa-calendar text-blue-600 text-sm"})],-1)),e("div",null,[e("p",H,u(n.value),1),e("p",Q,u(p.value)+" - "+u(b.value),1)])]),s.event.customer?(i(),d("div",E,[l[2]||(l[2]=e("div",{class:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-regular fa-user text-green-600 text-sm"})],-1)),e("div",null,[e("p",J,u(s.event.customer),1),l[1]||(l[1]=e("p",{class:"text-meta"},"Customer",-1))])])):m("",!0),s.event.vehicle?(i(),d("div",K,[l[4]||(l[4]=e("div",{class:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-car text-purple-600 text-sm"})],-1)),e("div",null,[e("p",P,u(s.event.vehicle),1),l[3]||(l[3]=e("p",{class:"text-meta"},"Vehicle",-1))])])):m("",!0),s.event.dealership?(i(),d("div",X,[l[6]||(l[6]=e("div",{class:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-building text-orange-600 text-sm"})],-1)),e("div",null,[e("p",Y,u(s.event.dealership),1),l[5]||(l[5]=e("p",{class:"text-meta"},"Dealership",-1))])])):m("",!0),s.event.assignee?(i(),d("div",Z,[l[8]||(l[8]=e("div",{class:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-regular fa-id-badge text-indigo-600 text-sm"})],-1)),e("div",null,[e("p",_,u(s.event.assignee),1),l[7]||(l[7]=e("p",{class:"text-meta"},"Assigned to",-1))])])):m("",!0),s.event.team?(i(),d("div",ee,[l[10]||(l[10]=e("div",{class:"w-8 h-8 rounded-lg bg-teal-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-users text-teal-600 text-sm"})],-1)),e("div",null,[e("p",te,u(s.event.team),1),l[9]||(l[9]=e("p",{class:"text-meta"},"Team",-1))])])):m("",!0)]))}},le=s=>({"test-drive":"Test Drive",appointment:"Dealership Visit",offsite:"Offsite Visit",workshop:"Workshop",call:"Call",delivery:"Delivery",meeting:"Meeting",training:"Training",marketing:"Marketing Event",leave:"Leave",memo:"Memo",recall:"Recall",absence:"Absence",other:"Other"})[s]||s,ae=s=>({"test-drive":"bg-blue-50 border-b border-blue-200",appointment:"bg-green-50 border-b border-green-200",offsite:"bg-emerald-50 border-b border-emerald-200",workshop:"bg-indigo-50 border-b border-indigo-200",call:"bg-orange-50 border-b border-orange-200",delivery:"bg-teal-50 border-b border-teal-200",meeting:"bg-purple-50 border-b border-purple-200",training:"bg-pink-50 border-b border-pink-200",marketing:"bg-yellow-50 border-b border-yellow-200",leave:"bg-red-50 border-b border-red-200",memo:"bg-gray-50 border-b border-gray-200",recall:"bg-cyan-50 border-b border-cyan-200",absence:"bg-rose-50 border-b border-rose-200",other:"bg-slate-50 border-b border-slate-200"})[s]||"bg-blue-50 border-b border-blue-200",re=s=>({"test-drive":"bg-blue-100 text-blue-700 border-blue-200",appointment:"bg-green-100 text-green-700 border-green-200",offsite:"bg-emerald-100 text-emerald-700 border-emerald-200",workshop:"bg-indigo-100 text-indigo-700 border-indigo-200",call:"bg-orange-100 text-orange-700 border-orange-200",delivery:"bg-teal-100 text-teal-700 border-teal-200",meeting:"bg-purple-100 text-purple-700 border-purple-200",training:"bg-pink-100 text-pink-700 border-pink-200",marketing:"bg-yellow-100 text-yellow-700 border-yellow-200",leave:"bg-red-100 text-red-700 border-red-200",memo:"bg-gray-100 text-gray-700 border-gray-200",recall:"bg-cyan-100 text-cyan-700 border-cyan-200",absence:"bg-rose-100 text-rose-700 border-rose-200",other:"bg-slate-100 text-slate-700 border-slate-200"})[s]||"bg-blue-100 text-blue-700 border-blue-200",ne=s=>({"test-drive":"text-blue-900",appointment:"text-green-900",offsite:"text-emerald-900",workshop:"text-indigo-900",call:"text-orange-900",delivery:"text-teal-900",meeting:"text-purple-900",training:"text-pink-900",marketing:"text-yellow-900",leave:"text-red-900",memo:"text-gray-900",recall:"text-cyan-900",absence:"text-rose-900",other:"text-slate-900"})[s]||"text-blue-900",De=s=>({"test-drive":"event-blue",appointment:"event-green",offsite:"event-emerald",workshop:"event-indigo",call:"event-orange",delivery:"event-teal",meeting:"event-purple",training:"event-pink",marketing:"event-yellow",leave:"event-red",memo:"event-gray",recall:"event-cyan",absence:"event-rose",other:"event-slate"})[s]||"event-blue",ie={class:"flex items-start justify-between"},oe={class:"flex items-center gap-2 mb-1"},de={key:0,class:"badge-ui bg-red-100 text-red-700 border-red-200"},ue={key:1,class:"badge-ui bg-orange-100 text-orange-700 border-orange-200"},be={class:"p-4 bg-gray-50 flex justify-between items-center border-t border-gray-100"},ve={key:1},ge={class:"flex gap-2"},Me={__name:"QuickViewEventModal",props:{show:{type:Boolean,required:!0},event:{type:Object,default:null}},emits:["close","edit","delete"],setup(s){return(o,n)=>{var p;return i(),j(I,{show:s.show,title:((p=s.event)==null?void 0:p.title)||"Event Details",size:"md",onCancel:n[4]||(n[4]=b=>o.$emit("close"))},{header:$(()=>{var b,v,l,T,w,r,C;return[e("div",{class:M(["p-5",h(ae)((b=s.event)==null?void 0:b.type)])},[e("div",ie,[e("div",null,[e("div",oe,[e("span",{class:M(["badge-ui",h(re)((v=s.event)==null?void 0:v.type)])},u(h(le)((l=s.event)==null?void 0:l.type)),3),((T=s.event)==null?void 0:T.status)==="cancelled"?(i(),d("span",de," Cancelled ")):((w=s.event)==null?void 0:w.status)==="no-show"?(i(),d("span",ue," No-show ")):m("",!0)]),e("h3",{class:M(["font-bold text-lg",h(ne)((r=s.event)==null?void 0:r.type)])},u((C=s.event)==null?void 0:C.title),3)]),e("button",{onClick:n[0]||(n[0]=N=>o.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...n[5]||(n[5]=[e("i",{class:"fa-solid fa-xmark"},null,-1)])])])],2)]}),footer:$(()=>{var b;return[e("div",be,[(b=s.event)!=null&&b.id?(i(),d("button",{key:0,onClick:n[1]||(n[1]=v=>o.$emit("delete",s.event.id)),class:"text-sm text-red-600 hover:text-red-700 font-medium flex items-center gap-1"},[...n[6]||(n[6]=[e("i",{class:"fa-regular fa-trash-can text-xs"},null,-1),A(" Delete ",-1)])])):(i(),d("div",ve)),e("div",ge,[e("button",{onClick:n[2]||(n[2]=v=>o.$emit("close")),class:"btn-secondary"}," Close "),e("button",{onClick:n[3]||(n[3]=v=>o.$emit("edit")),class:"btn-primary"},[...n[7]||(n[7]=[e("i",{class:"fa-regular fa-pen-to-square mr-1"},null,-1),A(" Edit ",-1)])])])])]}),default:$(()=>[s.event?(i(),j(se,{key:0,event:s.event},null,8,["event"])):m("",!0)]),_:1},8,["show","title"])}}},me={class:"space-y-4"},pe={class:"grid grid-cols-2 gap-4"},ce=["disabled","value"],ye=["disabled"],fe={label:"Teams"},xe=["value"],ke={label:"Users"},he=["value"],$e={key:0,class:"text-xs text-gray-500 mt-1"},Te=["value"],Ue={__name:"EditEventModal",props:{show:{type:Boolean,required:!0},event:{type:Object,default:null},dealerships:{type:Array,default:()=>[]},customer:{type:Object,default:null},assignee:{type:String,default:null},disabledFields:{type:Array,default:()=>[]}},emits:["save","cancel"],setup(s,{emit:o}){const n=s,p=o,b=F(),v=W(),l=c(()=>v.assignableUsers),T=c(()=>v.assignableTeams),w=c(()=>r.value.assignee&&r.value.assignee.startsWith("team-")),r=q({id:null,type:"test-drive",title:"",date:"",time:"",customer:"",assignee:"",vehicle:"",dealership:"",status:"confirmed"});z(()=>[n.show,n.event],([O,t])=>{var y,a,f,B;if(O&&t)try{const x=t.start?new Date(t.start):new Date;if(isNaN(x.getTime()))throw new Error("Invalid date");const S=t.assigneeId?`user-${t.assigneeId}`:t.assignee||n.assignee||`user-${((y=b.currentUser)==null?void 0:y.id)||1}`;r.value={id:t.id,type:t.type||"test-drive",title:t.title||"",date:x.toISOString().split("T")[0],time:x.toTimeString().slice(0,5),customer:((a=n.customer)==null?void 0:a.name)||t.customer||"",assignee:S,vehicle:t.vehicle||"",dealership:t.dealership||"",status:t.status||"confirmed"}}catch(x){console.error("Error parsing event date:",x);const S=new Date,L=t.assigneeId?`user-${t.assigneeId}`:t.assignee||n.assignee||`user-${((f=b.currentUser)==null?void 0:f.id)||1}`;r.value={id:t.id,type:t.type||"test-drive",title:t.title||"",date:S.toISOString().split("T")[0],time:S.toTimeString().slice(0,5),customer:((B=n.customer)==null?void 0:B.name)||t.customer||"",assignee:L,vehicle:t.vehicle||"",dealership:t.dealership||"",status:t.status||"confirmed"}}});const C=()=>{r.value.title&&r.value.date&&p("save",{...r.value})},N=()=>{p("cancel")};return(O,t)=>(i(),j(I,{show:s.show,title:"Edit Event",subtitle:"Update the event details.",onCancel:N},{actions:$(()=>[e("button",{onClick:C,class:"btn-primary"}," Save Changes ")]),default:$(()=>{var y;return[e("div",me,[e("div",null,[t[10]||(t[10]=e("label",{class:"block label-upper mb-2"},"Event Type",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value.type=a),class:"input"},[...t[9]||(t[9]=[e("option",{value:"test-drive"},"Test Drive",-1),e("option",{value:"appointment"},"Dealership Visit",-1),e("option",{value:"offsite"},"Offsite Visit",-1),e("option",{value:"workshop"},"Workshop",-1),e("option",{value:"call"},"Call",-1),e("option",{value:"delivery"},"Delivery",-1),e("option",{value:"meeting"},"Meeting",-1),e("option",{value:"training"},"Training",-1),e("option",{value:"marketing"},"Marketing Event",-1),e("option",{value:"leave"},"Leave",-1),e("option",{value:"memo"},"Memo",-1),e("option",{value:"recall"},"Recall",-1),e("option",{value:"absence"},"Absence",-1),e("option",{value:"other"},"Other",-1)])],512),[[D,r.value.type]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block label-upper mb-2"},"Title",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.value.title=a),type:"text",placeholder:"Event title...",class:"input"},null,512),[[k,r.value.title]])]),e("div",pe,[e("div",null,[t[12]||(t[12]=e("label",{class:"block label-upper mb-2"},"Date",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.value.date=a),type:"date",class:"input"},null,512),[[k,r.value.date]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block label-upper mb-2"},"Time",-1)),g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.value.time=a),type:"time",class:"input"},null,512),[[k,r.value.time]])])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block label-upper mb-2"},"Customer",-1)),g(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>r.value.customer=a),type:"text",placeholder:"Customer name...",class:"input",disabled:s.disabledFields.includes("customer"),value:((y=s.customer)==null?void 0:y.name)||r.value.customer},null,8,ce),[[k,r.value.customer]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block label-upper mb-2"},"Assign to",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.assignee=a),class:"input",disabled:s.disabledFields.includes("assignee")},[e("optgroup",fe,[(i(!0),d(U,null,V(T.value,a=>(i(),d("option",{key:`team-${a.id}`,value:`team-${a.id}`},u(a.name)+" Team ",9,xe))),128))]),e("optgroup",ke,[(i(!0),d(U,null,V(l.value,a=>{var f;return i(),d("option",{key:`user-${a.id}`,value:`user-${a.id}`},u(a.name)+u(a.id===((f=h(b).currentUser)==null?void 0:f.id)?" (Me)":""),9,he)}),128))])],8,ye),[[D,r.value.assignee]]),w.value?(i(),d("p",$e,[...t[15]||(t[15]=[e("i",{class:"fa-solid fa-users text-gray-400"},null,-1),A(" Any available team member will be assigned ",-1)])])):m("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block label-upper mb-2"},"Vehicle",-1)),g(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>r.value.vehicle=a),type:"text",placeholder:"Vehicle...",class:"input"},null,512),[[k,r.value.vehicle]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block label-upper mb-2"},"Dealership",-1)),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>r.value.dealership=a),class:"input"},[t[18]||(t[18]=e("option",{value:""},"Select dealership...",-1)),(i(!0),d(U,null,V(s.dealerships,a=>(i(),d("option",{key:a,value:a},u(a),9,Te))),128))],512),[[D,r.value.dealership]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block label-upper mb-2"},"Status",-1)),g(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>r.value.status=a),class:"input"},[...t[20]||(t[20]=[e("option",{value:"confirmed"},"Confirmed",-1),e("option",{value:"cancelled"},"Cancelled",-1),e("option",{value:"no-show"},"No-show",-1)])],512),[[D,r.value.status]])])])]}),_:1},8,["show"]))}};export{Me as _,Ue as a,De as g};
