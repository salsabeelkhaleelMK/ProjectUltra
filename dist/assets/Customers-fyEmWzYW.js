const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ContactsTab-BO6CStrT.js","assets/index-BxN3PUVT.js","assets/index-BP5uvV02.css","assets/components-ByRJmRLG.js","assets/toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-CiKMqL7j.js","assets/customers-DW0oCxYX.js","assets/opportunities-CBjlFa9K.js","assets/settings-DEo_6Gys.js","assets/useCustomersTable-B67KDGJp.js","assets/OpenLeadsTab-ZGnqigZA.js","assets/formatters-DjeI4Z8-.js","assets/OpenOpportunitiesTab-r2pjnSpS.js","assets/InNegotiationTab-Dtj6uk7i.js","assets/WonTab-DjDN_9Vz.js","assets/LostTab-TNUrcuHr.js"])))=>i.map(i=>d[i]);
import{r as T,l as P,c as h,x as D,o as v,E as b,s as p,y as u,e as t,k as A,t as U,d as x,p as i,J as r,Q as S,u as W,D as j,a8 as w,F as B,i as M,a9 as F,h as q,aa as C,n as H,z as Q,Z as J}from"./index-BxN3PUVT.js";import{_ as K}from"./PageHeader-Cr2-La9U.js";import{z as Z,F as G,L as X,H as Y,j as ee,K as te,C as le,W as oe}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-CiKMqL7j.js";import{u as ae}from"./opportunities-CBjlFa9K.js";import{u as ne}from"./customers-DW0oCxYX.js";import"./settings-DEo_6Gys.js";const se={class:"space-y-4"},ie={key:0},re={key:1},ue={key:2},pe={key:3},de=["placeholder"],me={__name:"AddCustomerModal",props:{show:{type:Boolean,default:!1},activeTab:{type:String,required:!0},initialData:{type:Object,default:()=>({})}},emits:["close","save"],setup(g,{emit:V}){const n=g,N=V,l=T({customerName:"",email:"",phone:"",company:"",vehicle:"",value:"",reason:""});P(()=>n.show,d=>{d&&(l.value={customerName:n.initialData.customerName||"",email:n.initialData.email||"",phone:n.initialData.phone||"",company:n.initialData.company||"",vehicle:n.initialData.vehicle||"",value:n.initialData.value||"",reason:n.initialData.reason||""})});const O=d=>{d||N("close")},y=h(()=>({contacts:"Add New Contact","open-leads":"Add New Lead","open-opportunities":"Add New Opportunity","in-negotiation":"Add Opportunity in Negotiation",won:"Add Won Opportunity",lost:"Add Lost Opportunity"})[n.activeTab]||"Add New Item"),L=h(()=>({contacts:"Contact","open-leads":"Lead","open-opportunities":"Opportunity","in-negotiation":"Opportunity",won:"Won Opportunity",lost:"Lost Opportunity"})[n.activeTab]||"Item"),f=()=>{N("save",{...l.value}),l.value={customerName:"",email:"",phone:"",company:"",vehicle:"",value:"",reason:""}};return(d,e)=>(v(),D(u(oe),{open:g.show,"onUpdate:open":O},{default:b(()=>[p(u(Z),null,{default:b(()=>[p(u(G),{class:"fixed inset-0 z-50 bg-black/50"}),p(u(X),{class:"w-full sm:max-w-md"},{default:b(()=>[p(u(Y),null,{default:b(()=>[p(u(ee),null,{default:b(()=>[A(U(y.value),1)]),_:1}),p(u(te),null,{default:b(()=>[...e[14]||(e[14]=[A("Fill in the details below",-1)])]),_:1})]),_:1}),t("div",se,[g.activeTab==="contacts"?(v(),x("div",ie,[e[15]||(e[15]=t("label",{class:"block label-upper mb-2"},"Contact Name",-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.value.customerName=o),type:"text",placeholder:"Enter contact name...",class:"input"},null,512),[[r,l.value.customerName]]),e[16]||(e[16]=t("label",{class:"block label-upper mb-2 mt-4"},"Email",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>l.value.email=o),type:"email",placeholder:"contact@example.com",class:"input"},null,512),[[r,l.value.email]]),e[17]||(e[17]=t("label",{class:"block label-upper mb-2 mt-4"},"Phone",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>l.value.phone=o),type:"tel",placeholder:"+49...",class:"input"},null,512),[[r,l.value.phone]]),e[18]||(e[18]=t("label",{class:"block label-upper mb-2 mt-4"},"Company (optional)",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>l.value.company=o),type:"text",placeholder:"Company name...",class:"input"},null,512),[[r,l.value.company]])])):g.activeTab==="open-leads"?(v(),x("div",re,[e[19]||(e[19]=t("label",{class:"block label-upper mb-2"},"Customer Name",-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.value.customerName=o),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[r,l.value.customerName]]),e[20]||(e[20]=t("label",{class:"block label-upper mb-2 mt-4"},"Email",-1)),i(t("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.value.email=o),type:"email",placeholder:"customer@example.com",class:"input"},null,512),[[r,l.value.email]]),e[21]||(e[21]=t("label",{class:"block label-upper mb-2 mt-4"},"Requested Vehicle",-1)),i(t("input",{"onUpdate:modelValue":e[6]||(e[6]=o=>l.value.vehicle=o),type:"text",placeholder:"e.g., Volkswagen ID.4",class:"input"},null,512),[[r,l.value.vehicle]])])):g.activeTab==="open-opportunities"||g.activeTab==="in-negotiation"?(v(),x("div",ue,[e[22]||(e[22]=t("label",{class:"block label-upper mb-2"},"Customer Name",-1)),i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=o=>l.value.customerName=o),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[r,l.value.customerName]]),e[23]||(e[23]=t("label",{class:"block label-upper mb-2 mt-4"},"Vehicle",-1)),i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=o=>l.value.vehicle=o),type:"text",placeholder:"e.g., Porsche Taycan",class:"input"},null,512),[[r,l.value.vehicle]]),e[24]||(e[24]=t("label",{class:"block label-upper mb-2 mt-4"},"Opportunity Value",-1)),i(t("input",{"onUpdate:modelValue":e[9]||(e[9]=o=>l.value.value=o),type:"number",placeholder:"0",class:"input"},null,512),[[r,l.value.value]])])):(v(),x("div",pe,[e[25]||(e[25]=t("label",{class:"block label-upper mb-2"},"Customer Name",-1)),i(t("input",{"onUpdate:modelValue":e[10]||(e[10]=o=>l.value.customerName=o),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[r,l.value.customerName]]),e[26]||(e[26]=t("label",{class:"block label-upper mb-2 mt-4"},"Vehicle",-1)),i(t("input",{"onUpdate:modelValue":e[11]||(e[11]=o=>l.value.vehicle=o),type:"text",placeholder:"Vehicle model",class:"input"},null,512),[[r,l.value.vehicle]]),e[27]||(e[27]=t("label",{class:"block label-upper mb-2 mt-4"},"Reason",-1)),i(t("textarea",{"onUpdate:modelValue":e[12]||(e[12]=o=>l.value.reason=o),rows:"3",placeholder:`Reason for ${g.activeTab==="won"?"win":"loss"}...`,class:"input resize-none"},null,8,de),[[r,l.value.reason]])]))]),p(u(le),{class:"flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3"},{default:b(()=>[p(u(S),{label:"Cancel",variant:"outline",size:"small",class:"rounded-sm w-full sm:w-auto",onClick:e[13]||(e[13]=o=>d.$emit("close"))}),p(u(S),{label:`Create ${L.value}`,variant:"primary",size:"small",class:"rounded-sm w-full sm:w-auto",onClick:f},null,8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}},ce={class:"page-container"},be={class:"p-4 md:p-8"},ve={class:"flex items-center gap-3 mb-6 overflow-x-auto pb-2 scrollbar-hide"},ge=["onClick"],ye={class:"heading-tab whitespace-nowrap"},Ne={__name:"Customers",setup(g){const V=q(),n=W(),N=j(),l=ae(),O=ne(),y=h(()=>{const m=N.leads.filter(c=>!c.isDisqualified),a=l.opportunities.filter(c=>c.stage!=="Closed Won"&&c.stage!=="Closed Lost"),s=l.opportunities.filter(c=>c.stage==="In Negotiation"||c.stage==="In negotiation"),k=l.opportunities.filter(c=>c.stage==="Closed Won"),E=l.opportunities.filter(c=>c.stage==="Closed Lost");return{contacts:O.totalCustomers,openLeads:m.length,openOpportunities:a.length-s.length,inNegotiation:s.length,won:k.length,lost:E.length}}),f=T(n.isOperator()?"open-leads":n.isManager()||n.isSalesman()?"in-negotiation":"contacts"),d=T(!1),e=T({customerName:"",email:"",phone:"",company:"",vehicle:"",value:"",reason:""}),o={contacts:w(()=>C(()=>import("./ContactsTab-BO6CStrT.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),"open-leads":w(()=>C(()=>import("./OpenLeadsTab-ZGnqigZA.js"),__vite__mapDeps([9,1,2,3,4,10,8]))),"open-opportunities":w(()=>C(()=>import("./OpenOpportunitiesTab-r2pjnSpS.js"),__vite__mapDeps([11,1,2,3,4,6,7,10,8]))),"in-negotiation":w(()=>C(()=>import("./InNegotiationTab-Dtj6uk7i.js"),__vite__mapDeps([12,1,2,3,4,6,7,10,8]))),won:w(()=>C(()=>import("./WonTab-DjDN_9Vz.js"),__vite__mapDeps([13,1,2,3,4,6,7,10,8]))),lost:w(()=>C(()=>import("./LostTab-TNUrcuHr.js"),__vite__mapDeps([14,1,2,3,4,6,7,10,8])))},$=h(()=>o[f.value]||o.contacts),I=h(()=>{const m=[{key:"contacts",label:"Customers",count:y.value.contacts,borderColor:"border-t-purple-600",badgeColor:"bg-purple-600 text-white"},{key:"open-leads",label:"Open Leads",count:y.value.openLeads,borderColor:"border-t-blue-600",badgeColor:"bg-blue-600 text-white"},{key:"open-opportunities",label:"Open opportunities",count:y.value.openOpportunities,borderColor:"border-t-orange-500",badgeColor:"bg-orange-500 text-white"},{key:"in-negotiation",label:"In negotiation",count:y.value.inNegotiation,borderColor:"border-t-blue-500",badgeColor:"bg-blue-500 text-white"},{key:"won",label:"Won",count:y.value.won,borderColor:"border-t-green-500",badgeColor:"bg-green-500 text-white"},{key:"lost",label:"Lost",count:y.value.lost,borderColor:"border-t-red-500",badgeColor:"bg-red-500 text-white"}];return n.isOperator()?m.filter(a=>a.key==="contacts"||a.key==="open-leads"):n.isSalesman()?m.filter(a=>a.key!=="open-leads"):m}),R=()=>{e.value={customerName:"",email:"",phone:"",company:"",vehicle:"",value:"",reason:""},d.value=!1},_=m=>{f.value=m},z=(m,a)=>{if(!a||!m)return"gray";const k={contacts:"gray","open-leads":"blue","open-opportunities":"blue","in-negotiation":"blue",won:"green",lost:"red"}[m]||"gray";return["blue","green","red","gray"].includes(k)?k:"gray"};return(m,a)=>(v(),x("div",ce,[p(K,{title:"Customers"},{actions:b(()=>[t("button",{onClick:a[0]||(a[0]=s=>u(V).push("/add-new")),class:"group flex items-center gap-2 rounded-2xl border border-gray-200 px-4 py-2 text-sm font-medium text-gray-600 hover:border-red-100 hover:bg-red-50 hover:text-brand-red transition-all"},[...a[2]||(a[2]=[t("i",{class:"fa-solid fa-plus text-gray-400 group-hover:text-brand-red"},null,-1),t("span",{class:"hidden sm:inline"},"Add new",-1)])])]),_:1}),t("div",be,[t("div",ve,[(v(!0),x(B,null,M(I.value,s=>(v(),x("button",{key:s.key,onClick:k=>_(s.key),class:H(["flex items-center justify-between gap-3 px-4 py-3 bg-white border border-border rounded-lg cursor-pointer hover:shadow-sm transition-all shrink-0 min-w-[160px] border-t-4",f.value===s.key?s.borderColor:"border-t-border"])},[t("span",ye,U(s.label),1),p(u(Q),{text:String(s.count),size:"small",theme:z(s.key,f.value===s.key)},null,8,["text","theme"])],10,ge))),128))]),(v(),D(F,null,{fallback:b(()=>[...a[3]||(a[3]=[t("div",{class:"flex items-center justify-center py-12"},[t("div",{class:"text-center"},[t("i",{class:"fa-solid fa-spinner fa-spin text-gray-400 text-2xl mb-2"}),t("p",{class:"text-meta"},"Loading...")])],-1)])]),default:b(()=>[(v(),D(J($.value),{key:f.value}))]),_:1}))]),p(me,{show:d.value,"active-tab":f.value,"initial-data":e.value,onClose:a[1]||(a[1]=s=>d.value=!1),onSave:R},null,8,["show","active-tab","initial-data"])]))}};export{Ne as default};
