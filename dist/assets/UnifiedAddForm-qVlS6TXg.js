import{aa as F,D as me,r as U,c as B,ab as te,l as ne,m as fe,K as pe,p as X,d as M,o as E,s as l,B as a,y as t,k as m,x as W,g as N,e as s,a0 as re,F as ve,i as ye,t as A,n as Q,w as xe}from"./index-D8nDSNmq.js";import{e as Z,t as ee,J as L,Q as C,c as I,Y as R,n as be,G as H,W as z,U as G,H as $,j as S,o as ge,i as ue}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-DVyH4GI_.js";import{fetchContacts as we,fetchContactById as ie,createContact as he,updateContact as Ce,deleteContact as Ve,addRequestedCarToContact as ke,convertContactToLead as Se,convertContactToOpportunity as Te}from"./contacts-BG9sTx9a.js";const Y=(n=300)=>new Promise(i=>setTimeout(i,n)),le=()=>F.filter(n=>n.company&&n.company!==""),_e=async(n={})=>{await Y();let i=le();if(n.search){const c=n.search.toLowerCase();i=i.filter(d=>{var w;return d.name.toLowerCase().includes(c)||d.email.toLowerCase().includes(c)||((w=d.company)==null?void 0:w.toLowerCase().includes(c))})}return{data:i,total:i.length}},de=async n=>{await Y();const c=le().find(d=>d.id===parseInt(n));if(!c)throw new Error("Account not found");return c},Ee=async n=>{await Y();const i={id:F.length+1,...n,createdAt:new Date().toISOString(),lastContact:new Date().toISOString()};return F.push(i),i},qe=async(n,i)=>{if(await Y(),le().findIndex(k=>k.id===parseInt(n))===-1)throw new Error("Account not found");const w=F.findIndex(k=>k.id===parseInt(n));return w!==-1&&(F[w]={...F[w],...i}),F[w]},Ae=async n=>{await Y();const i=F.findIndex(c=>c.id===parseInt(n));if(i===-1)throw new Error("Account not found");return F.splice(i,1),{success:!0}},Ue=me("customers",()=>{const n=U([]),i=U(null),c=U(!1),d=U(null),w=U(""),k=B(()=>n.value.filter(o=>o.type==="contact")),h=B(()=>n.value.filter(o=>o.type==="account")),T=B(()=>n.value.length),x=B(()=>k.value.length),b=B(()=>h.value.length),g=async(o={})=>{c.value=!0,d.value=null;try{const[f,p]=await Promise.all([we(o),_e(o)]),y=[...f.data.map(V=>({...V,type:"contact"})),...p.data.map(V=>({...V,type:"account"}))];return n.value=y,{data:y,total:y.length}}catch(f){throw d.value=f.message,f}finally{c.value=!1}},u=async(o,f=null)=>{c.value=!0,d.value=null;try{if(f==="contact")i.value={...await ie(o),type:"contact"};else if(f==="account")i.value={...await de(o),type:"account"};else try{const p=await ie(o);i.value={...p,type:"contact"}}catch{const p=await de(o);i.value={...p,type:"account"}}return i.value}catch(p){throw d.value=p.message,p}finally{c.value=!1}},D=async o=>{c.value=!0,d.value=null;try{const f=o.company&&o.company!=="",y={...await(f?Ee(o):he(o)),type:f?"account":"contact"};return n.value.unshift(y),y}catch(f){throw d.value=f.message,f}finally{c.value=!1}},_=async(o,f,p)=>{var y;c.value=!0,d.value=null;try{const V=await(p==="account"?qe(o,f):Ce(o,f)),K=n.value.findIndex(v=>v.id===o);return K!==-1&&(n.value[K]={...V,type:p}),((y=i.value)==null?void 0:y.id)===o&&(i.value={...V,type:p}),{...V,type:p}}catch(V){throw d.value=V.message,V}finally{c.value=!1}},O=async(o,f)=>{var p;c.value=!0,d.value=null;try{await(f==="account"?Ae(o):Ve(o)),n.value=n.value.filter(y=>y.id!==o),((p=i.value)==null?void 0:p.id)===o&&(i.value=null)}catch(y){throw d.value=y.message,y}finally{c.value=!1}};function q(o){w.value=o,g({search:o})}return{customers:n,contacts:k,accounts:h,currentCustomer:i,loading:c,error:d,searchQuery:w,totalCustomers:T,totalContacts:x,totalAccounts:b,fetchCustomers:g,fetchCustomerById:u,addCustomer:D,updateCustomer:_,removeCustomer:O,setSearchQuery:q,addContact:async o=>await D({...o,company:null}),modifyContact:async(o,f)=>await _(o,f,"contact"),removeContact:async o=>await O(o,"contact"),addRequestedCar:async(o,f)=>{const p=n.value.find(y=>y.id===o);if(!p)throw new Error("Customer not found");if(p.type==="contact")return await ke(o,f);throw new Error("Requested cars not supported for accounts")},convertToLead:async o=>{var p;const f=n.value.find(y=>y.id===o);if(!f)throw new Error("Customer not found");if(f.type==="contact"){const y=await Se(o);return n.value=n.value.filter(V=>V.id!==o),((p=i.value)==null?void 0:p.id)===o&&(i.value=null),y}throw new Error("Only contacts can be converted to leads")},convertToOpportunity:async o=>{var p;const f=n.value.find(y=>y.id===o);if(!f)throw new Error("Customer not found");if(f.type==="contact"){const y=await Te(o);return n.value=n.value.filter(V=>V.id!==o),((p=i.value)==null?void 0:p.id)===o&&(i.value=null),y}throw new Error("Only contacts can be converted to opportunities")}}});function De({contactMode:n,selectedContact:i,contactFormData:c}){const d=te({name:"",email:""}),w=x=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x),k=B(()=>n.value==="existing"?!!i.value:!!(c.name&&c.email));return{errors:d,canSubmit:k,validateEmail:w,validateContactForm:()=>{if(d.name="",d.email="",n.value==="new"){let x=!0;return c.name.trim()||(d.name="Contact name is required",x=!1),c.email.trim()?w(c.email)||(d.email="Please enter a valid email address",x=!1):(d.email="Email is required",x=!1),x}else return!!i.value},clearErrors:()=>{d.name="",d.email=""}}}function Oe({contactMode:n,selectedContact:i,contactFormData:c,vehicleFormData:d,markAsLead:w,markAsOpportunity:k,validateContactForm:h,onSubmit:T}){const x=U(!1),b=_=>Object.entries(_).reduce((O,[q,P])=>{if(P!==null&&P!==""&&P!==void 0){if(q==="year"&&P===new Date().getFullYear())return O;O[q]=P}return O},{}),g=()=>n.value==="new"?{name:c.name.trim(),email:c.email.trim(),phone:c.phone.trim(),company:c.company.trim()}:null,u=()=>{if(!h())return;x.value=!0;const _=b(d),O=g(),q={contactMode:n.value,selectedContact:i.value,contactData:O,vehicleData:Object.keys(_).length>0?_:null,markAsLead:w.value,markAsOpportunity:k.value};T&&T(q)},D=()=>{x.value=!1};return{isSubmitting:B(()=>x.value),handleSubmit:u,resetSubmitting:D}}const Le={key:0,class:"space-y-6"},Re={class:"space-y-2"},Me={class:"flex gap-6"},Ie={key:0,class:"space-y-6"},Be={class:"relative space-y-2"},Fe={class:"relative w-full"},Pe=["onClick"],je={class:"w-8 h-8 rounded-full bg-surfaceSecondary text-primary flex items-center justify-center text-xs font-bold shrink-0"},Ne={class:"flex-1 min-w-0"},We={class:"font-semibold text-heading text-fluid-xs truncate"},Ye={class:"text-sub text-fluid-xs truncate"},Qe={class:"flex items-center justify-between"},He={class:"flex items-center gap-3"},ze={class:"w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center text-xs font-bold border border-border"},Ge={class:"font-bold text-heading text-fluid-xs"},$e={class:"text-sub text-fluid-xs"},Je={key:1,class:"space-y-6"},Ke={class:"space-y-2"},Xe={key:0,class:"text-brand-red text-fluid-xs mt-1"},Ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},et={class:"space-y-2"},tt={key:0,class:"text-brand-red text-fluid-xs mt-1"},lt={class:"space-y-2"},at={class:"space-y-2"},st={class:"flex items-center gap-3"},ot={class:"w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center text-xs font-bold border border-border"},nt={class:"font-bold text-heading text-fluid-xs"},rt={class:"text-sub text-fluid-xs"},ut={class:"space-y-4"},it={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6"},dt={class:"space-y-2"},ct={class:"space-y-2"},mt={class:"space-y-2"},ft={class:"space-y-2"},pt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},vt={class:"space-y-4"},yt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},xt={class:"space-y-2"},bt={class:"space-y-2"},gt={class:"space-y-4"},wt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},ht={class:"space-y-2"},Ct={class:"space-y-2"},Vt={class:"space-y-2"},kt={key:0,class:"flex flex-col md:flex-row gap-3"},St={class:"text-fluid-xs font-bold text-heading"},At={__name:"UnifiedAddForm",props:{initialContact:{type:Object,default:null},hideContactSelection:{type:Boolean,default:!1},forceType:{type:String,default:""}},emits:["submit"],setup(n,{expose:i,emit:c}){const d=n,w=c,k=Ue(),h=U(d.initialContact?"existing":"new"),T=U(""),x=U(!1),b=U(d.initialContact||null),g=te({name:"",email:"",phone:"",company:""}),u=te({brand:"",model:"",year:new Date().getFullYear(),price:null,requestMessage:"",requestType:"",source:"",dealership:"",channel:"Email",fuelType:"",gearType:"",kilometers:null,stockDays:null}),D=U(d.forceType==="lead"),_=U(d.forceType==="opportunity");ne(()=>d.forceType,v=>{v==="lead"?(D.value=!0,_.value=!1):v==="opportunity"&&(D.value=!1,_.value=!0)}),ne(()=>d.initialContact,v=>{v&&(b.value=v,T.value=v.name,h.value="existing")},{immediate:!0});let O=null;const{errors:q,canSubmit:P,validateContactForm:ae,clearErrors:se}=De({contactMode:h,selectedContact:b,contactFormData:g});fe(()=>{k.customers.length===0&&k.fetchCustomers()});const J=B(()=>{if(!T.value.trim())return k.customers.slice(0,10);const v=T.value.toLowerCase();return k.customers.filter(e=>e.name.toLowerCase().includes(v)||e.email.toLowerCase().includes(v)||e.company&&e.company.toLowerCase().includes(v)).slice(0,10)}),j=B(()=>!!(u.brand||u.model||u.year!==new Date().getFullYear()||u.price||u.requestMessage||u.requestType||u.source||u.dealership||u.fuelType||u.gearType||u.kilometers||u.stockDays)),{isSubmitting:oe,handleSubmit:o,resetSubmitting:f}=Oe({contactMode:h,selectedContact:b,contactFormData:g,vehicleFormData:u,markAsLead:D,markAsOpportunity:_,validateContactForm:ae,onSubmit:v=>{w("submit",v)}}),p=()=>{clearTimeout(O),O=setTimeout(()=>{x.value=!0},300)},y=v=>{b.value=v,T.value=v.name,x.value=!1},V=()=>{b.value=null,T.value="",x.value=!1};return i({resetSubmitting:f,submit:o,clear:()=>{h.value="new",b.value=null,T.value="",x.value=!1,g.name="",g.email="",g.phone="",g.company="",Object.keys(u).forEach(v=>{v==="year"?u[v]=new Date().getFullYear():v==="channel"?u[v]="Email":typeof u[v]=="number"?u[v]=null:u[v]=""}),D.value=!1,_.value=!1,se()},canSubmit:P,isSubmitting:oe}),(v,e)=>{const ce=pe("click-outside");return X((E(),M("form",{onSubmit:e[19]||(e[19]=xe((...r)=>v.handleSubmit&&v.handleSubmit(...r),["prevent"])),class:"w-full"},[l(t(R),{class:"mb-4"},{default:a(()=>[l(t(Z),null,{default:a(()=>[l(t(ee),null,{default:a(()=>[...e[20]||(e[20]=[m("Contact Information",-1)])]),_:1})]),_:1}),l(t(L),{class:"space-y-6"},{default:a(()=>[n.hideContactSelection?b.value?(E(),W(t(R),{key:1,class:"bg-surfaceSecondary border-border"},{default:a(()=>[l(t(L),{class:"p-4"},{default:a(()=>[s("div",st,[s("div",ot,A(b.value.initials),1),s("div",null,[s("div",nt,A(b.value.name),1),s("div",rt,A(b.value.email),1)])])]),_:1})]),_:1})):N("",!0):(E(),M("div",Le,[s("div",Re,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[21]||(e[21]=[m("Contact Type",-1)])]),_:1}),s("div",Me,[l(t(C),{class:"flex items-center gap-2 cursor-pointer"},{default:a(()=>[X(s("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=r=>h.value=r),value:"new",class:"w-4 h-4 text-brand-primary focus:ring-brand-primary border-gray-300"},null,512),[[re,h.value]]),e[22]||(e[22]=s("span",{class:"text-sm text-body"},"New Contact",-1))]),_:1}),l(t(C),{class:"flex items-center gap-2 cursor-pointer"},{default:a(()=>[X(s("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=r=>h.value=r),value:"existing",class:"w-4 h-4 text-brand-primary focus:ring-brand-primary border-gray-300"},null,512),[[re,h.value]]),e[23]||(e[23]=s("span",{class:"text-sm text-body"},"Existing Contact",-1))]),_:1})])]),h.value==="existing"?(E(),M("div",Ie,[s("div",Be,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[24]||(e[24]=[m("Search Contact",-1)])]),_:1}),s("div",Fe,[e[25]||(e[25]=s("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-sub text-xs z-10"},null,-1)),l(t(I),{modelValue:T.value,"onUpdate:modelValue":e[2]||(e[2]=r=>T.value=r),onInput:p,onFocus:e[3]||(e[3]=r=>x.value=!0),type:"text",placeholder:"Search by name, email, or company...",class:"pl-9 w-full h-10"},null,8,["modelValue"])]),x.value&&J.value.length>0?(E(),W(t(R),{key:0,class:"absolute z-50 w-full mt-1 max-h-64 overflow-y-auto shadow-lg"},{default:a(()=>[l(t(L),{class:"p-0"},{default:a(()=>[(E(!0),M(ve,null,ye(J.value,r=>(E(),M("div",{key:r.id,onClick:Tt=>y(r),class:"flex items-center gap-2 p-3 hover:bg-surfaceSecondary cursor-pointer border-b border-border last:border-b-0"},[s("div",je,A(r.initials),1),s("div",Ne,[s("div",We,A(r.name),1),s("div",Ye,A(r.email),1)]),e[26]||(e[26]=s("i",{class:"fa-solid fa-chevron-right text-sub text-xs"},null,-1))],8,Pe))),128))]),_:1})]),_:1})):N("",!0)]),b.value?(E(),W(t(R),{key:0,class:"bg-surfaceSecondary border-border"},{default:a(()=>[l(t(L),{class:"p-4"},{default:a(()=>[s("div",Qe,[s("div",He,[s("div",ze,A(b.value.initials),1),s("div",null,[s("div",Ge,A(b.value.name),1),s("div",$e,A(b.value.email),1)])]),l(t(be),{variant:"ghost",size:"small",class:"h-8 w-8 p-0",onClick:V},{default:a(()=>[...e[27]||(e[27]=[s("i",{class:"fa-solid fa-xmark text-sm"},null,-1)])]),_:1})])]),_:1})]),_:1})):N("",!0)])):(E(),M("div",Je,[s("div",Ke,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[28]||(e[28]=[m(" Contact Name ",-1),s("span",{class:"text-brand-red"},"*",-1)])]),_:1}),l(t(I),{modelValue:g.name,"onUpdate:modelValue":e[4]||(e[4]=r=>g.name=r),type:"text",placeholder:"Enter contact name...",class:"w-full h-10",required:h.value==="new",error:t(q).name},null,8,["modelValue","required","error"]),t(q).name?(E(),M("p",Xe,A(t(q).name),1)):N("",!0)]),s("div",Ze,[s("div",et,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[29]||(e[29]=[m(" Email ",-1),s("span",{class:"text-brand-red"},"*",-1)])]),_:1}),l(t(I),{modelValue:g.email,"onUpdate:modelValue":e[5]||(e[5]=r=>g.email=r),type:"email",placeholder:"contact@example.com",class:"w-full h-10",required:h.value==="new",error:t(q).email},null,8,["modelValue","required","error"]),t(q).email?(E(),M("p",tt,A(t(q).email),1)):N("",!0)]),s("div",lt,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[30]||(e[30]=[m("Phone",-1)])]),_:1}),l(t(I),{modelValue:g.phone,"onUpdate:modelValue":e[6]||(e[6]=r=>g.phone=r),type:"tel",placeholder:"+49...",class:"w-full h-10"},null,8,["modelValue"])])]),s("div",at,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[31]||(e[31]=[m("Company (optional)",-1)])]),_:1}),l(t(I),{modelValue:g.company,"onUpdate:modelValue":e[7]||(e[7]=r=>g.company=r),type:"text",placeholder:"Company name...",class:"w-full h-10"},null,8,["modelValue"])])]))]))]),_:1})]),_:1}),l(t(R),{class:"mb-4"},{default:a(()=>[l(t(Z),null,{default:a(()=>[l(t(ee),null,{default:a(()=>[...e[32]||(e[32]=[m(" Vehicle Details ",-1),s("span",{class:"text-meta font-normal text-fluid-xs"},"(Optional)",-1)])]),_:1})]),_:1}),l(t(L),{class:"space-y-8"},{default:a(()=>[s("div",ut,[e[37]||(e[37]=s("h4",{class:"text-fluid-xs font-bold uppercase text-sub tracking-wider"},"Basic Information",-1)),s("div",it,[s("div",dt,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[33]||(e[33]=[m("Brand",-1)])]),_:1}),l(t(I),{modelValue:u.brand,"onUpdate:modelValue":e[8]||(e[8]=r=>u.brand=r),type:"text",placeholder:"e.g., VW",class:"w-full h-10"},null,8,["modelValue"])]),s("div",ct,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[34]||(e[34]=[m("Model",-1)])]),_:1}),l(t(I),{modelValue:u.model,"onUpdate:modelValue":e[9]||(e[9]=r=>u.model=r),type:"text",placeholder:"e.g., ID.4",class:"w-full h-10"},null,8,["modelValue"])]),s("div",mt,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[35]||(e[35]=[m("Year",-1)])]),_:1}),l(t(I),{modelValue:u.year,"onUpdate:modelValue":e[10]||(e[10]=r=>u.year=r),type:"number",min:1900,max:new Date().getFullYear()+1,placeholder:"2024",class:"w-full h-10"},null,8,["modelValue","max"])]),s("div",ft,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[36]||(e[36]=[m("Price",-1)])]),_:1}),l(t(I),{modelValue:u.price,"onUpdate:modelValue":e[11]||(e[11]=r=>u.price=r),type:"number",min:0,placeholder:"45000",class:"w-full h-10"},null,8,["modelValue"])])])]),s("div",pt,[s("div",vt,[e[49]||(e[49]=s("h4",{class:"text-fluid-xs font-bold uppercase text-sub tracking-wider"},"Request Details",-1)),s("div",yt,[s("div",xt,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[38]||(e[38]=[m("Request Type",-1)])]),_:1}),l(t(H),{modelValue:u.requestType,"onUpdate:modelValue":e[12]||(e[12]=r=>u.requestType=r)},{default:a(()=>[l(t(z),{class:"w-full h-10"},{default:a(()=>[l(t(G),{placeholder:"Select type"})]),_:1}),l(t($),null,{default:a(()=>[l(t(S),{value:"Quotation"},{default:a(()=>[...e[39]||(e[39]=[m("Quotation",-1)])]),_:1}),l(t(S),{value:"Test Drive"},{default:a(()=>[...e[40]||(e[40]=[m("Test Drive",-1)])]),_:1}),l(t(S),{value:"Information"},{default:a(()=>[...e[41]||(e[41]=[m("Information",-1)])]),_:1}),l(t(S),{value:"Purchase"},{default:a(()=>[...e[42]||(e[42]=[m("Purchase",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",bt,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[43]||(e[43]=[m("Source",-1)])]),_:1}),l(t(H),{modelValue:u.source,"onUpdate:modelValue":e[13]||(e[13]=r=>u.source=r)},{default:a(()=>[l(t(z),{class:"w-full h-10"},{default:a(()=>[l(t(G),{placeholder:"Select source"})]),_:1}),l(t($),null,{default:a(()=>[l(t(S),{value:"Marketing"},{default:a(()=>[...e[44]||(e[44]=[m("Marketing",-1)])]),_:1}),l(t(S),{value:"Website"},{default:a(()=>[...e[45]||(e[45]=[m("Website",-1)])]),_:1}),l(t(S),{value:"Phone"},{default:a(()=>[...e[46]||(e[46]=[m("Phone",-1)])]),_:1}),l(t(S),{value:"Walk-in"},{default:a(()=>[...e[47]||(e[47]=[m("Walk-in",-1)])]),_:1}),l(t(S),{value:"Referral"},{default:a(()=>[...e[48]||(e[48]=[m("Referral",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),s("div",gt,[e[58]||(e[58]=s("h4",{class:"text-fluid-xs font-bold uppercase text-sub tracking-wider"},"Vehicle Specs",-1)),s("div",wt,[s("div",ht,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[50]||(e[50]=[m("Fuel Type",-1)])]),_:1}),l(t(H),{modelValue:u.fuelType,"onUpdate:modelValue":e[14]||(e[14]=r=>u.fuelType=r)},{default:a(()=>[l(t(z),{class:"w-full h-10"},{default:a(()=>[l(t(G),{placeholder:"Select fuel"})]),_:1}),l(t($),null,{default:a(()=>[l(t(S),{value:"Petrol"},{default:a(()=>[...e[51]||(e[51]=[m("Petrol",-1)])]),_:1}),l(t(S),{value:"Diesel"},{default:a(()=>[...e[52]||(e[52]=[m("Diesel",-1)])]),_:1}),l(t(S),{value:"Electric"},{default:a(()=>[...e[53]||(e[53]=[m("Electric",-1)])]),_:1}),l(t(S),{value:"Hybrid"},{default:a(()=>[...e[54]||(e[54]=[m("Hybrid",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",Ct,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[55]||(e[55]=[m("Gear Type",-1)])]),_:1}),l(t(H),{modelValue:u.gearType,"onUpdate:modelValue":e[15]||(e[15]=r=>u.gearType=r)},{default:a(()=>[l(t(z),{class:"w-full h-10"},{default:a(()=>[l(t(G),{placeholder:"Select gear"})]),_:1}),l(t($),null,{default:a(()=>[l(t(S),{value:"Manual"},{default:a(()=>[...e[56]||(e[56]=[m("Manual",-1)])]),_:1}),l(t(S),{value:"Automatic"},{default:a(()=>[...e[57]||(e[57]=[m("Automatic",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])]),s("div",Vt,[l(t(C),{class:"block text-sm font-semibold text-heading"},{default:a(()=>[...e[59]||(e[59]=[m("Request Message",-1)])]),_:1}),l(t(ge),{modelValue:u.requestMessage,"onUpdate:modelValue":e[16]||(e[16]=r=>u.requestMessage=r),rows:3,placeholder:"Customer's message or notes...",class:"w-full"},null,8,["modelValue"])])]),_:1})]),_:1}),l(t(R),{class:"bg-surfaceSecondary border-border mb-4"},{default:a(()=>[l(t(Z),null,{default:a(()=>[l(t(ee),null,{default:a(()=>[...e[60]||(e[60]=[m("Create Task (Optional)",-1)])]),_:1})]),_:1}),l(t(L),{class:"space-y-3"},{default:a(()=>[e[65]||(e[65]=s("p",{class:"text-sub text-fluid-xs"},[m(" Convert this contact to a lead or opportunity. "),s("span",{class:"font-semibold text-body"},"Requires vehicle details.")],-1)),n.forceType?(E(),W(t(R),{key:1,class:"bg-white border-border"},{default:a(()=>[l(t(L),{class:"flex items-center gap-3"},{default:a(()=>[e[63]||(e[63]=s("i",{class:"fa-solid fa-info-circle text-primary text-sm"},null,-1)),s("div",null,[s("p",St," Converting to "+A(n.forceType==="lead"?"Lead":"Opportunity"),1)])]),_:1})]),_:1})):(E(),M("div",kt,[l(t(R),{class:Q(["flex-1 border-border",j.value?"cursor-pointer hover:border-primary/30":"cursor-not-allowed opacity-60"])},{default:a(()=>[l(t(L),{class:"flex items-center gap-3"},{default:a(()=>[l(t(ue),{modelValue:D.value,"onUpdate:modelValue":e[17]||(e[17]=r=>D.value=r),disabled:!j.value,label:""},null,8,["modelValue","disabled"]),s("div",null,[s("span",{class:Q(["text-fluid-xs font-bold",j.value?"text-heading":"text-sub"])}," Mark as Lead ",2),e[61]||(e[61]=s("p",{class:"text-fluid-xs text-sub"},"New lead task",-1))])]),_:1})]),_:1},8,["class"]),l(t(R),{class:Q(["flex-1 border-border",j.value?"cursor-pointer hover:border-primary/30":"cursor-not-allowed opacity-60"])},{default:a(()=>[l(t(L),{class:"flex items-center gap-3"},{default:a(()=>[l(t(ue),{modelValue:_.value,"onUpdate:modelValue":e[18]||(e[18]=r=>_.value=r),disabled:!j.value,label:""},null,8,["modelValue","disabled"]),s("div",null,[s("span",{class:Q(["text-fluid-xs font-bold",j.value?"text-heading":"text-sub"])}," Mark as Opportunity ",2),e[62]||(e[62]=s("p",{class:"text-fluid-xs text-sub"},"New opportunity",-1))])]),_:1})]),_:1},8,["class"])])),!j.value&&!n.forceType?(E(),W(t(R),{key:2,class:"bg-orange-50 border-orange-200"},{default:a(()=>[l(t(L),{class:"flex items-start gap-2"},{default:a(()=>[...e[64]||(e[64]=[s("i",{class:"fa-solid fa-exclamation-triangle text-orange-600 mt-0.5 text-sm"},null,-1),s("span",{class:"text-fluid-xs text-orange-700"},"Fill in vehicle details to enable lead/opportunity creation",-1)])]),_:1})]),_:1})):N("",!0)]),_:1})]),_:1})],32)),[[ce,()=>x.value=!1]])}}};export{At as _,Ue as u};
