import{p as i,d as V,r as y,c as j,i as B,a as d,j as E,b as t,k as f,q as M,v as Q,s as b,F as _,h as C,x as T,t as p,o as u,y as k,e as A}from"./index-aIgEv3db.js";import{_ as D}from"./PageHeader-DirRM9Ks.js";const w=(n=300)=>new Promise(s=>setTimeout(s,n)),F=async(n={})=>{await w();let s=[...i];if(n.search){const a=n.search.toLowerCase();s=s.filter(o=>{var x;return o.name.toLowerCase().includes(a)||o.email.toLowerCase().includes(a)||((x=o.company)==null?void 0:x.toLowerCase().includes(a))})}return{data:s,total:s.length}},P=async n=>{await w();const s=i.find(a=>a.id===parseInt(n));if(!s)throw new Error("Contact not found");return s},$=async n=>{await w();const s={id:i.length+1,...n,createdAt:new Date().toISOString()};return i.push(s),s},q=async(n,s)=>{await w();const a=i.findIndex(o=>o.id===parseInt(n));if(a===-1)throw new Error("Contact not found");return i[a]={...i[a],...s},i[a]},O=async n=>{await w();const s=i.findIndex(a=>a.id===parseInt(n));if(s===-1)throw new Error("Contact not found");return i.splice(s,1),{success:!0}},U=V("contacts",()=>{const n=y([]),s=y(null),a=y(!1),o=y(null),x=y(""),v=j(()=>n.value.length);async function e(){a.value=!0,o.value=null;try{const r=await F({search:x.value});n.value=r.data}catch(r){o.value=r.message}finally{a.value=!1}}async function l(r){a.value=!0,o.value=null;try{s.value=await P(r)}catch(c){o.value=c.message}finally{a.value=!1}}async function h(r){a.value=!0,o.value=null;try{const c=await $(r);return n.value.unshift(c),c}catch(c){throw o.value=c.message,c}finally{a.value=!1}}async function S(r,c){a.value=!0,o.value=null;try{const m=await q(r,c),g=n.value.findIndex(L=>L.id===r);return g!==-1&&(n.value[g]=m),m}catch(m){throw o.value=m.message,m}finally{a.value=!1}}async function I(r){a.value=!0,o.value=null;try{await O(r),n.value=n.value.filter(c=>c.id!==r)}catch(c){throw o.value=c.message,c}finally{a.value=!1}}function N(r){x.value=r,e()}return{contacts:n,currentContact:s,loading:a,error:o,searchQuery:x,totalContacts:v,loadContacts:e,loadContactById:l,addContact:h,modifyContact:S,removeContact:I,setSearchQuery:N}}),z={class:"page-container"},G={class:"p-4 md:p-8"},H={class:"mb-6 bg-gray-50 border border-gray-200 rounded-lg px-4 py-3"},J={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3"},K={class:"flex flex-wrap items-center gap-2 md:gap-3"},R={class:"w-full sm:w-auto sm:min-w-[260px] sm:max-w-md"},W={class:"relative"},X={class:"flex justify-end"},Y={key:0,class:"empty-state"},Z={key:1,class:"empty-state"},tt={key:2,class:"card overflow-hidden"},et={class:"overflow-x-auto -mx-4 md:mx-0"},st={class:"w-full"},at={class:"divide-y divide-gray-100"},nt={class:"px-3 md:px-6 py-3 whitespace-nowrap"},ot={class:"flex items-center gap-2 md:gap-3"},lt={class:"w-9 h-9 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold shrink-0"},rt={class:"min-w-0"},ct={class:"text-content-bold truncate max-w-[120px] md:max-w-none"},it={class:"px-3 md:px-6 py-3 text-content text-gray-600 whitespace-nowrap"},dt={class:"truncate block max-w-[100px]"},pt={class:"px-3 md:px-6 py-3 whitespace-nowrap"},ut={class:"text-content text-gray-600 truncate max-w-[150px]"},xt={class:"px-3 md:px-6 py-3 text-content text-gray-600 whitespace-nowrap"},yt={class:"px-3 md:px-6 py-3 whitespace-nowrap"},ft={class:"badge-ui bg-gray-100 text-gray-700 font-semibold"},mt={class:"px-3 md:px-6 py-3 whitespace-nowrap hidden xl:table-cell"},wt={class:"flex flex-wrap gap-1"},ht={key:0,class:"text-xs text-gray-400"},vt={class:"px-4 md:px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3"},gt={class:"text-sm text-gray-600"},Ct={__name:"Contacts",setup(n){const s=U(),a=y(""),o=y(!1);B(()=>{s.loadContacts()});const x=()=>{s.setSearchQuery(a.value)};return(v,e)=>(u(),d("div",z,[E(D,{title:"Contacts & Accounts",subtitle:`${f(s).totalContacts} contacts`},null,8,["subtitle"]),t("div",G,[t("div",H,[t("div",J,[t("div",K,[t("div",R,[t("div",W,[e[4]||(e[4]=t("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),M(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>a.value=l),onInput:x,type:"text",placeholder:"Search contacts...",class:"input-with-icon"},null,544),[[Q,a.value]])])]),e[5]||(e[5]=t("button",{class:"btn-secondary text-sm"},[t("i",{class:"fa-solid fa-filter mr-1"}),b(" Filters ")],-1)),e[6]||(e[6]=t("button",{class:"btn-secondary text-sm"}," Clear ",-1))]),t("div",X,[t("button",{onClick:e[1]||(e[1]=l=>o.value=!0),class:"btn-primary-lg"},[...e[7]||(e[7]=[t("i",{class:"fa-solid fa-plus"},null,-1),b(" Add new ",-1)])])])])]),f(s).loading?(u(),d("div",Y,[...e[8]||(e[8]=[t("i",{class:"fa-solid fa-spinner fa-spin text-4xl text-gray-400 mb-4"},null,-1),t("p",{class:"empty-state-text"},"Loading contacts...",-1)])])):f(s).contacts.length===0?(u(),d("div",Z,[...e[9]||(e[9]=[t("i",{class:"fa-solid fa-users empty-state-icon"},null,-1),t("p",{class:"empty-state-text"},"No contacts found",-1)])])):(u(),d("div",tt,[t("div",et,[t("table",st,[e[12]||(e[12]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",null,[t("th",{class:"px-3 md:px-6 py-3 text-left"},[t("input",{type:"checkbox",class:"rounded"})]),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Contact"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Company"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Email"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Phone"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Source"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap hidden xl:table-cell"},"Tags"),t("th",{class:"px-3 md:px-6 py-3"})])],-1)),t("tbody",at,[(u(!0),d(_,null,C(f(s).contacts,l=>(u(),d("tr",{key:l.id,class:"hover:bg-gray-50 cursor-pointer transition-colors"},[t("td",{class:"px-3 md:px-6 py-3 whitespace-nowrap",onClick:e[2]||(e[2]=k(()=>{},["stop"]))},[...e[10]||(e[10]=[t("input",{type:"checkbox",class:"rounded"},null,-1)])]),t("td",nt,[t("div",ot,[t("div",lt,p(l.initials),1),t("div",rt,[t("div",ct,p(l.name),1)])])]),t("td",it,[t("span",dt,p(l.company||"-"),1)]),t("td",pt,[t("div",ut,p(l.email),1)]),t("td",xt,p(l.phone),1),t("td",yt,[t("span",ft,p(l.source),1)]),t("td",mt,[t("div",wt,[(u(!0),d(_,null,C(l.tags,h=>(u(),d("span",{key:h,class:"badge-ui bg-blue-50 text-blue-700 font-semibold"},p(h),1))),128)),!l.tags||l.tags.length===0?(u(),d("span",ht,"-")):A("",!0)])]),t("td",{class:"px-3 md:px-6 py-3 whitespace-nowrap",onClick:e[3]||(e[3]=k(()=>{},["stop"]))},[...e[11]||(e[11]=[t("button",{class:"text-gray-400 hover:text-gray-600"},[t("i",{class:"fa-solid fa-ellipsis-vertical"})],-1)])])]))),128))])])]),t("div",vt,[t("div",gt," Showing "+p(f(s).contacts.length)+" of "+p(f(s).totalContacts)+" contacts ",1),e[13]||(e[13]=T('<div class="flex items-center gap-2 flex-wrap"><button class="btn-secondary text-sm whitespace-nowrap">Previous</button><button class="px-3 py-2 text-sm bg-blue-600 text-white rounded-lg font-medium">1</button><button class="btn-secondary text-sm">2</button><button class="btn-secondary text-sm whitespace-nowrap">Next</button></div>',1))])]))])]))}};export{Ct as default};
