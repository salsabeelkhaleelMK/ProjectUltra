import{u as G,r as k,c as S,f as Te,a as De,b as Ce,d as n,o as r,e,n as U,t as x,g as w,F as A,h as Z,i as q,j as ee,k as K,w as he,l as Ae,m as we,p as Se,v as Oe,q as J,s as H,x as E,y as _,z as Re,A as Me}from"./index-D-GV69Dn.js";import{f as je,a as Ne,u as Ie}from"./users-D9zJDDml.js";import{z as W,n as X}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-3RNqBGno.js";import{_ as Ue}from"./ReassignUserModal-B8fbsoa_.js";import{f as Be,a as Pe,b as Le}from"./dashboard-BjEi4-my.js";const _e="actionable-questions-dismissals";function ke(){try{const p=localStorage.getItem(_e);return p?JSON.parse(p):[]}catch{return[]}}function Ve(p,b){const u=ke();u.some(m=>m.questionId===p&&m.userId===b)||(u.push({id:`dismissed-${p}-user-${b}`,questionId:p,userId:b,dismissedAt:new Date().toISOString()}),localStorage.setItem(_e,JSON.stringify(u)))}function ye(p,b){return ke().some(f=>f.questionId===p&&f.userId===b)}function $e(){const p=G(),b=k([]),u=k(!1),f=S(()=>p.currentUser),m=S(()=>{var y;return(y=p.currentUser)==null?void 0:y.role}),v=S(()=>f.value?b.value.filter(T=>!ye(T.id,f.value.id)).slice(0,5):[]),o=S(()=>f.value?b.value.filter(y=>!ye(y.id,f.value.id)).length:0);async function i(){if(!f.value){b.value=[];return}if(!p.isSalesman()&&!p.isManager()&&!p.isOperator()){b.value=[];return}u.value=!0;try{const y=await Te(f.value.id,m.value);b.value=y}catch(y){console.error("Error loading actionable questions:",y),b.value=[]}finally{u.value=!1}}function h(y){b.value=b.value.filter(T=>T.id!==y)}function M(y){b.value.unshift(y)}return{questions:v,totalQuestionsCount:o,loading:u,loadQuestions:i,dismissQuestion:h,addFollowUpQuestion:M}}function qe(){const p=G(),{questions:b,totalQuestionsCount:u,loading:f,loadQuestions:m}=$e(),v=k([]),o=k([]),i=k([]),h=k([]),M=k(!0),y=k(!0),T=S(()=>{const l=o.value.map(d=>({...d,type:"lead",taskType:"Lead",dueTime:d.nextActionDue?new Date(d.nextActionDue).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):null,dueDate:d.nextActionDue?new Date(d.nextActionDue):null})),g=i.value.map(d=>({...d,type:"opportunity",taskType:"Opportunity",dueTime:d.expectedCloseDate?new Date(d.expectedCloseDate).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):null,dueDate:d.expectedCloseDate?new Date(d.expectedCloseDate):null}));return[...l,...g]}),O=S(()=>{const l=[],g=v.value.map(s=>({...s,todoType:"appointment",sortTime:new Date(s.start).getTime(),time:new Date(s.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),date:new Date(s.start)}));l.push(...g);const d=T.value.map(s=>{const t=s.dueDate||(s.nextActionDue?new Date(s.nextActionDue):null),c=t&&t<new Date;return{...s,todoType:"task",sortTime:t?t.getTime():0,isOverdue:c,priority:s.priority==="Hot"?1:2}});return l.push(...d),l.sort((s,t)=>s.todoType==="appointment"&&t.todoType!=="appointment"?-1:s.todoType!=="appointment"&&t.todoType==="appointment"?1:s.todoType==="appointment"&&t.todoType==="appointment"?s.sortTime-t.sortTime:s.isOverdue&&!t.isOverdue?-1:!s.isOverdue&&t.isOverdue?1:s.priority!==t.priority?s.priority-t.priority:s.sortTime-t.sortTime)}),R=S(()=>v.value.map(l=>({...l,time:new Date(l.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),date:new Date(l.start)})).sort((l,g)=>l.date.getTime()-g.date.getTime())),D=S(()=>T.value.filter(l=>{const g=l.dueDate||(l.nextActionDue?new Date(l.nextActionDue):null);if(!g)return!1;const d=new Date;d.setHours(0,0,0,0);const s=new Date(d);s.setDate(s.getDate()+1);const t=new Date(g);return t.setHours(0,0,0,0),t>=d&&t<s}).sort((l,g)=>{var a,c;const d=new Date,s=l.dueDate<d,t=g.dueDate<d;return s&&!t?-1:!s&&t?1:l.priority!==g.priority?(l.priority==="Hot"?1:2)-(g.priority==="Hot"?1:2):(((a=l.dueDate)==null?void 0:a.getTime())||0)-(((c=g.dueDate)==null?void 0:c.getTime())||0)})),$=S(()=>b.value);async function C(){Promise.all([m(),je().then(l=>{v.value=l,M.value=!1}),Promise.all([p.canAccessLeads()?De().then(l=>{o.value=l}):Promise.resolve(),p.canAccessOpportunities()?Ce().then(l=>{i.value=l}):Promise.resolve()]).then(()=>{y.value=!1}),Ne(1).then(l=>{h.value=l})]).catch(l=>{console.error("Error loading dashboard:",l),M.value=!1,y.value=!1})}return{notifications:$,totalNotificationsCount:u,appointmentsToday:R,tasksDueToday:D,prioritizedTodos:O,loadingNotifications:f,loadingAppointments:S(()=>M.value),loadingTasks:S(()=>y.value),loadDashboard:C}}const Qe={class:"flex items-center gap-2 mb-2"},He={class:"text-xs"},ze={class:"text-xs"},Ee={class:"ml-auto flex items-center gap-2"},Ge={key:1,class:"bg-surface border border-border rounded-lg shadow-lg p-1.5 flex items-center gap-1.5 z-10"},Ye=["innerHTML"],Fe={class:"flex gap-2 flex-wrap justify-end mt-3"},Je={__name:"ActionableQuestionCard",props:{question:{type:Object,required:!0}},emits:["answer-yes","answer-no","reassign","view-task","dismiss"],setup(p,{emit:b}){const u=p,f=b,m=k(!1),v=k(!1),o=G();Ie();const i=()=>{var d,s,t;const g=((d=u.question.opportunity)==null?void 0:d.assignee)||((s=u.question.lead)==null?void 0:s.assignee);return g?g===((t=o.currentUser)==null?void 0:t.name)?"me":g:"Unknown"},h=()=>{const g=u.question.customer.name,d=u.question.question,s=`<a href="#" class="font-bold text-brand-red hover:text-brand-red-dark hover:underline" onclick="event.preventDefault()">${g}</a>`;return d.replace(new RegExp(g,"g"),s)},M=g=>g===1?"bg-red-50 text-red-600 border-red-100":g<=3?"bg-amber-50 text-amber-600 border-amber-100":"bg-emerald-50 text-emerald-600 border-emerald-100",y=g=>g===1?"CRITICAL":g<=3?"HIGH":"MEDIUM",T=()=>{if(!u.question.createdAt&&!u.question.appointmentDate)return"Just now";const g=new Date(u.question.createdAt||u.question.appointmentDate),s=new Date-g,t=Math.floor(s/6e4),a=Math.floor(t/60),c=Math.floor(a/24);return t<1?"Just now":t<60?`${t} min ago`:a<24?`${a} hours ago`:c===1?"1 day ago":c<7?`${c} days ago`:`${Math.floor(c/7)} weeks ago`},O=()=>f("answer-yes",u.question),R=()=>f("answer-no",u.question),D=()=>f("reassign",u.question),$=()=>f("view-task",u.question),C=g=>{g.target.tagName==="A"&&(g.preventDefault(),$())},l=()=>{v.value=!0,setTimeout(()=>{f("dismiss",u.question)},200)};return(g,d)=>(r(),n("div",{class:U(["bg-surface border border-border rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all",v.value?"opacity-50":""])},[e("div",Qe,[e("span",{class:U(["text-xs font-bold px-2 py-0.5 rounded border whitespace-nowrap",M(p.question.priority)])},x(y(p.question.priority)),3),e("span",He,x(T()),1),e("span",ze,"• Owner: "+x(i()),1),e("div",Ee,[m.value?(r(),n("div",Ge,[d[3]||(d[3]=e("span",{class:"text-xs whitespace-nowrap"},"Dismiss?",-1)),e("button",{onClick:l,class:"px-2 py-0.5 text-xs font-medium text-rose-700 bg-rose-50 hover:bg-rose-100 border border-rose-200 rounded transition-colors"}," Yes "),e("button",{onClick:d[1]||(d[1]=s=>m.value=!1),class:"px-2 py-0.5 text-xs font-medium text-muted-foreground hover:text-foreground transition-colors"}," No ")])):(r(),n("button",{key:0,onClick:d[0]||(d[0]=s=>m.value=!0),class:"w-7 h-7 flex items-center justify-center rounded text-muted-foreground hover:text-muted-foreground hover:bg-muted transition-colors",title:"Dismiss"},[...d[2]||(d[2]=[e("i",{class:"fa-solid fa-xmark text-sm"},null,-1)])]))])]),e("div",{class:"mb-2",onClick:C},[e("p",{class:"text-foreground text-sm mb-1",innerHTML:h()},null,8,Ye)]),e("div",Fe,[p.question.type==="appointment-followup"?(r(),n(A,{key:0},[e("button",{onClick:O,class:"px-3 py-1.5 text-xs font-medium !bg-brand-dark !text-white border border-brand-dark rounded-xl hover:!bg-brand-darkDarker hover:border-brand-darkDarker transition-colors"}," Yes "),e("button",{onClick:R,class:"px-3 py-1.5 text-xs font-medium bg-surface text-brand-dark border border-D1D5DB rounded-xl hover:brightness-95 transition-colors"}," No ")],64)):p.question.type==="ns-followup"?(r(),n(A,{key:1},[e("button",{onClick:O,class:"px-3 py-1.5 text-xs font-medium !bg-brand-dark !text-white border border-brand-dark rounded-xl hover:!bg-brand-darkDarker hover:border-brand-darkDarker transition-colors"}," Yes "),e("button",{onClick:R,class:"px-3 py-1.5 text-xs font-medium bg-surface text-brand-dark border border-D1D5DB rounded-xl hover:brightness-95 transition-colors"}," No "),e("button",{onClick:D,class:"px-3 py-1.5 text-xs font-medium bg-surface text-brand-dark border border-D1D5DB rounded-xl hover:brightness-95 transition-colors"}," Reassign ")],64)):p.question.type==="offer-followup"?(r(),n("button",{key:2,onClick:$,class:"px-3 py-1.5 text-xs font-medium !bg-brand-dark !text-white border border-brand-dark rounded-xl hover:!bg-brand-darkDarker hover:border-brand-darkDarker transition-colors"}," View Opportunity ")):p.question.type==="stuck-opportunity"?(r(),n(A,{key:3},[e("button",{onClick:O,class:"px-3 py-1.5 text-xs font-medium !bg-brand-dark !text-white border border-brand-dark rounded-xl hover:!bg-brand-darkDarker hover:border-brand-darkDarker transition-colors"}," Yes "),e("button",{onClick:R,class:"px-3 py-1.5 text-xs font-medium bg-surface text-brand-dark border border-D1D5DB rounded-xl hover:brightness-95 transition-colors"}," No "),e("button",{onClick:D,class:"px-3 py-1.5 text-xs font-medium bg-surface text-brand-dark border border-D1D5DB rounded-xl hover:brightness-95 transition-colors"}," Reassign ")],64)):p.question.type==="lead-qualification-urgency"?(r(),n(A,{key:4},[e("button",{onClick:O,class:"px-3 py-1.5 text-xs font-medium !bg-brand-dark !text-white border border-brand-dark rounded-xl hover:!bg-brand-darkDarker hover:border-brand-darkDarker transition-colors"}," Yes "),e("button",{onClick:R,class:"px-3 py-1.5 text-xs font-medium bg-surface text-brand-dark border border-D1D5DB rounded-xl hover:brightness-95 transition-colors"}," No "),e("button",{onClick:D,class:"px-3 py-1.5 text-xs font-medium bg-surface text-brand-dark border border-D1D5DB rounded-xl hover:brightness-95 transition-colors"}," Reassign ")],64)):w("",!0)])],2))}},We={class:"space-y-3"},Xe={key:0,class:"text-center py-8 text-muted-foreground"},Ke=["onClick"],Ze={class:"flex items-start justify-between gap-4"},et={class:"flex-1 min-w-0"},tt={class:"flex items-center gap-2 mb-1"},st={class:"text-sm font-semibold text-foreground mb-1"},ot={class:"text-xs mb-2"},rt={key:0},nt={class:"flex items-center gap-2 text-xs text-muted-foreground"},it={key:0},at={key:1},lt=["onClick"],dt={__name:"TodaysAppointments",props:{appointments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(p){const b=Z(),u=v=>{const o=new Date,h=(new Date(v)-o)/(1e3*60*60);return h<0?"bg-red-100 text-red-700 border-red-200":h<2?"bg-orange-100 text-orange-700 border-orange-200":"bg-blue-100 text-blue-700 border-blue-200"},f=v=>({confirmed:"bg-green-50 text-green-700 border-green-200",scheduled:"bg-blue-50 text-blue-700 border-blue-200",pending:"bg-yellow-50 text-yellow-700 border-yellow-200",cancelled:"bg-red-50 text-red-700 border-red-200","no-show":"bg-muted text-muted-foreground border"})[v]||"bg-muted text-muted-foreground border",m=v=>{v.opportunityId?b.push(`/tasks/${v.opportunityId}?type=opportunity`):v.leadId?b.push(`/tasks/${v.leadId}?type=lead`):b.push("/calendar")};return(v,o)=>(r(),n("div",We,[p.loading?(r(),n(A,{key:0},q(3,i=>e("div",{key:`skeleton-${i}`,class:"bg-surface border border-border rounded-lg p-4"},[...o[0]||(o[0]=[ee('<div class="flex items-start justify-between gap-4"><div class="flex-1 min-w-0 space-y-2"><div class="flex items-center gap-2"><div class="h-5 bg-surfaceTertiary rounded w-16 animate-pulse"></div><div class="h-5 bg-surfaceTertiary rounded w-20 animate-pulse"></div></div><div class="h-4 bg-surfaceTertiary rounded w-32 animate-pulse"></div><div class="h-3 bg-surfaceTertiary rounded w-24 animate-pulse"></div><div class="h-3 bg-surfaceTertiary rounded w-20 animate-pulse"></div></div><div class="h-4 w-4 bg-surfaceTertiary rounded animate-pulse"></div></div>',1)])])),64)):(r(),n(A,{key:1},[p.appointments.length===0?(r(),n("div",Xe,[...o[1]||(o[1]=[e("i",{class:"fa-solid fa-calendar-check text-4xl mb-2 text-gray-300"},null,-1),e("p",{class:"text-sm"},"No appointments scheduled for today",-1)])])):w("",!0),(r(!0),n(A,null,q(p.appointments,i=>(r(),n("div",{key:i.id,onClick:h=>m(i),class:"bg-surface border border-border rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all cursor-pointer"},[e("div",Ze,[e("div",et,[e("div",tt,[e("span",{class:U(["text-xs font-bold px-2 py-0.5 rounded",u(i.date)])},x(i.time),3),e("span",{class:U(["text-xs font-medium px-2 py-0.5 rounded border",f(i.status)])},x(i.status),3)]),e("h4",st,x(i.customer||i.title),1),e("p",ot,[K(x(i.type)+" ",1),i.vehicle?(r(),n("span",rt," - "+x(i.vehicle),1)):w("",!0)]),e("div",nt,[o[2]||(o[2]=e("i",{class:"fa-solid fa-user text-muted-foreground"},null,-1)),i.assigneeType==="team"?(r(),n("span",it,x(i.team)+" Team ",1)):(r(),n("span",at,x(i.assignee||"Unassigned"),1))])]),e("button",{onClick:he(h=>m(i),["stop"]),class:"text-muted-foreground hover:text-blue-600 transition-colors"},[...o[3]||(o[3]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)])],8,lt)])],8,Ke))),128))],64))]))}},ut={class:"space-y-3"},ct={key:0,class:"text-center py-8 text-muted-foreground"},pt=["onClick"],ft={class:"flex items-start justify-between gap-4"},vt={class:"flex-1 min-w-0"},gt={class:"flex items-center gap-2 mb-1"},xt={key:0,class:"text-xs font-bold px-2 py-0.5 rounded bg-red-50 text-red-700 border border-red-200 flex items-center gap-1"},mt={key:1,class:"text-xs font-medium px-2 py-0.5 rounded bg-muted text-muted-foreground border border-border"},bt={key:3,class:"text-xs font-bold px-2 py-0.5 rounded bg-red-100 text-red-700 border border-red-200"},yt={class:"text-sm font-semibold text-foreground mb-1"},ht={class:"text-xs mb-2"},wt={key:0},_t={class:"flex items-center gap-2 text-xs text-muted-foreground"},kt={key:0,class:"text-muted-foreground"},$t=["onClick"],Tt={__name:"TodaysTasks",props:{tasks:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(p){const b=Z(),u=m=>{if(!m)return"bg-muted text-muted-foreground border";const v=new Date,i=(new Date(m)-v)/(1e3*60*60);return i<0?"bg-red-100 text-red-700 border-red-200":i<2?"bg-orange-100 text-orange-700 border-orange-200":"bg-blue-100 text-blue-700 border-blue-200"},f=m=>{b.push(`/tasks/${m.id}?type=${m.type}`)};return(m,v)=>(r(),n("div",ut,[p.loading?(r(),n(A,{key:0},q(3,o=>e("div",{key:`skeleton-${o}`,class:"bg-surface border border-border rounded-lg p-4"},[...v[0]||(v[0]=[ee('<div class="flex items-start justify-between gap-4"><div class="flex-1 min-w-0 space-y-2"><div class="flex items-center gap-2"><div class="h-5 bg-surfaceTertiary rounded w-16 animate-pulse"></div><div class="h-5 bg-surfaceTertiary rounded w-20 animate-pulse"></div></div><div class="h-4 bg-surfaceTertiary rounded w-32 animate-pulse"></div><div class="h-3 bg-surfaceTertiary rounded w-24 animate-pulse"></div><div class="flex items-center gap-2"><div class="h-4 bg-surfaceTertiary rounded w-16 animate-pulse"></div><div class="h-3 bg-surfaceTertiary rounded w-20 animate-pulse"></div></div></div><div class="h-4 w-4 bg-surfaceTertiary rounded animate-pulse"></div></div>',1)])])),64)):(r(),n(A,{key:1},[p.tasks.length===0?(r(),n("div",ct,[...v[1]||(v[1]=[e("i",{class:"fa-solid fa-tasks text-4xl mb-2 text-gray-300"},null,-1),e("p",{class:"text-sm"},"No tasks due today",-1)])])):w("",!0),(r(!0),n(A,null,q(p.tasks,o=>{var i;return r(),n("div",{key:`${o.type}-${o.id}`,onClick:h=>f(o),class:"bg-surface border border-border rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all cursor-pointer"},[e("div",ft,[e("div",vt,[e("div",gt,[o.priority==="Hot"?(r(),n("span",xt,[...v[2]||(v[2]=[e("i",{class:"fa-solid fa-fire text-xs"},null,-1),K(" HOT ",-1)])])):(r(),n("span",mt," Normal ")),o.dueTime?(r(),n("span",{key:2,class:U(["text-xs font-bold px-2 py-0.5 rounded",u(o.dueDate)])},x(o.dueTime),3)):w("",!0),o.isOverdue?(r(),n("span",bt," OVERDUE ")):w("",!0)]),e("h4",yt,x(((i=o.customer)==null?void 0:i.name)||"Unknown Customer"),1),e("p",ht,[K(x(o.taskType)+" ",1),o.requestedCar||o.vehicle?(r(),n("span",wt," - "+x(o.requestedCar?`${o.requestedCar.brand} ${o.requestedCar.model}`:`${o.vehicle.brand} ${o.vehicle.model}`),1)):w("",!0)]),e("div",_t,[e("span",{class:U(["px-2 py-0.5 rounded border text-xs font-bold uppercase",o.type==="lead"?"bg-blue-50 text-blue-700 border-blue-200":"bg-purple-50 text-purple-700 border-purple-200"])},x(o.type==="lead"?"Lead":"Opportunity"),3),o.stage||o.displayStage?(r(),n("span",kt,x(o.displayStage||o.stage),1)):w("",!0)])]),e("button",{onClick:he(h=>f(o),["stop"]),class:"text-muted-foreground hover:text-blue-600 transition-colors"},[...v[3]||(v[3]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)])],8,$t)])],8,pt)}),128))],64))]))}},Dt={class:"rounded-lg flex flex-col bg-muted"},Ct={class:"px-4 py-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 shrink-0"},At={class:"bg-white rounded-lg p-4 shadow-nsc-card flex flex-col"},St={key:0,class:"space-y-4"},Ot={key:1,class:"space-y-4"},Rt={class:"bg-surface rounded-lg p-3 border border-border"},Mt={class:"flex items-center justify-between mb-2"},jt={class:"text-xs text-gray-600"},Nt={class:"bg-surface rounded-lg p-3 border border-border"},It={class:"flex items-center justify-between mb-2"},Ut={class:"w-full bg-gray-200 rounded-full h-2 mt-2"},Bt={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Pt={class:"bg-surface rounded-lg p-3 border border-border"},Lt={class:"flex items-start justify-between gap-2"},Vt={class:"flex-1"},qt={class:"text-sm font-bold text-gray-900 mb-1"},Qt={key:0,class:"h-12 w-16 flex-shrink-0"},Ht={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},zt=["d"],Et=["d"],Gt={class:"bg-surface rounded-lg p-3 border border-border"},Yt={class:"flex items-start justify-between gap-2"},Ft={class:"flex-1"},Jt={class:"text-sm font-bold text-gray-900 mb-1"},Wt={key:0,class:"h-12 w-16 flex-shrink-0"},Xt={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},Kt=["d"],Zt=["d"],es={key:2,class:"space-y-4"},ts={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ss={class:"bg-surface rounded-lg p-3 border border-border"},os={class:"flex items-start justify-between gap-2"},rs={class:"flex-1"},ns={class:"text-sm font-bold text-gray-900 mb-1"},is={key:0,class:"h-12 w-16 flex-shrink-0"},as={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},ls=["d"],ds=["d"],us={class:"bg-surface rounded-lg p-3 border border-border"},cs={class:"flex items-start justify-between gap-2"},ps={class:"flex-1"},fs={class:"text-sm font-bold text-gray-900 mb-1"},vs={key:0,class:"h-12 w-16 flex-shrink-0"},gs={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},xs=["d"],ms=["d"],bs={class:"space-y-2"},ys={class:"flex items-center justify-between text-xs"},hs={class:"font-bold"},ws={class:"w-full bg-gray-200 rounded-full h-2"},_s={class:"flex items-center justify-between text-xs"},ks={class:"font-bold"},$s={class:"w-full bg-gray-200 rounded-full h-2"},Ts={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Ds={class:"bg-surface rounded-lg p-3 border border-border"},Cs={class:"flex items-start justify-between gap-2"},As={class:"flex-1"},Ss={class:"text-sm font-bold text-gray-900 mb-1"},Os={key:0,class:"h-12 w-16 flex-shrink-0"},Rs={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},Ms=["d"],js=["d"],Ns={class:"bg-surface rounded-lg p-3 border border-border"},Is={class:"flex items-start justify-between gap-2"},Us={class:"flex-1"},Bs={class:"text-sm font-bold text-gray-900 mb-1"},Ps={key:0,class:"h-12 w-16 flex-shrink-0"},Ls={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},Vs=["d"],qs=["d"],Qs={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Hs={class:"bg-surface rounded-lg p-3 border border-border"},zs={class:"flex items-start justify-between gap-2"},Es={class:"flex-1"},Gs={class:"text-sm font-bold text-gray-900 mb-1"},Ys={key:0,class:"h-12 w-16 flex-shrink-0"},Fs={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},Js=["d"],Ws=["d"],Xs={class:"bg-surface rounded-lg p-3 border border-border"},Ks={class:"flex items-start justify-between gap-2"},Zs={class:"flex-1"},eo={class:"text-sm font-bold text-red-600 mb-1"},to={key:0,class:"h-12 w-16 flex-shrink-0"},so={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},oo=["d"],ro=["d"],no={key:3,class:"space-y-4"},io={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},ao={class:"bg-surface border border-border rounded-lg p-6 flex flex-col items-center justify-center"},lo={class:"relative w-24 h-24 sm:w-28 sm:h-28 mb-3"},uo={class:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100"},co=["stroke-dasharray"],po={class:"absolute inset-0 flex items-center justify-center"},fo={class:"text-center"},vo={class:"text-sm font-bold text-green-700"},go={class:"text-xs text-green-600 text-center"},xo={class:"lg:col-span-2 bg-surface rounded-lg p-6 md:p-8"},mo={class:"space-y-3"},bo={class:"flex items-center gap-3 mb-1"},yo={class:"text-xs font-medium text-muted-foreground w-32 sm:w-40 flex-shrink-0"},ho={class:"flex-1 relative"},wo={class:"w-full bg-gray-200 rounded-full h-6 overflow-hidden"},_o={class:"text-xs font-bold text-gray-900"},ko={class:"text-xs font-bold text-gray-900 w-12 text-right flex-shrink-0"},$o={key:4,class:"text-center py-8 text-gray-500"},To={__name:"PerformanceWidget",setup(p){const b=G(),u=S(()=>b.userRole()),f=S(()=>{var s;return(s=b.currentUser)==null?void 0:s.id}),m=k("month"),v=k(!0),o=k(null),i=k(null),h=k(null),M=S(()=>{var a;if(!((a=o.value)!=null&&a.slaCompliance))return 0;const{completed:s,total:t}=o.value.slaCompliance;return t>0?Math.round(s/t*100*10)/10:0}),y=(s=!1)=>{var a,c;const t=((c=(a=o.value)==null?void 0:a.tasksPerDay)==null?void 0:c.current)||0;return t>=40?s?"bg-green-600":"text-green-600":t>=20?s?"bg-yellow-600":"text-yellow-600":s?"bg-red-600":"text-red-600"},T=s=>{var c,j;if(!i.value)return 0;const t=((c=i.value.revenue)==null?void 0:c[s])||0,a=((j=i.value.revenueTargets)==null?void 0:j[s])||1;return Math.round(t/a*100)},O=s=>s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(0)+"k":s.toString(),R=s=>s>=1e3?(s/1e3).toFixed(1)+"k":s.toString(),D=s=>({red:"bg-red-300",orange:"bg-orange-300",blue:"bg-blue-300",gray:"bg-gray-300"})[s]||"bg-gray-300",$=s=>{var t,a,c;return i.value?s==="contractsClosed"?((t=i.value.contractsClosed)==null?void 0:t[`${m.value}Trend`])||null:s==="revenue"?((a=i.value.revenue)==null?void 0:a[`${m.value}Trend`])||null:s==="newOpportunities"&&((c=i.value.newOpportunities)==null?void 0:c[`${m.value}Trend`])||null:null},C=s=>{if(!s||s.length===0)return"";const t=Math.max(...s),a=Math.min(...s),c=t-a||1,j=100,Q=40,B=4,P=s.map((L,N)=>({x:N/(s.length-1)*(j-B*2)+B,y:Q-B-(L-a)/c*(Q-B*2)}));if(P.length<2)return"";let z=`M ${P[0].x},${P[0].y}`;for(let L=0;L<P.length-1;L++){const N=P[L],V=P[L+1],Y=N.x+(V.x-N.x)/2,F=N.x+(V.x-N.x)/2;z+=` C ${Y},${N.y} ${F},${V.y} ${V.x},${V.y}`}return z},l=s=>{const t=C(s);if(!t)return"";const a=100,c=40,j=4,Q=j,B=a-j;return`${t} L ${B},${c} L ${Q},${c} Z`},g=s=>s>=20?"Excellent performance":s>=15?"Good performance":s>=10?"Average performance":"Needs improvement",d=async()=>{v.value=!0;try{u.value==="operator"?o.value=await Be(f.value,m.value):u.value==="salesman"?i.value=await Pe(f.value,m.value):u.value==="manager"&&(h.value=await Le(m.value))}catch(s){console.error("Error loading performance metrics:",s)}finally{v.value=!1}};return Ae([f,u],()=>{d()},{immediate:!1}),we(()=>{d()}),(s,t)=>{var a,c,j,Q,B,P,z,L,N,V,Y,F,te,se,oe,re,ne,ie,ae,le,de,ue,ce,pe,fe,ve,ge,xe,me,be;return r(),n("div",Dt,[e("div",Ct,[t[2]||(t[2]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-chart-line text-foreground"}),e("h2",{class:"text-sm font-medium text-foreground leading-5"},"Performance")],-1)),Se(e("select",{"onUpdate:modelValue":t[0]||(t[0]=I=>m.value=I),onChange:d,class:"input text-xs w-full sm:w-auto"},[...t[1]||(t[1]=[e("option",{value:"month"},"Month",-1),e("option",{value:"quarter"},"Quarter",-1),e("option",{value:"year"},"Year",-1)])],544),[[Oe,m.value]])]),e("div",At,[v.value?(r(),n("div",St,[(r(),n(A,null,q(4,I=>e("div",{key:`skeleton-${I}`,class:"h-16 bg-gray-100 rounded animate-pulse"})),64))])):u.value==="operator"?(r(),n("div",Ot,[e("div",Rt,[e("div",Mt,[t[3]||(t[3]=e("span",{class:"text-xs font-medium text-muted-foreground"},"SLA Compliance",-1)),e("span",{class:U(["text-xs font-bold",M.value>=90?"text-green-600":"text-yellow-600"])},x(M.value)+"% ",3)]),e("div",jt,x(((c=(a=o.value)==null?void 0:a.slaCompliance)==null?void 0:c.withinSLA)||0)+" / "+x(((Q=(j=o.value)==null?void 0:j.slaCompliance)==null?void 0:Q.total)||0)+" tasks completed within SLA ",1)]),e("div",Nt,[e("div",It,[t[4]||(t[4]=e("span",{class:"text-xs font-medium text-muted-foreground"},"Tasks Per Day",-1)),e("span",{class:U(["text-xs font-bold",y()])},x(((P=(B=o.value)==null?void 0:B.tasksPerDay)==null?void 0:P.current)||0)+" / "+x(((L=(z=o.value)==null?void 0:z.tasksPerDay)==null?void 0:L.target)||0),3)]),e("div",Ut,[e("div",{class:U(["h-2 rounded-full transition-all",y(!0)]),style:J({width:`${Math.min((((V=(N=o.value)==null?void 0:N.tasksPerDay)==null?void 0:V.current)||0)/50*100,100)}%`})},null,6)]),t[5]||(t[5]=e("div",{class:"text-xs text-gray-500 mt-1"},"Target: 20-50 tasks/day",-1))]),e("div",Bt,[e("div",Pt,[e("div",Lt,[e("div",Vt,[t[6]||(t[6]=e("div",{class:"text-xs text-gray-500 mb-1"},"Appointments Reserved",-1)),e("div",qt,x(((Y=o.value)==null?void 0:Y.appointmentsReserved)||0),1)]),(F=o.value)!=null&&F.appointmentsReservedTrend?(r(),n("div",Qt,[(r(),n("svg",Ht,[t[7]||(t[7]=e("defs",null,[e("linearGradient",{id:"gradient-appointments",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0"}})])],-1)),e("path",{d:l(o.value.appointmentsReservedTrend),fill:"url(#gradient-appointments)",class:"transition-all duration-700"},null,8,zt),e("path",{d:C(o.value.appointmentsReservedTrend),stroke:"var(--brand-blue)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,Et)]))])):w("",!0)])]),e("div",Gt,[e("div",Yt,[e("div",Ft,[t[8]||(t[8]=e("div",{class:"text-xs text-gray-500 mb-1"},"Lead-to-Opportunity Rate",-1)),e("div",Jt,x(((te=o.value)==null?void 0:te.leadToOpportunityConversion)||0)+"%",1)]),(se=o.value)!=null&&se.leadToOpportunityConversionTrend?(r(),n("div",Wt,[(r(),n("svg",Xt,[t[9]||(t[9]=e("defs",null,[e("linearGradient",{id:"gradient-lead-opp",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--color-success)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--color-success)","stop-opacity":"0"}})])],-1)),e("path",{d:l(o.value.leadToOpportunityConversionTrend),fill:"url(#gradient-lead-opp)",class:"transition-all duration-700"},null,8,Kt),e("path",{d:C(o.value.leadToOpportunityConversionTrend),stroke:"var(--color-success)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,Zt)]))])):w("",!0)])])])])):u.value==="salesman"?(r(),n("div",es,[e("div",ts,[e("div",ss,[e("div",os,[e("div",rs,[t[10]||(t[10]=e("div",{class:"text-xs text-gray-500 mb-1"},"Contracts Closed",-1)),e("div",ns,x(((re=(oe=i.value)==null?void 0:oe.contractsClosed)==null?void 0:re[m.value])||0),1)]),$("contractsClosed")?(r(),n("div",is,[(r(),n("svg",as,[t[11]||(t[11]=e("defs",null,[e("linearGradient",{id:"gradient-contracts",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--color-success)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--color-success)","stop-opacity":"0"}})])],-1)),e("path",{d:l($("contractsClosed")),fill:"url(#gradient-contracts)",class:"transition-all duration-700"},null,8,ls),e("path",{d:C($("contractsClosed")),stroke:"var(--color-success)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,ds)]))])):w("",!0)])]),e("div",us,[e("div",cs,[e("div",ps,[t[12]||(t[12]=e("div",{class:"text-xs text-gray-500 mb-1"},"Revenue",-1)),e("div",fs,"€"+x(O(((ie=(ne=i.value)==null?void 0:ne.revenue)==null?void 0:ie[m.value])||0)),1)]),$("revenue")?(r(),n("div",vs,[(r(),n("svg",gs,[t[13]||(t[13]=e("defs",null,[e("linearGradient",{id:"gradient-revenue",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0"}})])],-1)),e("path",{d:l($("revenue")),fill:"url(#gradient-revenue)",class:"transition-all duration-700"},null,8,xs),e("path",{d:C($("revenue")),stroke:"var(--brand-blue)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,ms)]))])):w("",!0)])])]),e("div",bs,[e("div",ys,[t[14]||(t[14]=e("span",{class:"text-muted-foreground"},"Monthly Target",-1)),e("span",hs,x(T("month"))+"%",1)]),e("div",ws,[e("div",{class:"h-2 rounded-full bg-brand-blue transition-all",style:J({width:`${Math.min(T("month"),100)}%`})},null,4)]),e("div",_s,[t[15]||(t[15]=e("span",{class:"text-muted-foreground"},"Quarterly Target",-1)),e("span",ks,x(T("quarter"))+"%",1)]),e("div",$s,[e("div",{class:"h-2 rounded-full bg-brand-blue transition-all",style:J({width:`${Math.min(T("quarter"),100)}%`})},null,4)])]),e("div",Ts,[e("div",Ds,[e("div",Cs,[e("div",As,[t[16]||(t[16]=e("div",{class:"text-xs text-gray-500 mb-1"},"Pipeline Value",-1)),e("div",Ss,"€"+x(O(((ae=i.value)==null?void 0:ae.pipelineValue)||0)),1)]),(le=i.value)!=null&&le.pipelineValueTrend?(r(),n("div",Os,[(r(),n("svg",Rs,[t[17]||(t[17]=e("defs",null,[e("linearGradient",{id:"gradient-pipeline",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0"}})])],-1)),e("path",{d:l(i.value.pipelineValueTrend),fill:"url(#gradient-pipeline)",class:"transition-all duration-700"},null,8,Ms),e("path",{d:C(i.value.pipelineValueTrend),stroke:"var(--brand-blue)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,js)]))])):w("",!0)])]),e("div",Ns,[e("div",Is,[e("div",Us,[t[18]||(t[18]=e("div",{class:"text-xs text-gray-500 mb-1"},"Win Rate",-1)),e("div",Bs,x(((de=i.value)==null?void 0:de.winRate)||0)+"%",1)]),(ue=i.value)!=null&&ue.winRateTrend?(r(),n("div",Ps,[(r(),n("svg",Ls,[t[19]||(t[19]=e("defs",null,[e("linearGradient",{id:"gradient-winrate",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--color-success)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--color-success)","stop-opacity":"0"}})])],-1)),e("path",{d:l(i.value.winRateTrend),fill:"url(#gradient-winrate)",class:"transition-all duration-700"},null,8,Vs),e("path",{d:C(i.value.winRateTrend),stroke:"var(--color-success)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,qs)]))])):w("",!0)])])]),e("div",Qs,[e("div",Hs,[e("div",zs,[e("div",Es,[t[20]||(t[20]=e("div",{class:"text-xs text-gray-500 mb-1"},"New Opportunities",-1)),e("div",Gs,x(((pe=(ce=i.value)==null?void 0:ce.newOpportunities)==null?void 0:pe[m.value])||0),1)]),$("newOpportunities")?(r(),n("div",Ys,[(r(),n("svg",Fs,[t[21]||(t[21]=e("defs",null,[e("linearGradient",{id:"gradient-new-opp",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--color-success)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--color-success)","stop-opacity":"0"}})])],-1)),e("path",{d:l($("newOpportunities")),fill:"url(#gradient-new-opp)",class:"transition-all duration-700"},null,8,Js),e("path",{d:C($("newOpportunities")),stroke:"var(--color-success)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,Ws)]))])):w("",!0)])]),e("div",Xs,[e("div",Ks,[e("div",Zs,[t[22]||(t[22]=e("div",{class:"text-xs text-gray-500 mb-1"},"Dormant Opportunities",-1)),e("div",eo,x(((fe=i.value)==null?void 0:fe.dormantOpportunities)||0),1)]),(ve=i.value)!=null&&ve.dormantOpportunitiesTrend?(r(),n("div",to,[(r(),n("svg",so,[t[23]||(t[23]=e("defs",null,[e("linearGradient",{id:"gradient-dormant",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--brand-red)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--brand-red)","stop-opacity":"0"}})])],-1)),e("path",{d:l(i.value.dormantOpportunitiesTrend),fill:"url(#gradient-dormant)",class:"transition-all duration-700"},null,8,oo),e("path",{d:C(i.value.dormantOpportunitiesTrend),stroke:"var(--brand-red)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,ro)]))])):w("",!0)])])])])):u.value==="manager"?(r(),n("div",no,[e("div",io,[e("div",ao,[e("div",lo,[(r(),n("svg",uo,[t[24]||(t[24]=e("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"var(--color-success-light)","stroke-width":"8"},null,-1)),e("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"#10b981","stroke-width":"8","stroke-dasharray":`${(((ge=h.value)==null?void 0:ge.conversionRate)||0)*2.64} 265`,"stroke-linecap":"round",class:"transition-all duration-700"},null,8,co)])),e("div",po,[e("div",fo,[e("div",vo,x(((xe=h.value)==null?void 0:xe.conversionRate)||0)+"% ",1)])])]),t[25]||(t[25]=e("div",{class:"text-sm font-bold text-green-800 mb-1"},"Conversion Rate",-1)),e("div",go,x(g(((me=h.value)==null?void 0:me.conversionRate)||0)),1)]),e("div",xo,[t[26]||(t[26]=e("h3",{class:"text-sm font-bold text-gray-900 mb-4"},"Sales Funnel",-1)),e("div",mo,[(r(!0),n(A,null,q(((be=h.value)==null?void 0:be.stages)||[],(I,Eo)=>(r(),n("div",{key:I.name,class:"relative"},[e("div",bo,[e("span",yo,x(I.name),1),e("div",ho,[e("div",wo,[e("div",{class:U(["h-full rounded-full transition-all duration-700 flex items-center justify-end pr-2",D(I.color)]),style:J({width:`${I.percentage}%`,minWidth:"2px"})},[e("span",_o,x(R(I.count)),1)],6)])]),e("span",ko,x(I.percentage)+"%",1)])]))),128))])])])])):(r(),n("div",$o,[...t[27]||(t[27]=[e("i",{class:"fa-solid fa-chart-line text-4xl mb-2 text-gray-300"},null,-1),e("p",{class:"text-sm"},"Performance metrics not available",-1),e("p",{class:"text-xs text-muted-foreground mt-1"},"Contact your administrator",-1)])]))])])}}},Do={class:"page-container"},Co={class:"p-4 md:p-6 lg:p-8"},Ao={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 items-start"},So={class:"lg:col-span-2 space-y-4 md:space-y-6"},Oo={class:"rounded-lg flex flex-col bg-muted"},Ro={class:"px-4 py-4 flex items-center justify-between shrink-0"},Mo={class:"flex items-center gap-2"},jo={class:"bg-white rounded-lg p-4 shadow-nsc-card flex flex-col"},No={class:"space-y-3"},Io={key:0,class:"text-center py-8 text-muted-foreground"},Uo={class:"space-y-4 md:space-y-6"},Bo={class:"rounded-lg flex flex-col bg-muted"},Po={class:"px-4 py-4 flex items-center justify-between shrink-0"},Lo={class:"flex items-center gap-2"},Vo={class:"bg-white rounded-lg p-4 shadow-nsc-card flex flex-col"},qo={class:"rounded-lg flex flex-col bg-muted"},Qo={class:"px-4 py-4 flex items-center justify-between shrink-0"},Ho={class:"flex items-center gap-2"},zo={class:"bg-white rounded-lg p-4 shadow-nsc-card flex flex-col"},Xo={__name:"Home",setup(p){const b=Z(),u=G(),{dismissQuestion:f,addFollowUpQuestion:m}=$e(),{notifications:v,totalNotificationsCount:o,appointmentsToday:i,tasksDueToday:h,loadingNotifications:M,loadingAppointments:y,loadingTasks:T,loadDashboard:O}=qe(),R=k(!1),D=k(null);we(async()=>{await O()});const $=async t=>{t.type==="appointment-followup"?(f(t.id),m({id:`offer-followup-${t.opportunityId}`,type:"offer-followup",priority:5,question:`What was the offer given to ${t.customer.name}?`,customer:t.customer,opportunityId:t.opportunityId,opportunity:t.opportunity,createdAt:new Date().toISOString()})):(t.type==="ns-followup"||t.type==="stuck-opportunity"||t.type==="lead-qualification-urgency")&&f(t.id)},C=async t=>{var a;if(t.type==="appointment-followup")try{const c=(a=u.currentUser)==null?void 0:a.id;c&&(await Me(t.opportunityId,c),f(t.id),await O())}catch(c){console.error("Error creating NS task:",c)}else t.type==="ns-followup"?f(t.id):t.type==="stuck-opportunity"?b.push(`/tasks/${t.opportunityId}?type=opportunity`):t.type==="lead-qualification-urgency"&&b.push(`/tasks/${t.leadId}?type=lead`)},l=t=>{D.value=t,R.value=!0},g=async t=>{if(D.value)try{const a=D.value.opportunityId||D.value.leadId;D.value.opportunityId&&await Re(a,t),f(D.value.id),R.value=!1,D.value=null,await O()}catch(a){console.error("Error reassigning:",a)}},d=t=>{t.opportunityId?b.push(`/tasks/${t.opportunityId}?type=opportunity`):t.leadId&&b.push(`/tasks/${t.leadId}?type=lead`)},s=t=>{u.currentUser&&Ve(t.id,u.currentUser.id),f(t.id)};return(t,a)=>(r(),n("div",Do,[e("div",Co,[e("div",Ao,[e("div",So,[H(To),e("div",Oo,[e("div",Ro,[e("div",Mo,[a[4]||(a[4]=e("i",{class:"fa-solid fa-bolt text-foreground"},null,-1)),a[5]||(a[5]=e("h2",{class:"text-sm font-medium text-foreground leading-5"},"Quick Actions",-1)),_(o)>0?(r(),E(_(W),{key:0,text:String(_(o)),size:"small",theme:"blue"},null,8,["text"])):w("",!0)]),_(o)>5?(r(),E(_(X),{key:0,label:"View all →",variant:"ghost",size:"small",onClick:a[0]||(a[0]=c=>t.$router.push("/tasks")),class:"text-xs"})):w("",!0)]),e("div",jo,[e("div",No,[_(M)?(r(),n(A,{key:0},q(3,c=>e("div",{key:`skeleton-${c}`,class:"bg-muted border border-border rounded-lg p-4"},[...a[6]||(a[6]=[ee('<div class="space-y-2"><div class="h-4 bg-surfaceTertiary rounded w-3/4 animate-pulse"></div><div class="h-3 bg-surfaceTertiary rounded w-1/2 animate-pulse"></div><div class="flex gap-2 mt-3"><div class="h-8 bg-surfaceTertiary rounded flex-1 animate-pulse"></div><div class="h-8 bg-surfaceTertiary rounded flex-1 animate-pulse"></div></div></div>',1)])])),64)):(r(),n(A,{key:1},[_(v).length===0?(r(),n("div",Io,[...a[7]||(a[7]=[e("i",{class:"fa-solid fa-check-circle text-4xl mb-2 text-muted-foreground opacity-50"},null,-1),e("p",{class:"text-sm"},"All caught up!",-1),e("p",{class:"text-xs mt-1"},"No quick actions needed",-1)])])):w("",!0),(r(!0),n(A,null,q(_(v).slice(0,5),c=>(r(),E(Je,{key:c.id,question:c,onAnswerYes:$,onAnswerNo:C,onReassign:l,onViewTask:d,onDismiss:s},null,8,["question"]))),128))],64))])])])]),e("div",Uo,[e("div",Bo,[e("div",Po,[e("div",Lo,[a[8]||(a[8]=e("i",{class:"fa-solid fa-tasks text-foreground"},null,-1)),a[9]||(a[9]=e("h2",{class:"text-sm font-medium text-foreground leading-5"},"Tasks Due Today",-1)),_(h).length>0?(r(),E(_(W),{key:0,text:String(_(h).length),size:"small",theme:"red"},null,8,["text"])):w("",!0)]),H(_(X),{label:"View all tasks →",variant:"ghost",size:"small",onClick:a[1]||(a[1]=c=>t.$router.push("/tasks")),class:"text-xs"})]),e("div",Vo,[H(Tt,{tasks:_(h),loading:_(T)},null,8,["tasks","loading"])])]),e("div",qo,[e("div",Qo,[e("div",Ho,[a[10]||(a[10]=e("i",{class:"fa-solid fa-calendar text-foreground"},null,-1)),a[11]||(a[11]=e("h2",{class:"text-sm font-medium text-foreground leading-5"},"Appointments Today",-1)),_(i).length>0?(r(),E(_(W),{key:0,text:String(_(i).length),size:"small",theme:"blue"},null,8,["text"])):w("",!0)]),H(_(X),{label:"View calendar →",variant:"ghost",size:"small",onClick:a[2]||(a[2]=c=>t.$router.push("/calendar")),class:"text-xs"})]),e("div",zo,[H(dt,{appointments:_(i),loading:_(y)},null,8,["appointments","loading"])])])])])]),H(Ue,{show:R.value,onClose:a[3]||(a[3]=c=>R.value=!1),onConfirm:g},null,8,["show"])]))}};export{Xo as default};
