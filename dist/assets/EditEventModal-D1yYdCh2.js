import{Q as j}from"./index-X4R71uMA.js";import{_ as L}from"./ModalShell-C2F0rTBB.js";import{c as y,d,o as i,e,g as p,t as u,p as A,y as $,j as F,l as N,m,n as M,u as z,r as Q,A as W,z as g,G as D,B as h,F as U,i as V}from"./index-CNXtwH7T.js";import{u as R}from"./users-BsZeQM9-.js";const G={class:"space-y-4"},H={class:"flex items-start gap-3"},E={class:"text-content-bold"},J={class:"text-meta"},K={key:0,class:"flex items-start gap-3"},P={class:"text-content-bold"},X={key:1,class:"flex items-start gap-3"},Y={class:"text-content-bold"},Z={key:2,class:"flex items-start gap-3"},_={class:"text-content-bold"},ee={key:3,class:"flex items-start gap-3"},te={class:"text-content-bold"},le={key:4,class:"flex items-start gap-3"},se={class:"text-content-bold"},ae={__name:"CalendarEventDetails",props:{event:{type:Object,required:!0}},setup(l){const o=l,n=y(()=>{var s;return(s=o.event)!=null&&s.start?new Date(o.event.start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A"}),c=y(()=>{var s;return(s=o.event)!=null&&s.start?new Date(o.event.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"}),b=y(()=>{var s;return(s=o.event)!=null&&s.end?new Date(o.event.end).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"});return(v,s)=>(i(),d("div",G,[e("div",H,[s[0]||(s[0]=e("div",{class:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-regular fa-calendar text-blue-600 text-sm"})],-1)),e("div",null,[e("p",E,u(n.value),1),e("p",J,u(c.value)+" - "+u(b.value),1)])]),l.event.customer?(i(),d("div",K,[s[2]||(s[2]=e("div",{class:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-regular fa-user text-green-600 text-sm"})],-1)),e("div",null,[e("p",P,u(l.event.customer),1),s[1]||(s[1]=e("p",{class:"text-meta"},"Customer",-1))])])):p("",!0),l.event.vehicle?(i(),d("div",X,[s[4]||(s[4]=e("div",{class:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-car text-purple-600 text-sm"})],-1)),e("div",null,[e("p",Y,u(l.event.vehicle),1),s[3]||(s[3]=e("p",{class:"text-meta"},"Vehicle",-1))])])):p("",!0),l.event.dealership?(i(),d("div",Z,[s[6]||(s[6]=e("div",{class:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-building text-orange-600 text-sm"})],-1)),e("div",null,[e("p",_,u(l.event.dealership),1),s[5]||(s[5]=e("p",{class:"text-meta"},"Dealership",-1))])])):p("",!0),l.event.assignee?(i(),d("div",ee,[s[8]||(s[8]=e("div",{class:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-regular fa-id-badge text-indigo-600 text-sm"})],-1)),e("div",null,[e("p",te,u(l.event.assignee),1),s[7]||(s[7]=e("p",{class:"text-meta"},"Assigned to",-1))])])):p("",!0),l.event.team?(i(),d("div",le,[s[10]||(s[10]=e("div",{class:"w-8 h-8 rounded-lg bg-teal-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-users text-teal-600 text-sm"})],-1)),e("div",null,[e("p",se,u(l.event.team),1),s[9]||(s[9]=e("p",{class:"text-meta"},"Team",-1))])])):p("",!0)]))}},re=l=>({"test-drive":"Test Drive",appointment:"Dealership Visit",offsite:"Offsite Visit",workshop:"Workshop",call:"Call",delivery:"Delivery",meeting:"Meeting",training:"Training",marketing:"Marketing Event",leave:"Leave",memo:"Memo",recall:"Recall",absence:"Absence",other:"Other"})[l]||l,ne=l=>({"test-drive":"bg-blue-50 border-b border-blue-200",appointment:"bg-green-50 border-b border-green-200",offsite:"bg-emerald-50 border-b border-emerald-200",workshop:"bg-indigo-50 border-b border-indigo-200",call:"bg-orange-50 border-b border-orange-200",delivery:"bg-teal-50 border-b border-teal-200",meeting:"bg-purple-50 border-b border-purple-200",training:"bg-pink-50 border-b border-pink-200",marketing:"bg-yellow-50 border-b border-yellow-200",leave:"bg-red-50 border-b border-red-200",memo:"bg-gray-50 border-b border-gray-200",recall:"bg-cyan-50 border-b border-cyan-200",absence:"bg-rose-50 border-b border-rose-200",other:"bg-slate-50 border-b border-slate-200"})[l]||"bg-blue-50 border-b border-blue-200",ie=l=>({"test-drive":"bg-blue-100 text-blue-700 border-blue-200",appointment:"bg-green-100 text-green-700 border-green-200",offsite:"bg-emerald-100 text-emerald-700 border-emerald-200",workshop:"bg-indigo-100 text-indigo-700 border-indigo-200",call:"bg-orange-100 text-orange-700 border-orange-200",delivery:"bg-teal-100 text-teal-700 border-teal-200",meeting:"bg-purple-100 text-purple-700 border-purple-200",training:"bg-pink-100 text-pink-700 border-pink-200",marketing:"bg-yellow-100 text-yellow-700 border-yellow-200",leave:"bg-red-100 text-red-700 border-red-200",memo:"bg-gray-100 text-gray-700 border-gray-200",recall:"bg-cyan-100 text-cyan-700 border-cyan-200",absence:"bg-rose-100 text-rose-700 border-rose-200",other:"bg-slate-100 text-slate-700 border-slate-200"})[l]||"bg-blue-100 text-blue-700 border-blue-200",oe=l=>({"test-drive":"text-blue-900",appointment:"text-green-900",offsite:"text-emerald-900",workshop:"text-indigo-900",call:"text-orange-900",delivery:"text-teal-900",meeting:"text-purple-900",training:"text-pink-900",marketing:"text-yellow-900",leave:"text-red-900",memo:"text-gray-900",recall:"text-cyan-900",absence:"text-rose-900",other:"text-slate-900"})[l]||"text-blue-900",je=l=>({"test-drive":"event-blue",appointment:"event-green",offsite:"event-emerald",workshop:"event-indigo",call:"event-orange",delivery:"event-teal",meeting:"event-purple",training:"event-pink",marketing:"event-yellow",leave:"event-red",memo:"event-gray",recall:"event-cyan",absence:"event-rose",other:"event-slate"})[l]||"event-blue",de={class:"flex items-start justify-between"},ue={class:"flex items-center gap-2 mb-1"},be={key:0,class:"badge-ui bg-red-100 text-red-700 border-red-200"},ve={key:1,class:"badge-ui bg-orange-100 text-orange-700 border-orange-200"},ge={class:"p-4 bg-gray-50 flex justify-between items-center border-t border-gray-100"},me={key:1},pe={class:"flex gap-2"},ce={class:"flex items-center gap-1"},Ae={__name:"QuickViewEventModal",props:{show:{type:Boolean,required:!0},event:{type:Object,default:null}},emits:["close","edit","delete"],setup(l){return(o,n)=>{var c;return i(),A(L,{show:l.show,title:((c=l.event)==null?void 0:c.title)||"Event Details",size:"md",onCancel:n[4]||(n[4]=b=>o.$emit("close"))},{header:$(()=>{var b,v,s,T,w,r,C;return[e("div",{class:M(["p-5",m(ne)((b=l.event)==null?void 0:b.type)])},[e("div",de,[e("div",null,[e("div",ue,[e("span",{class:M(["badge-ui",m(ie)((v=l.event)==null?void 0:v.type)])},u(m(re)((s=l.event)==null?void 0:s.type)),3),((T=l.event)==null?void 0:T.status)==="cancelled"?(i(),d("span",be," Cancelled ")):((w=l.event)==null?void 0:w.status)==="no-show"?(i(),d("span",ve," No-show ")):p("",!0)]),e("h3",{class:M(["font-bold text-lg",m(oe)((r=l.event)==null?void 0:r.type)])},u((C=l.event)==null?void 0:C.title),3)]),e("button",{onClick:n[0]||(n[0]=O=>o.$emit("close")),class:"text-gray-400 hover:text-gray-600"},[...n[5]||(n[5]=[e("i",{class:"fa-solid fa-xmark"},null,-1)])])])],2)]}),footer:$(()=>{var b;return[e("div",ge,[(b=l.event)!=null&&b.id?(i(),d("button",{key:0,onClick:n[1]||(n[1]=v=>o.$emit("delete",l.event.id)),class:"text-sm text-red-600 hover:text-red-700 font-medium flex items-center gap-1"},[...n[6]||(n[6]=[e("i",{class:"fa-regular fa-trash-can text-xs"},null,-1),F(" Delete ",-1)])])):(i(),d("div",me)),e("div",pe,[N(m(j),{label:"Close",variant:"outline",onClick:n[2]||(n[2]=v=>o.$emit("close"))}),e("div",ce,[n[7]||(n[7]=e("i",{class:"fa-regular fa-pen-to-square"},null,-1)),N(m(j),{label:"Edit",variant:"primary",onClick:n[3]||(n[3]=v=>o.$emit("edit"))})])])])]}),default:$(()=>[l.event?(i(),A(ae,{key:0,event:l.event},null,8,["event"])):p("",!0)]),_:1},8,["show","title"])}}},ye={class:"space-y-4"},fe={class:"grid grid-cols-2 gap-4"},xe=["disabled","value"],ke=["disabled"],he={label:"Teams"},$e=["value"],Te={label:"Users"},we=["value"],Ce={key:0,class:"text-xs text-gray-500 mt-1"},Se=["value"],Ne={__name:"EditEventModal",props:{show:{type:Boolean,required:!0},event:{type:Object,default:null},dealerships:{type:Array,default:()=>[]},customer:{type:Object,default:null},assignee:{type:String,default:null},disabledFields:{type:Array,default:()=>[]}},emits:["save","cancel"],setup(l,{emit:o}){const n=l,c=o,b=z(),v=R(),s=y(()=>v.assignableUsers),T=y(()=>v.assignableTeams),w=y(()=>r.value.assignee&&r.value.assignee.startsWith("team-")),r=Q({id:null,type:"test-drive",title:"",date:"",time:"",customer:"",assignee:"",vehicle:"",dealership:"",status:"confirmed"});W(()=>[n.show,n.event],([B,t])=>{var f,a,x,I;if(B&&t)try{const k=t.start?new Date(t.start):new Date;if(isNaN(k.getTime()))throw new Error("Invalid date");const S=t.assigneeId?`user-${t.assigneeId}`:t.assignee||n.assignee||`user-${((f=b.currentUser)==null?void 0:f.id)||1}`;r.value={id:t.id,type:t.type||"test-drive",title:t.title||"",date:k.toISOString().split("T")[0],time:k.toTimeString().slice(0,5),customer:((a=n.customer)==null?void 0:a.name)||t.customer||"",assignee:S,vehicle:t.vehicle||"",dealership:t.dealership||"",status:t.status||"confirmed"}}catch(k){console.error("Error parsing event date:",k);const S=new Date,q=t.assigneeId?`user-${t.assigneeId}`:t.assignee||n.assignee||`user-${((x=b.currentUser)==null?void 0:x.id)||1}`;r.value={id:t.id,type:t.type||"test-drive",title:t.title||"",date:S.toISOString().split("T")[0],time:S.toTimeString().slice(0,5),customer:((I=n.customer)==null?void 0:I.name)||t.customer||"",assignee:q,vehicle:t.vehicle||"",dealership:t.dealership||"",status:t.status||"confirmed"}}});const C=()=>{r.value.title&&r.value.date&&c("save",{...r.value})},O=()=>{c("cancel")};return(B,t)=>(i(),A(L,{show:l.show,title:"Edit Event",subtitle:"Update the event details.",onCancel:O},{actions:$(()=>[N(m(j),{label:"Save Changes",variant:"primary",onClick:C})]),default:$(()=>{var f;return[e("div",ye,[e("div",null,[t[10]||(t[10]=e("label",{class:"block label-upper mb-2"},"Event Type",-1)),g(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value.type=a),class:"input"},[...t[9]||(t[9]=[e("option",{value:"test-drive"},"Test Drive",-1),e("option",{value:"appointment"},"Dealership Visit",-1),e("option",{value:"offsite"},"Offsite Visit",-1),e("option",{value:"workshop"},"Workshop",-1),e("option",{value:"call"},"Call",-1),e("option",{value:"delivery"},"Delivery",-1),e("option",{value:"meeting"},"Meeting",-1),e("option",{value:"training"},"Training",-1),e("option",{value:"marketing"},"Marketing Event",-1),e("option",{value:"leave"},"Leave",-1),e("option",{value:"memo"},"Memo",-1),e("option",{value:"recall"},"Recall",-1),e("option",{value:"absence"},"Absence",-1),e("option",{value:"other"},"Other",-1)])],512),[[D,r.value.type]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block label-upper mb-2"},"Title",-1)),g(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.value.title=a),type:"text",placeholder:"Event title...",class:"input"},null,512),[[h,r.value.title]])]),e("div",fe,[e("div",null,[t[12]||(t[12]=e("label",{class:"block label-upper mb-2"},"Date",-1)),g(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.value.date=a),type:"date",class:"input"},null,512),[[h,r.value.date]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block label-upper mb-2"},"Time",-1)),g(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.value.time=a),type:"time",class:"input"},null,512),[[h,r.value.time]])])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block label-upper mb-2"},"Customer",-1)),g(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>r.value.customer=a),type:"text",placeholder:"Customer name...",class:"input",disabled:l.disabledFields.includes("customer"),value:((f=l.customer)==null?void 0:f.name)||r.value.customer},null,8,xe),[[h,r.value.customer]])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block label-upper mb-2"},"Assign to",-1)),g(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.assignee=a),class:"input",disabled:l.disabledFields.includes("assignee")},[e("optgroup",he,[(i(!0),d(U,null,V(T.value,a=>(i(),d("option",{key:`team-${a.id}`,value:`team-${a.id}`},u(a.name)+" Team ",9,$e))),128))]),e("optgroup",Te,[(i(!0),d(U,null,V(s.value,a=>{var x;return i(),d("option",{key:`user-${a.id}`,value:`user-${a.id}`},u(a.name)+u(a.id===((x=m(b).currentUser)==null?void 0:x.id)?" (Me)":""),9,we)}),128))])],8,ke),[[D,r.value.assignee]]),w.value?(i(),d("p",Ce,[...t[15]||(t[15]=[e("i",{class:"fa-solid fa-users text-gray-400"},null,-1),F(" Any available team member will be assigned ",-1)])])):p("",!0)]),e("div",null,[t[17]||(t[17]=e("label",{class:"block label-upper mb-2"},"Vehicle",-1)),g(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>r.value.vehicle=a),type:"text",placeholder:"Vehicle...",class:"input"},null,512),[[h,r.value.vehicle]])]),e("div",null,[t[19]||(t[19]=e("label",{class:"block label-upper mb-2"},"Dealership",-1)),g(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>r.value.dealership=a),class:"input"},[t[18]||(t[18]=e("option",{value:""},"Select dealership...",-1)),(i(!0),d(U,null,V(l.dealerships,a=>(i(),d("option",{key:a,value:a},u(a),9,Se))),128))],512),[[D,r.value.dealership]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block label-upper mb-2"},"Status",-1)),g(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>r.value.status=a),class:"input"},[...t[20]||(t[20]=[e("option",{value:"confirmed"},"Confirmed",-1),e("option",{value:"cancelled"},"Cancelled",-1),e("option",{value:"no-show"},"No-show",-1)])],512),[[D,r.value.status]])])])]}),_:1},8,["show"]))}};export{Ae as _,Ne as a,je as g};
