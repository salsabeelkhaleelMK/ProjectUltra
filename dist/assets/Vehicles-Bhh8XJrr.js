import{P as u,a0 as C,r as d,c as b,k as D,E as c,d as P,l as S,e as m,m as p,y as B,o as $}from"./index-CNXtwH7T.js";import{P as K}from"./PageHeader-8J4ZZyG7.js";import{y as q}from"./components-BkPWLPK_.js";import{Q as A}from"./index-X4R71uMA.js";import"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-ByvD3MJx.js";const f=(l=300)=>new Promise(a=>setTimeout(a,l)),N=async(l={})=>{await f();let a=[...u];if(l.status&&(a=a.filter(e=>e.status===l.status)),l.brand&&(a=a.filter(e=>e.brand===l.brand)),l.search){const e=l.search.toLowerCase();a=a.filter(n=>n.brand.toLowerCase().includes(e)||n.model.toLowerCase().includes(e)||n.vin.toLowerCase().includes(e))}return{data:a,total:a.length}},U=async l=>{await f();const a=u.find(e=>e.id===parseInt(l));if(!a)throw new Error("Vehicle not found");return a},E=async l=>{await f();const a={id:u.length+1,...l,stockDays:0};return u.push(a),a},H=async(l,a)=>{await f();const e=u.findIndex(n=>n.id===parseInt(l));if(e===-1)throw new Error("Vehicle not found");return u[e]={...u[e],...a},u[e]},O=async l=>{await f();const a=u.findIndex(e=>e.id===parseInt(l));if(a===-1)throw new Error("Vehicle not found");return u.splice(a,1),{success:!0}},_=C("vehicles",()=>{const l=d([]),a=d(null),e=d(!1),n=d(null),v=d({status:null,brand:null,search:""}),g=b(()=>l.value.length),w=b(()=>l.value.filter(s=>s.status==="Available")),x=b(()=>l.value.reduce((s,o)=>s+o.price,0));async function h(){e.value=!0,n.value=null;try{const s=await N(v.value);l.value=s.data}catch(s){n.value=s.message}finally{e.value=!1}}async function V(s){e.value=!0,n.value=null;try{a.value=await U(s)}catch(o){n.value=o.message}finally{e.value=!1}}async function k(s){e.value=!0,n.value=null;try{const o=await E(s);return l.value.unshift(o),o}catch(o){throw n.value=o.message,o}finally{e.value=!1}}async function r(s,o){e.value=!0,n.value=null;try{const y=await H(s,o),I=l.value.findIndex(F=>F.id===s);return I!==-1&&(l.value[I]=y),y}catch(y){throw n.value=y.message,y}finally{e.value=!1}}async function t(s){e.value=!0,n.value=null;try{await O(s),l.value=l.value.filter(o=>o.id!==s)}catch(o){throw n.value=o.message,o}finally{e.value=!1}}function i(s){v.value={...v.value,...s},h()}return{vehicles:l,currentVehicle:a,loading:e,error:n,filters:v,totalVehicles:g,availableVehicles:w,totalInventoryValue:x,loadVehicles:h,loadVehicleById:V,addVehicle:k,modifyVehicle:r,removeVehicle:t,setFilters:i}}),z={class:"page-container"},L={class:"p-4 md:p-8"},M={class:"table-wrapper w-full"},Q={class:"flex items-center gap-2"},W={__name:"Vehicles",setup(l){const a=_(),e=d({pageIndex:0,pageSize:10}),n=d(""),v=d([]),g=d([]),w=[{key:"status",label:"Status",type:"select",operators:[{value:"eq",label:"is"},{value:"ne",label:"is not"}],options:[{value:"Available",label:"Available"},{value:"In Stock",label:"In Stock"},{value:"Sold",label:"Sold"}],aiHint:"Vehicle availability status"},{key:"brand",label:"Brand",type:"multiselect",operators:[{value:"in",label:"is any of"},{value:"notIn",label:"is none of"}],options:[{value:"Volkswagen",label:"Volkswagen"},{value:"Mercedes-Benz",label:"Mercedes-Benz"},{value:"Audi",label:"Audi"},{value:"Porsche",label:"Porsche"}],aiHint:"Car manufacturer brand"},{key:"price",label:"Price",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],prefix:"€",aiHint:"Vehicle price in euros"},{key:"stockDays",label:"Stock Days",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],aiHint:"Number of days in stock"}];D(()=>{a.loadVehicles()});const x=r=>new Intl.NumberFormat("en-US").format(r),h=r=>new Intl.NumberFormat("en-US").format(r),V=b(()=>({class:{tr:()=>"cursor-pointer hover:bg-gray-50 transition-colors"}})),k=b(()=>[{accessorKey:"brand",header:"Vehicle",meta:{title:"Vehicle"},cell:({row:r})=>{const t=r.original;return c("div",{class:"flex items-center gap-3"},[c("div",{class:"w-12 h-12 bg-gradient-to-br from-gray-100 to-gray-200 rounded-md flex items-center justify-center shrink-0"},[c("i",{class:"fa-solid fa-car text-2xl text-gray-400"})]),c("div",[c("div",{class:"text-content-bold"},`${t.brand} ${t.model}`),c("div",{class:"text-meta"},t.year)])])}},{accessorKey:"status",header:"Status",meta:{title:"Status"},cell:({row:r})=>{const t=r.original.status;return c("span",{class:`badge-ui font-semibold ${t==="Available"?"bg-green-100 text-green-700":t==="In Stock"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`},t)}},{accessorKey:"price",header:"Price",meta:{title:"Price"},cell:({row:r})=>c("span",{class:"text-content-bold"},`€${x(r.original.price)}`)},{accessorKey:"kilometers",header:"Kilometers",meta:{title:"Kilometers"},cell:({row:r})=>`${h(r.original.kilometers)} km`},{accessorKey:"stockDays",header:"Stock Days",meta:{title:"Stock Days"},cell:({row:r})=>{const t=r.original.stockDays,i=t>300?"text-red-600":"text-gray-600";return c("span",{class:`text-content font-medium ${i}`},`${t} days`)}},{accessorKey:"requestedBy",header:"Requested By",meta:{title:"Requested By"},cell:({row:r})=>{const t=r.original.requestedBy;if(t&&t.length>0){const i=t.slice(0,2).map(o=>c("span",{class:"badge-ui bg-blue-50 text-blue-700 font-semibold"},o)),s=t.length>2?c("span",{class:"badge-ui bg-gray-100 text-gray-600 font-semibold"},`+${t.length-2}`):null;return c("div",{class:"flex flex-wrap gap-1"},[...i,s].filter(Boolean))}return c("span",{class:"text-meta"},"-")}}]);return(r,t)=>($(),P("div",z,[S(K,{title:"Vehicles Inventory",subtitle:`${p(a).totalVehicles} vehicles in inventory`},null,8,["subtitle"]),m("div",L,[m("div",M,[S(p(q),{data:p(a).vehicles,columns:k.value,loading:p(a).loading,meta:V.value,columnFiltersOptions:{filterDefs:w},pagination:e.value,"onUpdate:pagination":t[0]||(t[0]=i=>e.value=i),globalFilter:n.value,"onUpdate:globalFilter":t[1]||(t[1]=i=>n.value=i),sorting:v.value,"onUpdate:sorting":t[2]||(t[2]=i=>v.value=i),columnFilters:g.value,"onUpdate:columnFilters":t[3]||(t[3]=i=>g.value=i),paginationOptions:{rowCount:p(a).totalVehicles},globalFilterOptions:{debounce:300,placeholder:"Q Search or ask a question"}},{toolbar:B(()=>[m("div",Q,[t[4]||(t[4]=m("i",{class:"fa-solid fa-plus text-sm"},null,-1)),S(p(A),{label:"Add new",variant:"primary",size:"large"})])]),"empty-state":B(()=>[...t[5]||(t[5]=[m("div",{class:"empty-state"},[m("i",{class:"fa-solid fa-car empty-state-icon"}),m("p",{class:"empty-state-text"},"No vehicles found")],-1)])]),_:1},8,["data","columns","loading","meta","columnFiltersOptions","pagination","globalFilter","sorting","columnFilters","paginationOptions"])])])]))}};export{W as default};
