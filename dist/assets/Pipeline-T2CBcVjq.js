import{r as c,K as P,c as C,L as Q,k as N,a as p,b as t,A as W,F as M,f as U,w as i,v as m,x as A,g as I,e as _,j as S,i as V,t as n,T as E,J as F,h as r,n as x}from"./index-vDfOg4W5.js";const z={class:"page-container"},H={class:"page-header"},G={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4"},X={class:"flex-1 min-w-0"},Y={class:"flex items-center gap-2 md:gap-4 mt-3 md:mt-4 overflow-x-auto pb-2 scrollbar-hide"},Z=["onClick"],ee={class:"p-3"},te={class:"label-upper mb-1"},se={class:"flex items-center gap-2"},ae={key:0,class:"badge-ui bg-gray-100 text-gray-700 font-semibold"},le={class:"p-4 md:p-8"},oe={class:"mb-6 bg-gray-50 border border-gray-200 rounded-lg px-4 py-3"},ne={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3"},ie={class:"flex flex-1 flex-wrap items-center gap-2 md:gap-3"},re={class:"flex-1 min-w-[200px] md:min-w-[260px] max-w-full md:max-w-md"},de={class:"relative"},pe={class:"flex justify-end"},ue={key:0,class:"empty-state"},me={key:1,class:"card overflow-hidden"},ce={class:"overflow-x-auto -mx-4 md:mx-0"},xe={class:"w-full"},ge={class:"divide-y divide-gray-100"},be=["onClick"],ye={class:"px-3 md:px-6 py-4 whitespace-nowrap"},ve={class:"flex items-center gap-2 md:gap-3"},fe={class:"w-8 h-8 md:w-9 md:h-9 rounded-full bg-orange-100 text-orange-600 flex items-center justify-center text-xs font-bold shrink-0"},we={class:"min-w-0"},he={class:"font-semibold text-gray-900 truncate"},ke={class:"text-xs text-gray-500 truncate hidden sm:block"},Ce={class:"px-3 md:px-6 py-4 whitespace-nowrap"},Ne={class:"px-3 md:px-6 py-4 whitespace-nowrap"},Ae={class:"flex items-center gap-2"},Se={class:"text-xs md:text-sm font-medium text-gray-900 truncate max-w-[120px]"},Ve={class:"px-3 md:px-6 py-4 whitespace-nowrap"},Te={class:"px-3 md:px-6 py-4 text-xs md:text-sm text-gray-600 whitespace-nowrap"},Me={class:"px-3 md:px-6 py-4 whitespace-nowrap"},Ue={class:"flex items-center gap-2"},Ie={class:"w-5 h-5 md:w-6 md:h-6 rounded-full bg-gray-100 flex items-center justify-center text-[9px] md:text-[10px] font-bold text-gray-600 shrink-0"},_e={class:"text-xs md:text-sm text-gray-600 truncate max-w-[80px] hidden md:inline"},Le={class:"px-3 md:px-6 py-4 whitespace-nowrap"},$e={class:"bg-white rounded-xl shadow-2xl w-full max-w-md mx-4 overflow-hidden animate-fade-in"},qe={class:"p-5 border-b border-gray-100 bg-gray-50/50"},De={class:"font-bold text-lg text-gray-900"},Re={class:"p-5 space-y-4"},je={key:0},Oe={key:1},Ke={key:2},Je={class:"p-4 bg-gray-50 flex justify-end gap-3 border-t border-gray-100"},Qe={__name:"Pipeline",setup(Be){const w=F(),g=c(P),u=c("open-leads"),b=c(""),y=c(!1),d=c({status:"",priority:"",source:""}),o=c({customerName:"",email:"",vehicle:"",value:"",probability:"",reason:""}),L=C(()=>[{key:"open-leads",label:"Open Leads",count:g.value.openLeads,barColor:"bg-gray-300"},{key:"open-opportunities",label:"Open opportunities",count:g.value.openOpportunities,barColor:"bg-orange-500"},{key:"in-negotiation",label:"In negotiation",count:g.value.inNegotiation,barColor:"bg-blue-500"},{key:"won",label:"Won",count:g.value.won,barColor:"bg-green-500"},{key:"lost",label:"Lost",count:g.value.lost,barColor:"bg-red-500"}]),$=()=>({"open-leads":"Create New Lead","open-opportunities":"Create New Opportunity","in-negotiation":"Create New Opportunity",won:"Add Won Deal",lost:"Add Lost Deal"})[u.value]||"Add New",q=()=>({"open-leads":"Lead","open-opportunities":"Opportunity","in-negotiation":"Opportunity",won:"Deal",lost:"Deal"})[u.value]||"Item",D=()=>{o.value={customerName:"",email:"",vehicle:"",value:"",probability:"",reason:""},y.value=!1},R=C(()=>{const l=Q.map(a=>({id:`lead-${a.id}`,stageKey:"open-leads",customer:a.customer.name,email:a.customer.email,initials:a.customer.initials||a.customer.name.slice(0,2).toUpperCase(),nextAction:a.nextActionDue||"1h 12m",car:`${a.requestedCar.brand} ${a.requestedCar.model}`,carStatus:a.carStatus||"New",carStatusClass:a.carStatus==="New"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",requestType:a.requestType||"Quotation",source:a.source||"Marketing",assignee:a.assignee,assigneeInitials:a.assigneeInitials||(a.assignee?a.assignee.slice(0,2).toUpperCase():"NA"),createdAt:v(a.createdAt),lastActivity:v(a.lastActivity),status:a.status,statusClass:J(a.status),priority:a.priority})),e=N.map(a=>{let f="open-opportunities";return a.stage==="In Negotiation"||a.stage==="In negotiation"?f="in-negotiation":a.stage==="Closed"&&(f="won"),{id:`opp-${a.id}`,stageKey:f,customer:a.customer.name,email:a.customer.email,initials:a.customer.initials||a.customer.name.slice(0,2).toUpperCase(),nextAction:"1h 12m",car:`${a.vehicle.brand} ${a.vehicle.model}`,carStatus:"New",carStatusClass:"bg-green-100 text-green-700",requestType:"Opportunity",source:"Marketing",assignee:a.assignee,assigneeInitials:a.assignee?a.assignee.slice(0,2).toUpperCase():"NA",createdAt:v(a.createdAt),lastActivity:v(a.lastActivity),status:a.stage,statusClass:f==="in-negotiation"?"bg-orange-100 text-orange-700":"bg-purple-100 text-purple-700",priority:"Normal"}}),s=[{id:"won-1",stageKey:"won",customer:"John Doe",email:"john.doe@example.com",initials:"JD",nextAction:"-",car:"Audi A6",carStatus:"New",carStatusClass:"bg-green-100 text-green-700",requestType:"Quotation",source:"Marketing",assignee:"Michael Thomas",assigneeInitials:"MT",createdAt:"15/03/2025",lastActivity:"15/03/2025",status:"Won",statusClass:"bg-green-100 text-green-700",priority:"Normal"}],k=[{id:"lost-1",stageKey:"lost",customer:"Jane Smith",email:"jane.smith@example.com",initials:"JS",nextAction:"-",car:"BMW X5",carStatus:"New",carStatusClass:"bg-green-100 text-green-700",requestType:"Test Drive",source:"Marketing",assignee:"Sarah Jenkins",assigneeInitials:"SJ",createdAt:"10/03/2025",lastActivity:"10/03/2025",status:"Lost",statusClass:"bg-red-100 text-red-700",priority:"Normal"}];return[...l,...e,...s,...k]}),T=C(()=>{let l=R.value.filter(e=>e.stageKey===u.value);if(b.value){const e=b.value.toLowerCase();l=l.filter(s=>s.customer.toLowerCase().includes(e)||s.email.toLowerCase().includes(e)||s.car.toLowerCase().includes(e))}return d.value.status&&(l=l.filter(e=>e.status===d.value.status)),d.value.priority&&(l=l.filter(e=>e.priority===d.value.priority)),d.value.source&&(l=l.filter(e=>e.source===d.value.source)),l}),j=l=>{u.value=l},O=()=>{},h=()=>{},K=()=>{d.value={status:"",priority:"",source:""},b.value=""},J=l=>({Valid:"bg-green-100 text-green-700","Not valid":"bg-red-100 text-red-700",Qualified:"bg-gray-100 text-gray-700","Not interested":"bg-red-100 text-red-700",Open:"bg-blue-100 text-blue-700"})[l]||"bg-gray-100 text-gray-700",v=l=>l?new Date(l).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-",B=l=>{const e=l.id.match(/-(\d+)$/);if(u.value==="open-leads"&&l.id.startsWith("lead-")){const s=e?e[1]:l.id.replace("lead-","");w.push({path:`/tasks/${s}`,query:{type:"lead"}})}else if(l.id.startsWith("opp-")){const s=e?e[1]:l.id.replace("opp-","");w.push({path:`/tasks/${s}`,query:{type:"opportunity"}})}else(l.stageKey==="won"||l.stageKey==="lost")&&N.length>0&&w.push({path:`/tasks/${N[0].id}`,query:{type:"opportunity"}})};return(l,e)=>(r(),p("div",z,[t("div",H,[t("div",G,[t("div",X,[e[19]||(e[19]=t("h1",{class:"page-header-title"},"Sales Pipeline",-1)),t("div",Y,[(r(!0),p(M,null,U(L.value,s=>(r(),p("div",{key:s.key,onClick:k=>j(s.key),class:x(["bg-white rounded-lg border border-gray-200 shadow-sm cursor-pointer hover:shadow-md transition-all min-w-[120px] md:min-w-[140px] shrink-0",u.value===s.key?"ring-2 ring-blue-500":""])},[t("div",{class:x(["h-1 rounded-t-lg",s.barColor])},null,2),t("div",ee,[t("div",te,n(s.label),1),t("div",se,[t("span",{class:x(["text-sm font-bold text-gray-900",s.key==="open-leads"?"text-blue-600":""])},n(s.count),3),s.key==="open-leads"?(r(),p("span",ae,n(s.count),1)):S("",!0)])])],10,Z))),128))])])])]),t("div",le,[t("div",oe,[t("div",ne,[t("div",ie,[t("div",re,[t("div",de,[e[20]||(e[20]=t("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),i(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>b.value=s),onInput:O,type:"text",placeholder:"Search or ask a question",class:"input-with-icon"},null,544),[[m,b.value]])])]),i(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>d.value.status=s),onChange:h,class:"px-3 py-2 text-xs md:text-sm border border-gray-200 rounded-lg bg-white focus:outline-none focus:border-blue-500"},[...e[21]||(e[21]=[I('<option value="">Status</option><option value="Valid">Valid</option><option value="Not valid">Not valid</option><option value="Qualified">Qualified</option><option value="Not interested">Not interested</option>',5)])],544),[[A,d.value.status]]),i(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>d.value.priority=s),onChange:h,class:"px-3 py-2 text-xs md:text-sm border border-gray-200 rounded-lg bg-white focus:outline-none focus:border-blue-500"},[...e[22]||(e[22]=[t("option",{value:""},"Priority",-1),t("option",{value:"Hot"},"Hot",-1),t("option",{value:"Normal"},"Normal",-1)])],544),[[A,d.value.priority]]),i(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>d.value.source=s),onChange:h,class:"px-3 py-2 text-xs md:text-sm border border-gray-200 rounded-lg bg-white focus:outline-none focus:border-blue-500"},[...e[23]||(e[23]=[t("option",{value:""},"Source",-1),t("option",{value:"Marketing"},"Marketing",-1)])],544),[[A,d.value.source]]),e[24]||(e[24]=t("button",{class:"btn-secondary text-xs md:text-sm"},[t("i",{class:"fa-solid fa-plus mr-1"}),_(" More filters ")],-1)),t("button",{onClick:K,class:"btn-secondary text-xs md:text-sm"}," Clear "),e[25]||(e[25]=t("button",{class:"btn-secondary text-xs md:text-sm"}," Save ",-1))]),t("div",pe,[u.value==="open-leads"||u.value==="open-opportunities"?(r(),p("button",{key:0,onClick:e[4]||(e[4]=s=>y.value=!0),class:"btn-primary-lg"},[...e[26]||(e[26]=[t("i",{class:"fa-solid fa-plus"},null,-1),_(" Add new ",-1)])])):S("",!0)])])]),T.value.length===0?(r(),p("div",ue,[...e[27]||(e[27]=[t("i",{class:"fa-solid fa-inbox empty-state-icon"},null,-1),t("p",{class:"empty-state-text"},"No records found",-1)])])):(r(),p("div",me,[t("div",ce,[t("table",xe,[e[31]||(e[31]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",null,[t("th",{class:"px-3 md:px-6 py-3 text-left"},[t("input",{type:"checkbox",class:"rounded"})]),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Customer"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Next action due"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Requested car"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Car status"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Source"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Assignee"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Status"),t("th",{class:"px-3 md:px-6 py-3"})])],-1)),t("tbody",ge,[(r(!0),p(M,null,U(T.value,s=>(r(),p("tr",{key:s.id,class:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:k=>B(s)},[t("td",{class:"px-3 md:px-6 py-4 whitespace-nowrap",onClick:e[5]||(e[5]=V(()=>{},["stop"]))},[...e[28]||(e[28]=[t("input",{type:"checkbox",class:"rounded"},null,-1)])]),t("td",ye,[t("div",ve,[t("div",fe,n(s.initials),1),t("div",we,[t("div",he,n(s.customer),1),t("div",ke,n(s.email),1)])])]),t("td",Ce,[t("span",{class:x(["text-xs md:text-sm font-medium",s.priority==="Hot"?"text-red-600":"text-gray-600"])},n(s.nextAction),3)]),t("td",Ne,[t("div",Ae,[e[29]||(e[29]=t("i",{class:"fa-brands fa-volkswagen text-gray-400 text-xs md:text-sm"},null,-1)),t("span",Se,n(s.car),1)])]),t("td",Ve,[t("span",{class:x(["badge-ui font-semibold",s.carStatusClass])},n(s.carStatus),3)]),t("td",Te,n(s.source),1),t("td",Me,[t("div",Ue,[t("div",Ie,n(s.assigneeInitials),1),t("span",_e,n(s.assignee),1)])]),t("td",Le,[t("span",{class:x(["badge-ui font-semibold",s.statusClass])},n(s.status),3)]),t("td",{class:"px-3 md:px-6 py-4 whitespace-nowrap",onClick:e[6]||(e[6]=V(()=>{},["stop"]))},[...e[30]||(e[30]=[t("button",{class:"text-gray-400 hover:text-gray-600"},[t("i",{class:"fa-solid fa-ellipsis-vertical"})],-1)])])],8,be))),128))])])]),e[32]||(e[32]=I('<div class="px-4 md:px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3"><div class="text-xs md:text-sm text-gray-600 flex items-center"> Rows per page: <select class="ml-2 px-2 py-1 border border-gray-200 rounded text-xs md:text-sm"><option>10</option><option>25</option><option>50</option><option>100</option></select></div><div class="flex items-center gap-1 md:gap-2 flex-wrap"><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 whitespace-nowrap">Previous</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm bg-blue-600 text-white rounded">1</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50">2</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 hidden sm:inline-block">3</button><span class="px-1 md:px-2 text-xs md:text-sm text-gray-500 hidden sm:inline">...</span><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 whitespace-nowrap">Next</button></div></div>',1))]))]),(r(),W(E,{to:"body"},[y.value?(r(),p("div",{key:0,class:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",onClick:e[18]||(e[18]=V(s=>y.value=!1,["self"]))},[t("div",$e,[t("div",qe,[t("h3",De,n($()),1),e[33]||(e[33]=t("p",{class:"label-upper mt-1"},"Fill in the details below",-1))]),t("div",Re,[u.value==="open-leads"?(r(),p("div",je,[e[34]||(e[34]=t("label",{class:"block label-upper mb-1"},"Customer Name",-1)),i(t("input",{"onUpdate:modelValue":e[7]||(e[7]=s=>o.value.customerName=s),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[m,o.value.customerName]]),e[35]||(e[35]=t("label",{class:"block label-upper mb-1 mt-4"},"Email",-1)),i(t("input",{"onUpdate:modelValue":e[8]||(e[8]=s=>o.value.email=s),type:"email",placeholder:"customer@example.com",class:"input"},null,512),[[m,o.value.email]]),e[36]||(e[36]=t("label",{class:"block label-upper mb-1 mt-4"},"Requested Vehicle",-1)),i(t("input",{"onUpdate:modelValue":e[9]||(e[9]=s=>o.value.vehicle=s),type:"text",placeholder:"e.g., Volkswagen ID.4",class:"input"},null,512),[[m,o.value.vehicle]])])):u.value==="open-opportunities"||u.value==="in-negotiation"?(r(),p("div",Oe,[e[37]||(e[37]=t("label",{class:"block label-upper mb-1"},"Customer Name",-1)),i(t("input",{"onUpdate:modelValue":e[10]||(e[10]=s=>o.value.customerName=s),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[m,o.value.customerName]]),e[38]||(e[38]=t("label",{class:"block label-upper mb-1 mt-4"},"Vehicle",-1)),i(t("input",{"onUpdate:modelValue":e[11]||(e[11]=s=>o.value.vehicle=s),type:"text",placeholder:"e.g., Porsche Taycan",class:"input"},null,512),[[m,o.value.vehicle]]),e[39]||(e[39]=t("label",{class:"block label-upper mb-1 mt-4"},"Opportunity Value",-1)),i(t("input",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.value.value=s),type:"number",placeholder:"0",class:"input"},null,512),[[m,o.value.value]]),e[40]||(e[40]=t("label",{class:"block label-upper mb-1 mt-4"},"Probability (%)",-1)),i(t("input",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.value.probability=s),type:"number",min:"0",max:"100",placeholder:"75",class:"input"},null,512),[[m,o.value.probability]])])):(r(),p("div",Ke,[e[41]||(e[41]=t("label",{class:"block label-upper mb-1"},"Customer Name",-1)),i(t("input",{"onUpdate:modelValue":e[14]||(e[14]=s=>o.value.customerName=s),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[m,o.value.customerName]]),e[42]||(e[42]=t("label",{class:"block label-upper mb-1 mt-4"},"Vehicle",-1)),i(t("input",{"onUpdate:modelValue":e[15]||(e[15]=s=>o.value.vehicle=s),type:"text",placeholder:"Vehicle model",class:"input"},null,512),[[m,o.value.vehicle]]),e[43]||(e[43]=t("label",{class:"block label-upper mb-1 mt-4"},"Reason",-1)),i(t("textarea",{"onUpdate:modelValue":e[16]||(e[16]=s=>o.value.reason=s),rows:"3",placeholder:"Reason for {{ activeTab === 'won' ? 'win' : 'loss' }}...",class:"input resize-none"},null,512),[[m,o.value.reason]])]))]),t("div",Je,[t("button",{onClick:e[17]||(e[17]=s=>y.value=!1),class:"btn-secondary text-sm"}," Cancel "),t("button",{onClick:D,class:"btn-primary text-sm"}," Create "+n(q()),1)])])])):S("",!0)]))]))}};export{Qe as default};
