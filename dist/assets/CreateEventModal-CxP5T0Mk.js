import{u as A,c,r as B,l as N,m as j,x as W,o as n,E as o,s as i,y as a,e as l,k as y,p as r,v as k,J as b,d,g as L,F as x,i as w,t as f,Q as S}from"./index-DqXOZZRa.js";import{z as O,F as H,L as K,H as Q,j as q,K as J,C as h,W as G}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-CzLkKHlp.js";import{u as I}from"./users-BeZFi7uU.js";const P={class:"space-y-4"},R={class:"grid grid-cols-2 gap-4"},X=["disabled","value"],Y=["disabled"],Z={label:"Teams"},_=["value"],ee={label:"Users"},le=["value"],se={key:0,class:"text-xs text-gray-500 mt-1"},te=["value"],ue={__name:"CreateEventModal",props:{show:{type:Boolean,required:!0},initialDate:{type:String,default:""},dealerships:{type:Array,default:()=>[]},customer:{type:Object,default:null},assignee:{type:String,default:null},disabledFields:{type:Array,default:()=>[]}},emits:["create","cancel"],setup(p,{emit:D}){const m=p,C=D,g=A(),U=I(),E=c(()=>U.assignableUsers),F=c(()=>U.assignableTeams),M=c(()=>t.value.assignee&&t.value.assignee.startsWith("team-")),t=B({type:"test-drive",title:"",date:"",time:"",customer:"",assignee:"",dealership:""});N(()=>m.show,u=>{var e,v;if(u){const s=m.assignee||`user-${((e=g.currentUser)==null?void 0:e.id)||1}`;t.value={type:"test-drive",title:"",date:m.initialDate||"",time:"",customer:((v=m.customer)==null?void 0:v.name)||"",assignee:s,dealership:""}}}),j(()=>{var u;t.value.assignee||(t.value.assignee=m.assignee||`user-${((u=g.currentUser)==null?void 0:u.id)||1}`)});const $=()=>{t.value.title&&t.value.date&&C("create",{...t.value})},z=u=>{u||V()},V=()=>{C("cancel")};return(u,e)=>(n(),W(a(G),{open:p.show,"onUpdate:open":z},{default:o(()=>[i(a(O),null,{default:o(()=>[i(a(H),{class:"fixed inset-0 z-50 bg-black/50"}),i(a(K),{class:"w-full sm:max-w-lg"},{default:o(()=>{var v;return[i(a(Q),null,{default:o(()=>[i(a(q),null,{default:o(()=>[...e[7]||(e[7]=[y("Create New Event",-1)])]),_:1}),i(a(J),null,{default:o(()=>[...e[8]||(e[8]=[y("Fill in the details for the new event.",-1)])]),_:1})]),_:1}),l("div",P,[l("div",null,[e[10]||(e[10]=l("label",{class:"block label-upper mb-2"},"Event Type",-1)),r(l("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>t.value.type=s),class:"input"},[...e[9]||(e[9]=[l("option",{value:"test-drive"},"Test Drive",-1),l("option",{value:"appointment"},"Dealership Visit",-1),l("option",{value:"offsite"},"Offsite Visit",-1),l("option",{value:"workshop"},"Workshop",-1),l("option",{value:"call"},"Call",-1),l("option",{value:"delivery"},"Delivery",-1),l("option",{value:"meeting"},"Meeting",-1)])],512),[[k,t.value.type]])]),l("div",null,[e[11]||(e[11]=l("label",{class:"block label-upper mb-2"},"Title",-1)),r(l("input",{"onUpdate:modelValue":e[1]||(e[1]=s=>t.value.title=s),type:"text",placeholder:"Event title...",class:"input"},null,512),[[b,t.value.title]])]),l("div",R,[l("div",null,[e[12]||(e[12]=l("label",{class:"block label-upper mb-2"},"Date",-1)),r(l("input",{"onUpdate:modelValue":e[2]||(e[2]=s=>t.value.date=s),type:"date",class:"input"},null,512),[[b,t.value.date]])]),l("div",null,[e[13]||(e[13]=l("label",{class:"block label-upper mb-2"},"Time",-1)),r(l("input",{"onUpdate:modelValue":e[3]||(e[3]=s=>t.value.time=s),type:"time",class:"input"},null,512),[[b,t.value.time]])])]),l("div",null,[e[14]||(e[14]=l("label",{class:"block label-upper mb-2"},"Customer",-1)),r(l("input",{"onUpdate:modelValue":e[4]||(e[4]=s=>t.value.customer=s),type:"text",placeholder:"Customer name...",class:"input",disabled:p.disabledFields.includes("customer"),value:((v=p.customer)==null?void 0:v.name)||t.value.customer},null,8,X),[[b,t.value.customer]])]),l("div",null,[e[16]||(e[16]=l("label",{class:"block label-upper mb-2"},"Assign to",-1)),r(l("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>t.value.assignee=s),class:"input",disabled:p.disabledFields.includes("assignee")},[l("optgroup",Z,[(n(!0),d(x,null,w(F.value,s=>(n(),d("option",{key:`team-${s.id}`,value:`team-${s.id}`},f(s.name)+" Team ",9,_))),128))]),l("optgroup",ee,[(n(!0),d(x,null,w(E.value,s=>{var T;return n(),d("option",{key:`user-${s.id}`,value:`user-${s.id}`},f(s.name)+f(s.id===((T=a(g).currentUser)==null?void 0:T.id)?" (Me)":""),9,le)}),128))])],8,Y),[[k,t.value.assignee]]),M.value?(n(),d("p",se,[...e[15]||(e[15]=[l("i",{class:"fa-solid fa-users text-gray-400"},null,-1),y(" Any available team member will be assigned ",-1)])])):L("",!0)]),l("div",null,[e[18]||(e[18]=l("label",{class:"block label-upper mb-2"},"Dealership",-1)),r(l("select",{"onUpdate:modelValue":e[6]||(e[6]=s=>t.value.dealership=s),class:"input"},[e[17]||(e[17]=l("option",{value:""},"Select dealership...",-1)),(n(!0),d(x,null,w(p.dealerships,s=>(n(),d("option",{key:s,value:s},f(s),9,te))),128))],512),[[k,t.value.dealership]])])]),i(a(h),{class:"flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3"},{default:o(()=>[i(a(S),{label:"Cancel",variant:"outline",size:"small",class:"rounded-sm w-full sm:w-auto",onClick:V}),i(a(S),{label:"Create Event",variant:"primary",size:"small",class:"rounded-sm w-full sm:w-auto",onClick:$})]),_:1})]}),_:1})]),_:1})]),_:1},8,["open"]))}};export{ue as _};
