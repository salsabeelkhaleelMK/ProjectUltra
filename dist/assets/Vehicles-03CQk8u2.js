import{O as u,$ as F,r as d,c as h,k as C,E as c,d as $,l as S,e as v,m,j as D,y as K,o as N}from"./index-BKcf9KHs.js";import{_ as A}from"./PageHeader-shNadXGX.js";import{y as q}from"./components-CiYM0QIO.js";const b=(l=300)=>new Promise(a=>setTimeout(a,l)),O=async(l={})=>{await b();let a=[...u];if(l.status&&(a=a.filter(e=>e.status===l.status)),l.brand&&(a=a.filter(e=>e.brand===l.brand)),l.search){const e=l.search.toLowerCase();a=a.filter(n=>n.brand.toLowerCase().includes(e)||n.model.toLowerCase().includes(e)||n.vin.toLowerCase().includes(e))}return{data:a,total:a.length}},P=async l=>{await b();const a=u.find(e=>e.id===parseInt(l));if(!a)throw new Error("Vehicle not found");return a},U=async l=>{await b();const a={id:u.length+1,...l,stockDays:0};return u.push(a),a},_=async(l,a)=>{await b();const e=u.findIndex(n=>n.id===parseInt(l));if(e===-1)throw new Error("Vehicle not found");return u[e]={...u[e],...a},u[e]},E=async l=>{await b();const a=u.findIndex(e=>e.id===parseInt(l));if(a===-1)throw new Error("Vehicle not found");return u.splice(a,1),{success:!0}},H=F("vehicles",()=>{const l=d([]),a=d(null),e=d(!1),n=d(null),f=d({status:null,brand:null,search:""}),p=h(()=>l.value.length),w=h(()=>l.value.filter(s=>s.status==="Available")),V=h(()=>l.value.reduce((s,o)=>s+o.price,0));async function g(){e.value=!0,n.value=null;try{const s=await O(f.value);l.value=s.data}catch(s){n.value=s.message}finally{e.value=!1}}async function x(s){e.value=!0,n.value=null;try{a.value=await P(s)}catch(o){n.value=o.message}finally{e.value=!1}}async function i(s){e.value=!0,n.value=null;try{const o=await U(s);return l.value.unshift(o),o}catch(o){throw n.value=o.message,o}finally{e.value=!1}}async function t(s,o){e.value=!0,n.value=null;try{const y=await _(s,o),I=l.value.findIndex(B=>B.id===s);return I!==-1&&(l.value[I]=y),y}catch(y){throw n.value=y.message,y}finally{e.value=!1}}async function r(s){e.value=!0,n.value=null;try{await E(s),l.value=l.value.filter(o=>o.id!==s)}catch(o){throw n.value=o.message,o}finally{e.value=!1}}function k(s){f.value={...f.value,...s},g()}return{vehicles:l,currentVehicle:a,loading:e,error:n,filters:f,totalVehicles:p,availableVehicles:w,totalInventoryValue:V,loadVehicles:g,loadVehicleById:x,addVehicle:i,modifyVehicle:t,removeVehicle:r,setFilters:k}}),L={class:"page-container"},T={class:"p-4 md:p-8"},j={class:"table-wrapper w-full"},G={__name:"Vehicles",setup(l){const a=H(),e=d({pageIndex:0,pageSize:10}),n=d(""),f=d([]),p=d([]),w=[{key:"status",label:"Status",type:"select",operators:[{value:"eq",label:"is"},{value:"ne",label:"is not"}],options:[{value:"Available",label:"Available"},{value:"In Stock",label:"In Stock"},{value:"Sold",label:"Sold"}],aiHint:"Vehicle availability status"},{key:"brand",label:"Brand",type:"multiselect",operators:[{value:"in",label:"is any of"},{value:"notIn",label:"is none of"}],options:[{value:"Volkswagen",label:"Volkswagen"},{value:"Mercedes-Benz",label:"Mercedes-Benz"},{value:"Audi",label:"Audi"},{value:"Porsche",label:"Porsche"}],aiHint:"Car manufacturer brand"},{key:"price",label:"Price",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],prefix:"€",aiHint:"Vehicle price in euros"},{key:"stockDays",label:"Stock Days",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],aiHint:"Number of days in stock"}];C(()=>{a.loadVehicles()});const V=i=>new Intl.NumberFormat("en-US").format(i),g=i=>new Intl.NumberFormat("en-US").format(i),x=h(()=>[{accessorKey:"brand",header:"Vehicle",meta:{title:"Vehicle"},cell:({row:i})=>{const t=i.original;return c("div",{class:"flex items-center gap-3"},[c("div",{class:"w-12 h-12 bg-gradient-to-br from-gray-100 to-gray-200 rounded-md flex items-center justify-center shrink-0"},[c("i",{class:"fa-solid fa-car text-2xl text-gray-400"})]),c("div",[c("div",{class:"text-content-bold"},`${t.brand} ${t.model}`),c("div",{class:"text-meta"},t.year)])])}},{accessorKey:"status",header:"Status",meta:{title:"Status"},cell:({row:i})=>{const t=i.original.status;return c("span",{class:`badge-ui font-semibold ${t==="Available"?"bg-green-100 text-green-700":t==="In Stock"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`},t)}},{accessorKey:"price",header:"Price",meta:{title:"Price"},cell:({row:i})=>c("span",{class:"text-content-bold"},`€${V(i.original.price)}`)},{accessorKey:"kilometers",header:"Kilometers",meta:{title:"Kilometers"},cell:({row:i})=>`${g(i.original.kilometers)} km`},{accessorKey:"stockDays",header:"Stock Days",meta:{title:"Stock Days"},cell:({row:i})=>{const t=i.original.stockDays,r=t>300?"text-red-600":"text-gray-600";return c("span",{class:`text-content font-medium ${r}`},`${t} days`)}},{accessorKey:"requestedBy",header:"Requested By",meta:{title:"Requested By"},cell:({row:i})=>{const t=i.original.requestedBy;if(t&&t.length>0){const r=t.slice(0,2).map(s=>c("span",{class:"badge-ui bg-blue-50 text-blue-700 font-semibold"},s)),k=t.length>2?c("span",{class:"badge-ui bg-gray-100 text-gray-600 font-semibold"},`+${t.length-2}`):null;return c("div",{class:"flex flex-wrap gap-1"},[...r,k].filter(Boolean))}return c("span",{class:"text-meta"},"-")}}]);return(i,t)=>(N(),$("div",L,[S(A,{title:"Vehicles Inventory",subtitle:`${m(a).totalVehicles} vehicles in inventory`},null,8,["subtitle"]),v("div",T,[t[5]||(t[5]=v("div",{class:"mb-6 flex justify-end"},[v("button",{class:"btn-primary-lg"},[v("i",{class:"fa-solid fa-plus"}),D(" Add new ")])],-1)),v("div",j,[S(m(q),{data:m(a).vehicles,columns:x.value,loading:m(a).loading,columnFiltersOptions:{filterDefs:w},pagination:e.value,"onUpdate:pagination":t[0]||(t[0]=r=>e.value=r),globalFilter:n.value,"onUpdate:globalFilter":t[1]||(t[1]=r=>n.value=r),sorting:f.value,"onUpdate:sorting":t[2]||(t[2]=r=>f.value=r),columnFilters:p.value,"onUpdate:columnFilters":t[3]||(t[3]=r=>p.value=r),paginationOptions:{rowCount:m(a).totalVehicles},globalFilterOptions:{debounce:300}},{"empty-state":K(()=>[...t[4]||(t[4]=[v("div",{class:"empty-state"},[v("i",{class:"fa-solid fa-car empty-state-icon"}),v("p",{class:"empty-state-text"},"No vehicles found")],-1)])]),_:1},8,["data","columns","loading","columnFiltersOptions","pagination","globalFilter","sorting","columnFilters","paginationOptions"])])])]))}};export{G as default};
