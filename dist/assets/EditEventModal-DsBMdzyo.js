import{c as k,d,o as i,e,g as f,t as m,x as B,D as g,s as b,y as n,n as O,Q as A,u as R,r as J,l as G,k as N,p as c,v as j,J as T,F as z,i as L}from"./index-Bh03WcOC.js";import{z as I,F as W,L as q,C as H,W as Q,H as P,j as X,K as Y}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-DA4kdAII.js";import{u as Z}from"./users-C5eDhXwU.js";const E={class:"space-y-4"},_={class:"flex items-start gap-3"},ee={class:"text-content-bold"},te={class:"text-meta"},le={key:0,class:"flex items-start gap-3"},se={class:"text-content-bold"},ae={key:1,class:"flex items-start gap-3"},re={class:"text-content-bold"},ne={key:2,class:"flex items-start gap-3"},ie={class:"text-content-bold"},oe={key:3,class:"flex items-start gap-3"},de={class:"text-content-bold"},ue={key:4,class:"flex items-start gap-3"},be={class:"text-content-bold"},me={__name:"CalendarEventDetails",props:{event:{type:Object,required:!0}},setup(l){const u=l,v=k(()=>{var s;return(s=u.event)!=null&&s.start?new Date(u.event.start).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A"}),y=k(()=>{var s;return(s=u.event)!=null&&s.start?new Date(u.event.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"}),p=k(()=>{var s;return(s=u.event)!=null&&s.end?new Date(u.event.end).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A"});return(o,s)=>(i(),d("div",E,[e("div",_,[s[0]||(s[0]=e("div",{class:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-regular fa-calendar text-blue-600 text-sm"})],-1)),e("div",null,[e("p",ee,m(v.value),1),e("p",te,m(y.value)+" - "+m(p.value),1)])]),l.event.customer?(i(),d("div",le,[s[2]||(s[2]=e("div",{class:"w-8 h-8 rounded-lg bg-green-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-regular fa-user text-green-600 text-sm"})],-1)),e("div",null,[e("p",se,m(l.event.customer),1),s[1]||(s[1]=e("p",{class:"text-meta"},"Customer",-1))])])):f("",!0),l.event.vehicle?(i(),d("div",ae,[s[4]||(s[4]=e("div",{class:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-car text-purple-600 text-sm"})],-1)),e("div",null,[e("p",re,m(l.event.vehicle),1),s[3]||(s[3]=e("p",{class:"text-meta"},"Vehicle",-1))])])):f("",!0),l.event.dealership?(i(),d("div",ne,[s[6]||(s[6]=e("div",{class:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-building text-orange-600 text-sm"})],-1)),e("div",null,[e("p",ie,m(l.event.dealership),1),s[5]||(s[5]=e("p",{class:"text-meta"},"Dealership",-1))])])):f("",!0),l.event.assignee?(i(),d("div",oe,[s[8]||(s[8]=e("div",{class:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-regular fa-id-badge text-indigo-600 text-sm"})],-1)),e("div",null,[e("p",de,m(l.event.assignee),1),s[7]||(s[7]=e("p",{class:"text-meta"},"Assigned to",-1))])])):f("",!0),l.event.team?(i(),d("div",ue,[s[10]||(s[10]=e("div",{class:"w-8 h-8 rounded-lg bg-teal-50 flex items-center justify-center shrink-0"},[e("i",{class:"fa-solid fa-users text-teal-600 text-sm"})],-1)),e("div",null,[e("p",be,m(l.event.team),1),s[9]||(s[9]=e("p",{class:"text-meta"},"Team",-1))])])):f("",!0)]))}},ge=l=>({"test-drive":"Test Drive",appointment:"Dealership Visit",offsite:"Offsite Visit",workshop:"Workshop",call:"Call",delivery:"Delivery",meeting:"Meeting",training:"Training",marketing:"Marketing Event",leave:"Leave",memo:"Memo",recall:"Recall",absence:"Absence",other:"Other"})[l]||l,pe=l=>({"test-drive":"bg-blue-50 border-b border-blue-200",appointment:"bg-green-50 border-b border-green-200",offsite:"bg-emerald-50 border-b border-emerald-200",workshop:"bg-indigo-50 border-b border-indigo-200",call:"bg-orange-50 border-b border-orange-200",delivery:"bg-teal-50 border-b border-teal-200",meeting:"bg-purple-50 border-b border-purple-200",training:"bg-pink-50 border-b border-pink-200",marketing:"bg-yellow-50 border-b border-yellow-200",leave:"bg-red-50 border-b border-red-200",memo:"bg-gray-50 border-b border-gray-200",recall:"bg-cyan-50 border-b border-cyan-200",absence:"bg-rose-50 border-b border-rose-200",other:"bg-slate-50 border-b border-slate-200"})[l]||"bg-blue-50 border-b border-blue-200",ve=l=>({"test-drive":"bg-blue-100 text-blue-700 border-blue-200",appointment:"bg-green-100 text-green-700 border-green-200",offsite:"bg-emerald-100 text-emerald-700 border-emerald-200",workshop:"bg-indigo-100 text-indigo-700 border-indigo-200",call:"bg-orange-100 text-orange-700 border-orange-200",delivery:"bg-teal-100 text-teal-700 border-teal-200",meeting:"bg-purple-100 text-purple-700 border-purple-200",training:"bg-pink-100 text-pink-700 border-pink-200",marketing:"bg-yellow-100 text-yellow-700 border-yellow-200",leave:"bg-red-100 text-red-700 border-red-200",memo:"bg-gray-100 text-gray-700 border-gray-200",recall:"bg-cyan-100 text-cyan-700 border-cyan-200",absence:"bg-rose-100 text-rose-700 border-rose-200",other:"bg-slate-100 text-slate-700 border-slate-200"})[l]||"bg-blue-100 text-blue-700 border-blue-200",ce=l=>({"test-drive":"text-blue-900",appointment:"text-green-900",offsite:"text-emerald-900",workshop:"text-indigo-900",call:"text-orange-900",delivery:"text-teal-900",meeting:"text-purple-900",training:"text-pink-900",marketing:"text-yellow-900",leave:"text-red-900",memo:"text-gray-900",recall:"text-cyan-900",absence:"text-rose-900",other:"text-gray-900"})[l]||"text-blue-900",ze=l=>({"test-drive":"event-blue",appointment:"event-green",offsite:"event-emerald",workshop:"event-indigo",call:"event-orange",delivery:"event-teal",meeting:"event-purple",training:"event-pink",marketing:"event-yellow",leave:"event-red",memo:"event-gray",recall:"event-cyan",absence:"event-rose",other:"event-slate"})[l]||"event-blue",fe={class:"flex-1 min-w-0 pr-4"},xe={class:"flex items-center gap-2 mb-1"},ye={key:0,class:"badge-ui bg-red-100 text-red-700 border-red-200"},ke={key:1,class:"badge-ui bg-orange-100 text-orange-700 border-orange-200"},he={class:"p-6"},Le={__name:"QuickViewEventModal",props:{show:{type:Boolean,required:!0},event:{type:Object,default:null}},emits:["close","edit","delete"],setup(l,{emit:u}){const v=u,y=p=>{p||v("close")};return(p,o)=>(i(),B(n(Q),{open:l.show,"onUpdate:open":y},{default:g(()=>[b(n(I),null,{default:g(()=>[b(n(W),{class:"fixed inset-0 z-50 bg-black/50"}),b(n(q),{class:"w-full sm:max-w-md p-0"},{default:g(()=>{var s,S,D,r,U,M,h;return[e("div",{class:O(["px-6 py-5 border-b border flex items-center justify-between bg-surface",n(pe)((s=l.event)==null?void 0:s.type)])},[e("div",fe,[e("div",xe,[e("span",{class:O(["badge-ui",n(ve)((S=l.event)==null?void 0:S.type)])},m(n(ge)((D=l.event)==null?void 0:D.type)),3),((r=l.event)==null?void 0:r.status)==="cancelled"?(i(),d("span",ye," Cancelled ")):((U=l.event)==null?void 0:U.status)==="no-show"?(i(),d("span",ke," No-show ")):f("",!0)]),e("h3",{class:O(["text-xl font-bold tracking-tight truncate",n(ce)((M=l.event)==null?void 0:M.type)])},m((h=l.event)==null?void 0:h.title),3)])],2),e("div",he,[l.event?(i(),B(me,{key:0,event:l.event},null,8,["event"])):f("",!0)]),b(n(H),{class:"px-6 py-4 bg-surfaceSecondary flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3 border-t border"},{default:g(()=>{var x;return[(x=l.event)!=null&&x.id?(i(),d("button",{key:0,onClick:o[0]||(o[0]=t=>p.$emit("delete",l.event.id)),class:"text-sm text-red-600 hover:text-red-700 font-medium flex items-center gap-2 mr-auto order-1"},[...o[3]||(o[3]=[e("i",{class:"fa-regular fa-trash-can text-xs"},null,-1),e("span",null,"Delete",-1)])])):f("",!0),b(n(A),{label:"Cancel",variant:"outline",size:"small",class:"rounded-sm w-full sm:w-auto order-3 sm:order-2",onClick:o[1]||(o[1]=t=>p.$emit("close"))}),b(n(A),{label:"Edit",variant:"primary",size:"small",class:"rounded-sm w-full sm:w-auto order-2 sm:order-3 !bg-brand-red !hover:bg-brand-red-dark !text-white !border-brand-red",onClick:o[2]||(o[2]=t=>p.$emit("edit"))},{"icon-left":g(()=>[...o[4]||(o[4]=[e("i",{class:"fa-regular fa-pen-to-square"},null,-1)])]),_:1})]}),_:1})]}),_:1})]),_:1})]),_:1},8,["open"]))}},we={class:"space-y-4"},$e={class:"grid grid-cols-2 gap-4"},Ce=["disabled","value"],Te=["disabled"],Se={label:"Teams"},De=["value"],Ue={label:"Users"},Me=["value"],Ve={key:0,class:"text-xs text-sub mt-1"},je=["value"],Be={__name:"EditEventModal",props:{show:{type:Boolean,required:!0},event:{type:Object,default:null},dealerships:{type:Array,default:()=>[]},customer:{type:Object,default:null},assignee:{type:String,default:null},disabledFields:{type:Array,default:()=>[]}},emits:["save","cancel"],setup(l,{emit:u}){const v=l,y=u,p=R(),o=Z(),s=k(()=>o.assignableUsers),S=k(()=>o.assignableTeams),D=k(()=>r.value.assignee&&r.value.assignee.startsWith("team-")),r=J({id:null,type:"test-drive",title:"",date:"",time:"",customer:"",assignee:"",vehicle:"",dealership:"",status:"confirmed"});G(()=>[v.show,v.event],([x,t])=>{var w,a,$,F;if(x&&t)try{const C=t.start?new Date(t.start):new Date;if(isNaN(C.getTime()))throw new Error("Invalid date");const V=t.assigneeId?`user-${t.assigneeId}`:t.assignee||v.assignee||`user-${((w=p.currentUser)==null?void 0:w.id)||1}`;r.value={id:t.id,type:t.type||"test-drive",title:t.title||"",date:C.toISOString().split("T")[0],time:C.toTimeString().slice(0,5),customer:((a=v.customer)==null?void 0:a.name)||t.customer||"",assignee:V,vehicle:t.vehicle||"",dealership:t.dealership||"",status:t.status||"confirmed"}}catch(C){console.error("Error parsing event date:",C);const V=new Date,K=t.assigneeId?`user-${t.assigneeId}`:t.assignee||v.assignee||`user-${(($=p.currentUser)==null?void 0:$.id)||1}`;r.value={id:t.id,type:t.type||"test-drive",title:t.title||"",date:V.toISOString().split("T")[0],time:V.toTimeString().slice(0,5),customer:((F=v.customer)==null?void 0:F.name)||t.customer||"",assignee:K,vehicle:t.vehicle||"",dealership:t.dealership||"",status:t.status||"confirmed"}}});const U=()=>{r.value.title&&r.value.date&&y("save",{...r.value})},M=x=>{x||h()},h=()=>{y("cancel")};return(x,t)=>(i(),B(n(Q),{open:l.show,"onUpdate:open":M},{default:g(()=>[b(n(I),null,{default:g(()=>[b(n(W),{class:"fixed inset-0 z-50 bg-black/50"}),b(n(q),{class:"w-full sm:max-w-lg"},{default:g(()=>{var w;return[b(n(P),null,{default:g(()=>[b(n(X),null,{default:g(()=>[...t[9]||(t[9]=[N("Edit Event",-1)])]),_:1}),b(n(Y),null,{default:g(()=>[...t[10]||(t[10]=[N("Update the event details.",-1)])]),_:1})]),_:1}),e("div",we,[e("div",null,[t[12]||(t[12]=e("label",{class:"block label-upper mb-2"},"Event Type",-1)),c(e("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>r.value.type=a),class:"input"},[...t[11]||(t[11]=[e("option",{value:"test-drive"},"Test Drive",-1),e("option",{value:"appointment"},"Dealership Visit",-1),e("option",{value:"offsite"},"Offsite Visit",-1),e("option",{value:"workshop"},"Workshop",-1),e("option",{value:"call"},"Call",-1),e("option",{value:"delivery"},"Delivery",-1),e("option",{value:"meeting"},"Meeting",-1),e("option",{value:"training"},"Training",-1),e("option",{value:"marketing"},"Marketing Event",-1),e("option",{value:"leave"},"Leave",-1),e("option",{value:"memo"},"Memo",-1),e("option",{value:"recall"},"Recall",-1),e("option",{value:"absence"},"Absence",-1),e("option",{value:"other"},"Other",-1)])],512),[[j,r.value.type]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block label-upper mb-2"},"Title",-1)),c(e("input",{"onUpdate:modelValue":t[1]||(t[1]=a=>r.value.title=a),type:"text",placeholder:"Event title...",class:"input"},null,512),[[T,r.value.title]])]),e("div",$e,[e("div",null,[t[14]||(t[14]=e("label",{class:"block label-upper mb-2"},"Date",-1)),c(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>r.value.date=a),type:"date",class:"input"},null,512),[[T,r.value.date]])]),e("div",null,[t[15]||(t[15]=e("label",{class:"block label-upper mb-2"},"Time",-1)),c(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>r.value.time=a),type:"time",class:"input"},null,512),[[T,r.value.time]])])]),e("div",null,[t[16]||(t[16]=e("label",{class:"block label-upper mb-2"},"Customer",-1)),c(e("input",{"onUpdate:modelValue":t[4]||(t[4]=a=>r.value.customer=a),type:"text",placeholder:"Customer name...",class:"input",disabled:l.disabledFields.includes("customer"),value:((w=l.customer)==null?void 0:w.name)||r.value.customer},null,8,Ce),[[T,r.value.customer]])]),e("div",null,[t[18]||(t[18]=e("label",{class:"block label-upper mb-2"},"Assign to",-1)),c(e("select",{"onUpdate:modelValue":t[5]||(t[5]=a=>r.value.assignee=a),class:"input",disabled:l.disabledFields.includes("assignee")},[e("optgroup",Se,[(i(!0),d(z,null,L(S.value,a=>(i(),d("option",{key:`team-${a.id}`,value:`team-${a.id}`},m(a.name)+" Team ",9,De))),128))]),e("optgroup",Ue,[(i(!0),d(z,null,L(s.value,a=>{var $;return i(),d("option",{key:`user-${a.id}`,value:`user-${a.id}`},m(a.name)+m(a.id===(($=n(p).currentUser)==null?void 0:$.id)?" (Me)":""),9,Me)}),128))])],8,Te),[[j,r.value.assignee]]),D.value?(i(),d("p",Ve,[...t[17]||(t[17]=[e("i",{class:"fa-solid fa-users text-sub"},null,-1),N(" Any available team member will be assigned ",-1)])])):f("",!0)]),e("div",null,[t[19]||(t[19]=e("label",{class:"block label-upper mb-2"},"Vehicle",-1)),c(e("input",{"onUpdate:modelValue":t[6]||(t[6]=a=>r.value.vehicle=a),type:"text",placeholder:"Vehicle...",class:"input"},null,512),[[T,r.value.vehicle]])]),e("div",null,[t[21]||(t[21]=e("label",{class:"block label-upper mb-2"},"Dealership",-1)),c(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>r.value.dealership=a),class:"input"},[t[20]||(t[20]=e("option",{value:""},"Select dealership...",-1)),(i(!0),d(z,null,L(l.dealerships,a=>(i(),d("option",{key:a,value:a},m(a),9,je))),128))],512),[[j,r.value.dealership]])]),e("div",null,[t[23]||(t[23]=e("label",{class:"block label-upper mb-2"},"Status",-1)),c(e("select",{"onUpdate:modelValue":t[8]||(t[8]=a=>r.value.status=a),class:"input"},[...t[22]||(t[22]=[e("option",{value:"confirmed"},"Confirmed",-1),e("option",{value:"cancelled"},"Cancelled",-1),e("option",{value:"no-show"},"No-show",-1)])],512),[[j,r.value.status]])])]),b(n(H),{class:"flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3"},{default:g(()=>[b(n(A),{label:"Cancel",variant:"outline",size:"small",class:"rounded-sm w-full sm:w-auto",onClick:h}),b(n(A),{label:"Save Changes",variant:"primary",size:"small",class:"rounded-sm w-full sm:w-auto !bg-brand-red !hover:bg-brand-red-dark !text-white !border-brand-red",onClick:U})]),_:1})]}),_:1})]),_:1})]),_:1},8,["open"]))}};export{Le as _,Be as a,ze as g};
