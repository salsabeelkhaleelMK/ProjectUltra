import{P as u,a0 as C,r as d,c as p,k as D,E as c,d as $,l as I,e as b,m as y,y as B,o as K,j as N}from"./index-DhXdPUMX.js";import{_ as q}from"./PageHeader-DgVtM0CV.js";import{y as A}from"./components-BWnj0vXB.js";const f=(l=300)=>new Promise(a=>setTimeout(a,l)),P=async(l={})=>{await f();let a=[...u];if(l.status&&(a=a.filter(e=>e.status===l.status)),l.brand&&(a=a.filter(e=>e.brand===l.brand)),l.search){const e=l.search.toLowerCase();a=a.filter(n=>n.brand.toLowerCase().includes(e)||n.model.toLowerCase().includes(e)||n.vin.toLowerCase().includes(e))}return{data:a,total:a.length}},U=async l=>{await f();const a=u.find(e=>e.id===parseInt(l));if(!a)throw new Error("Vehicle not found");return a},_=async l=>{await f();const a={id:u.length+1,...l,stockDays:0};return u.push(a),a},E=async(l,a)=>{await f();const e=u.findIndex(n=>n.id===parseInt(l));if(e===-1)throw new Error("Vehicle not found");return u[e]={...u[e],...a},u[e]},O=async l=>{await f();const a=u.findIndex(e=>e.id===parseInt(l));if(a===-1)throw new Error("Vehicle not found");return u.splice(a,1),{success:!0}},H=C("vehicles",()=>{const l=d([]),a=d(null),e=d(!1),n=d(null),v=d({status:null,brand:null,search:""}),g=p(()=>l.value.length),w=p(()=>l.value.filter(s=>s.status==="Available")),V=p(()=>l.value.reduce((s,r)=>s+r.price,0));async function h(){e.value=!0,n.value=null;try{const s=await P(v.value);l.value=s.data}catch(s){n.value=s.message}finally{e.value=!1}}async function x(s){e.value=!0,n.value=null;try{a.value=await U(s)}catch(r){n.value=r.message}finally{e.value=!1}}async function k(s){e.value=!0,n.value=null;try{const r=await _(s);return l.value.unshift(r),r}catch(r){throw n.value=r.message,r}finally{e.value=!1}}async function o(s,r){e.value=!0,n.value=null;try{const m=await E(s,r),S=l.value.findIndex(F=>F.id===s);return S!==-1&&(l.value[S]=m),m}catch(m){throw n.value=m.message,m}finally{e.value=!1}}async function t(s){e.value=!0,n.value=null;try{await O(s),l.value=l.value.filter(r=>r.id!==s)}catch(r){throw n.value=r.message,r}finally{e.value=!1}}function i(s){v.value={...v.value,...s},h()}return{vehicles:l,currentVehicle:a,loading:e,error:n,filters:v,totalVehicles:g,availableVehicles:w,totalInventoryValue:V,loadVehicles:h,loadVehicleById:x,addVehicle:k,modifyVehicle:o,removeVehicle:t,setFilters:i}}),L={class:"page-container"},M={class:"p-4 md:p-8"},T={class:"table-wrapper w-full"},Q={__name:"Vehicles",setup(l){const a=H(),e=d({pageIndex:0,pageSize:10}),n=d(""),v=d([]),g=d([]),w=[{key:"status",label:"Status",type:"select",operators:[{value:"eq",label:"is"},{value:"ne",label:"is not"}],options:[{value:"Available",label:"Available"},{value:"In Stock",label:"In Stock"},{value:"Sold",label:"Sold"}],aiHint:"Vehicle availability status"},{key:"brand",label:"Brand",type:"multiselect",operators:[{value:"in",label:"is any of"},{value:"notIn",label:"is none of"}],options:[{value:"Volkswagen",label:"Volkswagen"},{value:"Mercedes-Benz",label:"Mercedes-Benz"},{value:"Audi",label:"Audi"},{value:"Porsche",label:"Porsche"}],aiHint:"Car manufacturer brand"},{key:"price",label:"Price",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],prefix:"€",aiHint:"Vehicle price in euros"},{key:"stockDays",label:"Stock Days",type:"inputrange",inputType:"number",operators:[{value:"between",label:"is between"},{value:"gte",label:"is at least"},{value:"lte",label:"is at most"}],aiHint:"Number of days in stock"}];D(()=>{a.loadVehicles()});const V=o=>new Intl.NumberFormat("en-US").format(o),h=o=>new Intl.NumberFormat("en-US").format(o),x=p(()=>({class:{tr:()=>"cursor-pointer hover:bg-gray-50 transition-colors"}})),k=p(()=>[{accessorKey:"brand",header:"Vehicle",meta:{title:"Vehicle"},cell:({row:o})=>{const t=o.original;return c("div",{class:"flex items-center gap-3"},[c("div",{class:"w-12 h-12 bg-gradient-to-br from-gray-100 to-gray-200 rounded-md flex items-center justify-center shrink-0"},[c("i",{class:"fa-solid fa-car text-2xl text-gray-400"})]),c("div",[c("div",{class:"text-content-bold"},`${t.brand} ${t.model}`),c("div",{class:"text-meta"},t.year)])])}},{accessorKey:"status",header:"Status",meta:{title:"Status"},cell:({row:o})=>{const t=o.original.status;return c("span",{class:`badge-ui font-semibold ${t==="Available"?"bg-green-100 text-green-700":t==="In Stock"?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`},t)}},{accessorKey:"price",header:"Price",meta:{title:"Price"},cell:({row:o})=>c("span",{class:"text-content-bold"},`€${V(o.original.price)}`)},{accessorKey:"kilometers",header:"Kilometers",meta:{title:"Kilometers"},cell:({row:o})=>`${h(o.original.kilometers)} km`},{accessorKey:"stockDays",header:"Stock Days",meta:{title:"Stock Days"},cell:({row:o})=>{const t=o.original.stockDays,i=t>300?"text-red-600":"text-gray-600";return c("span",{class:`text-content font-medium ${i}`},`${t} days`)}},{accessorKey:"requestedBy",header:"Requested By",meta:{title:"Requested By"},cell:({row:o})=>{const t=o.original.requestedBy;if(t&&t.length>0){const i=t.slice(0,2).map(r=>c("span",{class:"badge-ui bg-blue-50 text-blue-700 font-semibold"},r)),s=t.length>2?c("span",{class:"badge-ui bg-gray-100 text-gray-600 font-semibold"},`+${t.length-2}`):null;return c("div",{class:"flex flex-wrap gap-1"},[...i,s].filter(Boolean))}return c("span",{class:"text-meta"},"-")}}]);return(o,t)=>(K(),$("div",L,[I(q,{title:"Vehicles Inventory",subtitle:`${y(a).totalVehicles} vehicles in inventory`},null,8,["subtitle"]),b("div",M,[b("div",T,[I(y(A),{data:y(a).vehicles,columns:k.value,loading:y(a).loading,meta:x.value,columnFiltersOptions:{filterDefs:w},pagination:e.value,"onUpdate:pagination":t[0]||(t[0]=i=>e.value=i),globalFilter:n.value,"onUpdate:globalFilter":t[1]||(t[1]=i=>n.value=i),sorting:v.value,"onUpdate:sorting":t[2]||(t[2]=i=>v.value=i),columnFilters:g.value,"onUpdate:columnFilters":t[3]||(t[3]=i=>g.value=i),paginationOptions:{rowCount:y(a).totalVehicles},globalFilterOptions:{debounce:300,placeholder:"Q Search or ask a question"}},{toolbar:B(()=>[...t[4]||(t[4]=[b("button",{class:"btn-primary-lg"},[b("i",{class:"fa-solid fa-plus"}),N(" Add new ")],-1)])]),"empty-state":B(()=>[...t[5]||(t[5]=[b("div",{class:"empty-state"},[b("i",{class:"fa-solid fa-car empty-state-icon"}),b("p",{class:"empty-state-text"},"No vehicles found")],-1)])]),_:1},8,["data","columns","loading","meta","columnFiltersOptions","pagination","globalFilter","sorting","columnFilters","paginationOptions"])])])]))}};export{Q as default};
