import{m as d,d as B,r as m,c as E,o as V,a as p,b as t,t as i,u as y,e as b,w as j,v as M,F as _,f as C,g as Q,h as u,i as k,j as T}from"./index-vDfOg4W5.js";const h=(n=300)=>new Promise(s=>setTimeout(s,n)),D=async(n={})=>{await h();let s=[...d];if(n.search){const a=n.search.toLowerCase();s=s.filter(o=>{var x;return o.name.toLowerCase().includes(a)||o.email.toLowerCase().includes(a)||((x=o.company)==null?void 0:x.toLowerCase().includes(a))})}return{data:s,total:s.length}},F=async n=>{await h();const s=d.find(a=>a.id===parseInt(n));if(!s)throw new Error("Contact not found");return s},P=async n=>{await h();const s={id:d.length+1,...n,createdAt:new Date().toISOString()};return d.push(s),s},A=async(n,s)=>{await h();const a=d.findIndex(o=>o.id===parseInt(n));if(a===-1)throw new Error("Contact not found");return d[a]={...d[a],...s},d[a]},O=async n=>{await h();const s=d.findIndex(a=>a.id===parseInt(n));if(s===-1)throw new Error("Contact not found");return d.splice(s,1),{success:!0}},U=B("contacts",()=>{const n=m([]),s=m(null),a=m(!1),o=m(null),x=m(""),v=E(()=>n.value.length);async function e(){a.value=!0,o.value=null;try{const r=await D({search:x.value});n.value=r.data}catch(r){o.value=r.message}finally{a.value=!1}}async function l(r){a.value=!0,o.value=null;try{s.value=await F(r)}catch(c){o.value=c.message}finally{a.value=!1}}async function w(r){a.value=!0,o.value=null;try{const c=await P(r);return n.value.unshift(c),c}catch(c){throw o.value=c.message,c}finally{a.value=!1}}async function S(r,c){a.value=!0,o.value=null;try{const f=await A(r,c),g=n.value.findIndex(L=>L.id===r);return g!==-1&&(n.value[g]=f),f}catch(f){throw o.value=f.message,f}finally{a.value=!1}}async function I(r){a.value=!0,o.value=null;try{await O(r),n.value=n.value.filter(c=>c.id!==r)}catch(c){throw o.value=c.message,c}finally{a.value=!1}}function N(r){x.value=r,e()}return{contacts:n,currentContact:s,loading:a,error:o,searchQuery:x,totalContacts:v,loadContacts:e,loadContactById:l,addContact:w,modifyContact:S,removeContact:I,setSearchQuery:N}}),$={class:"page-container"},q={class:"page-header"},z={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},G={class:"page-header-subtitle"},H={class:"mt-4 md:mt-6 flex flex-col sm:flex-row items-stretch sm:items-center gap-3"},J={class:"flex-1 min-w-0 sm:max-w-md"},K={class:"relative"},R={class:"p-4 md:p-8"},W={key:0,class:"empty-state"},X={key:1,class:"empty-state"},Y={key:2,class:"card overflow-hidden"},Z={class:"overflow-x-auto -mx-4 md:mx-0"},tt={class:"w-full"},et={class:"divide-y divide-gray-100"},st={class:"px-3 md:px-6 py-4 whitespace-nowrap"},at={class:"flex items-center gap-2 md:gap-3"},nt={class:"w-8 h-8 md:w-9 md:h-9 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-xs font-bold shrink-0"},ot={class:"min-w-0"},lt={class:"font-semibold text-gray-900 truncate max-w-[120px] md:max-w-none"},rt={class:"px-3 md:px-6 py-4 text-xs text-gray-600 whitespace-nowrap"},ct={class:"truncate block max-w-[100px]"},it={class:"px-3 md:px-6 py-4 whitespace-nowrap"},dt={class:"text-xs text-gray-600 truncate max-w-[150px]"},pt={class:"px-3 md:px-6 py-4 text-xs text-gray-600 whitespace-nowrap"},ut={class:"px-3 md:px-6 py-4 whitespace-nowrap"},xt={class:"badge-ui bg-gray-100 text-gray-700 font-semibold"},mt={class:"px-3 md:px-6 py-4 whitespace-nowrap hidden xl:table-cell"},yt={class:"flex flex-wrap gap-1"},ft={key:0,class:"text-xs text-gray-400"},ht={class:"px-4 md:px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3"},wt={class:"text-xs text-gray-600"},gt={__name:"Contacts",setup(n){const s=U(),a=m(""),o=m(!1);V(()=>{s.loadContacts()});const x=()=>{s.setSearchQuery(a.value)};return(v,e)=>(u(),p("div",$,[t("div",q,[t("div",z,[t("div",null,[e[4]||(e[4]=t("h1",{class:"page-header-title"},"Contacts & Accounts",-1)),t("p",G,i(y(s).totalContacts)+" contacts",1)]),t("button",{onClick:e[0]||(e[0]=l=>o.value=!0),class:"btn-primary self-start sm:self-auto"},[...e[5]||(e[5]=[t("i",{class:"fa-solid fa-plus"},null,-1),b(),t("span",{class:"hidden sm:inline"},"New Contact",-1),t("span",{class:"sm:hidden"},"New",-1)])])]),t("div",H,[t("div",J,[t("div",K,[e[6]||(e[6]=t("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),j(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>a.value=l),onInput:x,type:"text",placeholder:"Search contacts...",class:"input-with-icon"},null,544),[[M,a.value]])])]),e[7]||(e[7]=t("button",{class:"btn-secondary text-sm"},[t("i",{class:"fa-solid fa-filter mr-2"}),b(" Filters ")],-1))])]),t("div",R,[y(s).loading?(u(),p("div",W,[...e[8]||(e[8]=[t("i",{class:"fa-solid fa-spinner fa-spin text-4xl text-gray-400 mb-4"},null,-1),t("p",{class:"empty-state-text"},"Loading contacts...",-1)])])):y(s).contacts.length===0?(u(),p("div",X,[...e[9]||(e[9]=[t("i",{class:"fa-solid fa-users empty-state-icon"},null,-1),t("p",{class:"empty-state-text"},"No contacts found",-1)])])):(u(),p("div",Y,[t("div",Z,[t("table",tt,[e[12]||(e[12]=t("thead",{class:"bg-gray-50 border-b border-gray-200"},[t("tr",null,[t("th",{class:"px-3 md:px-6 py-3 text-left"},[t("input",{type:"checkbox",class:"rounded"})]),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Contact"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Company"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Email"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Phone"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Source"),t("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap hidden xl:table-cell"},"Tags"),t("th",{class:"px-3 md:px-6 py-3"})])],-1)),t("tbody",et,[(u(!0),p(_,null,C(y(s).contacts,l=>(u(),p("tr",{key:l.id,class:"hover:bg-gray-50 cursor-pointer transition-colors"},[t("td",{class:"px-3 md:px-6 py-4 whitespace-nowrap",onClick:e[2]||(e[2]=k(()=>{},["stop"]))},[...e[10]||(e[10]=[t("input",{type:"checkbox",class:"rounded"},null,-1)])]),t("td",st,[t("div",at,[t("div",nt,i(l.initials),1),t("div",ot,[t("div",lt,i(l.name),1)])])]),t("td",rt,[t("span",ct,i(l.company||"-"),1)]),t("td",it,[t("div",dt,i(l.email),1)]),t("td",pt,i(l.phone),1),t("td",ut,[t("span",xt,i(l.source),1)]),t("td",mt,[t("div",yt,[(u(!0),p(_,null,C(l.tags,w=>(u(),p("span",{key:w,class:"badge-ui bg-blue-50 text-blue-700 font-semibold"},i(w),1))),128)),!l.tags||l.tags.length===0?(u(),p("span",ft,"-")):T("",!0)])]),t("td",{class:"px-3 md:px-6 py-4 whitespace-nowrap",onClick:e[3]||(e[3]=k(()=>{},["stop"]))},[...e[11]||(e[11]=[t("button",{class:"text-gray-400 hover:text-gray-600"},[t("i",{class:"fa-solid fa-ellipsis-vertical"})],-1)])])]))),128))])])]),t("div",ht,[t("div",wt," Showing "+i(y(s).contacts.length)+" of "+i(y(s).totalContacts)+" contacts ",1),e[13]||(e[13]=Q('<div class="flex items-center gap-1 md:gap-2 flex-wrap"><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 whitespace-nowrap">Previous</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm bg-blue-600 text-white rounded">1</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50">2</button><button class="px-2 md:px-3 py-1 text-xs md:text-sm border border-gray-200 rounded hover:bg-gray-50 whitespace-nowrap">Next</button></div>',1))])]))])]))}};export{gt as default};
