import{ap as P,D as me,r as A,c as N,aq as te,l as ne,m as fe,J as pe,p as X,d as R,o as E,s as l,B as a,y as t,k as m,x as W,g as j,e as s,a4 as re,F as ve,i as ye,t as O,n as Q,w as xe}from"./index-BcuDIK-O.js";import{e as Z,t as ee,J as I,Q as V,c as M,Y as L,n as ge,G as H,W as z,U as G,H as J,j as T,o as be,p as ue}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-Oem9_7mP.js";import{fetchContacts as we,fetchContactById as de,createContact as Ce,updateContact as Ve,deleteContact as he,addRequestedCarToContact as ke,convertContactToLead as Te,convertContactToOpportunity as Se}from"./contacts-Deg_Cdvm.js";const Y=(r=300)=>new Promise(i=>setTimeout(i,r)),le=()=>P.filter(r=>r.company&&r.company!==""),_e=async(r={})=>{await Y();let i=le();if(r.search){const o=r.search.toLowerCase();i=i.filter(c=>{var g;return c.name.toLowerCase().includes(o)||c.email.toLowerCase().includes(o)||((g=c.company)==null?void 0:g.toLowerCase().includes(o))})}return{data:i,total:i.length}},ie=async r=>{var c;await Y();const o=le().find(g=>g.id===parseInt(r));if(!o)throw new Error("Account not found");return{...o,id:o.id,name:o.name||o.companyName||o.company||"",companyName:o.companyName||o.company||o.name||"",type:o.type||(o.company?"Company":"Private"),vat:o.vat||o.vatNumber||null,vatNumber:o.vatNumber||o.vat||null,taxCode:o.taxCode||o.fiscalCode||null,fiscalCode:o.fiscalCode||o.taxCode||null,accountOwner:o.accountOwner||o.owner||null,owner:o.owner||o.accountOwner||null,masterContactId:o.masterContactId||((c=o.masterContact)==null?void 0:c.id)||null,masterContact:o.masterContact||(o.masterContactId?{id:o.masterContactId}:null),description:o.description||o.notes||null,notes:o.notes||o.description||null,numberOfEmployees:o.numberOfEmployees||null}},Ee=async r=>{await Y();const i={id:P.length+1,...r,createdAt:new Date().toISOString(),lastContact:new Date().toISOString()};return P.push(i),i},qe=async(r,i)=>{if(await Y(),le().findIndex(k=>k.id===parseInt(r))===-1)throw new Error("Account not found");const g=P.findIndex(k=>k.id===parseInt(r));return g!==-1&&(P[g]={...P[g],...i}),P[g]},Oe=async r=>{await Y();const i=P.findIndex(o=>o.id===parseInt(r));if(i===-1)throw new Error("Account not found");return P.splice(i,1),{success:!0}},Ae=me("customers",()=>{const r=A([]),i=A(null),o=A(!1),c=A(null),g=A(""),k=N(()=>r.value.filter(n=>n.type==="contact")),C=N(()=>r.value.filter(n=>n.type==="account")),S=N(()=>r.value.length),x=N(()=>k.value.length),b=N(()=>C.value.length),w=async(n={})=>{o.value=!0,c.value=null;try{const[f,p]=await Promise.all([we(n),_e(n)]),y=[...f.data.map(h=>({...h,type:"contact"})),...p.data.map(h=>({...h,type:"account"}))];return r.value=y,{data:y,total:y.length}}catch(f){throw c.value=f.message,f}finally{o.value=!1}},d=async(n,f=null)=>{o.value=!0,c.value=null;try{if(f==="contact")i.value={...await de(n),type:"contact"};else if(f==="account")i.value={...await ie(n),type:"account"};else try{const p=await de(n);i.value={...p,type:"contact"}}catch{const p=await ie(n);i.value={...p,type:"account"}}return i.value}catch(p){throw c.value=p.message,p}finally{o.value=!1}},U=async n=>{o.value=!0,c.value=null;try{const f=n.company&&n.company!=="",y={...await(f?Ee(n):Ce(n)),type:f?"account":"contact"};return r.value.unshift(y),y}catch(f){throw c.value=f.message,f}finally{o.value=!1}},_=async(n,f,p)=>{var y;o.value=!0,c.value=null;try{const h=await(p==="account"?qe(n,f):Ve(n,f)),K=r.value.findIndex(v=>v.id===n);return K!==-1&&(r.value[K]={...h,type:p}),((y=i.value)==null?void 0:y.id)===n&&(i.value={...h,type:p}),{...h,type:p}}catch(h){throw c.value=h.message,h}finally{o.value=!1}},D=async(n,f)=>{var p;o.value=!0,c.value=null;try{await(f==="account"?Oe(n):he(n)),r.value=r.value.filter(y=>y.id!==n),((p=i.value)==null?void 0:p.id)===n&&(i.value=null)}catch(y){throw c.value=y.message,y}finally{o.value=!1}};function q(n){g.value=n,w({search:n})}return{customers:r,contacts:k,accounts:C,currentCustomer:i,loading:o,error:c,searchQuery:g,totalCustomers:S,totalContacts:x,totalAccounts:b,fetchCustomers:w,fetchCustomerById:d,addCustomer:U,updateCustomer:_,removeCustomer:D,setSearchQuery:q,addContact:async n=>await U({...n,company:null}),modifyContact:async(n,f)=>await _(n,f,"contact"),removeContact:async n=>await D(n,"contact"),addRequestedCar:async(n,f)=>{const p=r.value.find(y=>y.id===n);if(!p)throw new Error("Customer not found");if(p.type==="contact")return await ke(n,f);throw new Error("Requested cars not supported for accounts")},convertToLead:async n=>{var p;const f=r.value.find(y=>y.id===n);if(!f)throw new Error("Customer not found");if(f.type==="contact"){const y=await Te(n);return r.value=r.value.filter(h=>h.id!==n),((p=i.value)==null?void 0:p.id)===n&&(i.value=null),y}throw new Error("Only contacts can be converted to leads")},convertToOpportunity:async n=>{var p;const f=r.value.find(y=>y.id===n);if(!f)throw new Error("Customer not found");if(f.type==="contact"){const y=await Se(n);return r.value=r.value.filter(h=>h.id!==n),((p=i.value)==null?void 0:p.id)===n&&(i.value=null),y}throw new Error("Only contacts can be converted to opportunities")}}});function Ue({contactMode:r,selectedContact:i,contactFormData:o}){const c=te({name:"",email:""}),g=x=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x),k=N(()=>r.value==="existing"?!!i.value:!!(o.name&&o.email));return{errors:c,canSubmit:k,validateEmail:g,validateContactForm:()=>{if(c.name="",c.email="",r.value==="new"){let x=!0;return o.name.trim()||(c.name="Contact name is required",x=!1),o.email.trim()?g(o.email)||(c.email="Please enter a valid email address",x=!1):(c.email="Email is required",x=!1),x}else return!!i.value},clearErrors:()=>{c.name="",c.email=""}}}function De({contactMode:r,selectedContact:i,contactFormData:o,vehicleFormData:c,markAsLead:g,markAsOpportunity:k,validateContactForm:C,onSubmit:S}){const x=A(!1),b=_=>Object.entries(_).reduce((D,[q,B])=>{if(B!==null&&B!==""&&B!==void 0){if(q==="year"&&B===new Date().getFullYear())return D;D[q]=B}return D},{}),w=()=>r.value==="new"?{name:o.name.trim(),email:o.email.trim(),phone:o.phone.trim(),company:o.company.trim()}:null,d=()=>{if(!C())return;x.value=!0;const _=b(c),D=w(),q={contactMode:r.value,selectedContact:i.value,contactData:D,vehicleData:Object.keys(_).length>0?_:null,markAsLead:g.value,markAsOpportunity:k.value};S&&S(q)},U=()=>{x.value=!1};return{isSubmitting:N(()=>x.value),handleSubmit:d,resetSubmitting:U}}const Ie={key:0,class:"space-y-6"},Le={class:"space-y-2"},Re={class:"flex gap-6"},Me={key:0,class:"space-y-6"},Ne={class:"relative space-y-2"},Pe={class:"relative w-full"},Be=["onClick"],Fe={class:"w-8 h-8 rounded-full bg-muted text-primary flex items-center justify-center text-xs font-bold shrink-0"},je={class:"flex-1 min-w-0"},We={class:"font-semibold text-foreground text-xs truncate"},Ye={class:"text-muted-foreground text-xs truncate"},Qe={class:"flex items-center justify-between"},He={class:"flex items-center gap-3"},ze={class:"w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center text-xs font-bold border border-border"},Ge={class:"font-bold text-foreground text-xs"},Je={class:"text-muted-foreground text-xs"},$e={key:1,class:"space-y-6"},Ke={class:"space-y-2"},Xe={key:0,class:"text-brand-red text-xs mt-1"},Ze={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},et={class:"space-y-2"},tt={key:0,class:"text-brand-red text-xs mt-1"},lt={class:"space-y-2"},at={class:"space-y-2"},st={class:"flex items-center gap-3"},ot={class:"w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center text-xs font-bold border border-border"},nt={class:"font-bold text-foreground text-xs"},rt={class:"text-muted-foreground text-xs"},ut={class:"space-y-4"},dt={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-6"},it={class:"space-y-2"},ct={class:"space-y-2"},mt={class:"space-y-2"},ft={class:"space-y-2"},pt={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},vt={class:"space-y-4"},yt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},xt={class:"space-y-2"},gt={class:"space-y-2"},bt={class:"space-y-4"},wt={class:"grid grid-cols-1 sm:grid-cols-2 gap-6"},Ct={class:"space-y-2"},Vt={class:"space-y-2"},ht={class:"space-y-2"},kt={key:0,class:"flex flex-col md:flex-row gap-3"},Tt={class:"text-xs font-bold text-foreground"},Ot={__name:"UnifiedAddForm",props:{initialContact:{type:Object,default:null},hideContactSelection:{type:Boolean,default:!1},forceType:{type:String,default:""}},emits:["submit"],setup(r,{expose:i,emit:o}){const c=r,g=o,k=Ae(),C=A(c.initialContact?"existing":"new"),S=A(""),x=A(!1),b=A(c.initialContact||null),w=te({name:"",email:"",phone:"",company:""}),d=te({brand:"",model:"",year:new Date().getFullYear(),price:null,requestMessage:"",requestType:"",source:"",dealership:"",channel:"Email",fuelType:"",gearType:"",kilometers:null,stockDays:null}),U=A(c.forceType==="lead"),_=A(c.forceType==="opportunity");ne(()=>c.forceType,v=>{v==="lead"?(U.value=!0,_.value=!1):v==="opportunity"&&(U.value=!1,_.value=!0)}),ne(()=>c.initialContact,v=>{v&&(b.value=v,S.value=v.name,C.value="existing")},{immediate:!0});let D=null;const{errors:q,canSubmit:B,validateContactForm:ae,clearErrors:se}=Ue({contactMode:C,selectedContact:b,contactFormData:w});fe(()=>{k.customers.length===0&&k.fetchCustomers()});const $=N(()=>{if(!S.value.trim())return k.customers.slice(0,10);const v=S.value.toLowerCase();return k.customers.filter(e=>e.name.toLowerCase().includes(v)||e.email.toLowerCase().includes(v)||e.company&&e.company.toLowerCase().includes(v)).slice(0,10)}),F=N(()=>!!(d.brand||d.model||d.year!==new Date().getFullYear()||d.price||d.requestMessage||d.requestType||d.source||d.dealership||d.fuelType||d.gearType||d.kilometers||d.stockDays)),{isSubmitting:oe,handleSubmit:n,resetSubmitting:f}=De({contactMode:C,selectedContact:b,contactFormData:w,vehicleFormData:d,markAsLead:U,markAsOpportunity:_,validateContactForm:ae,onSubmit:v=>{g("submit",v)}}),p=()=>{clearTimeout(D),D=setTimeout(()=>{x.value=!0},300)},y=v=>{b.value=v,S.value=v.name,x.value=!1},h=()=>{b.value=null,S.value="",x.value=!1};return i({resetSubmitting:f,submit:n,clear:()=>{C.value="new",b.value=null,S.value="",x.value=!1,w.name="",w.email="",w.phone="",w.company="",Object.keys(d).forEach(v=>{v==="year"?d[v]=new Date().getFullYear():v==="channel"?d[v]="Email":typeof d[v]=="number"?d[v]=null:d[v]=""}),U.value=!1,_.value=!1,se()},canSubmit:B,isSubmitting:oe}),(v,e)=>{const ce=pe("click-outside");return X((E(),R("form",{onSubmit:e[19]||(e[19]=xe((...u)=>v.handleSubmit&&v.handleSubmit(...u),["prevent"])),class:"w-full"},[l(t(L),{class:"mb-4"},{default:a(()=>[l(t(Z),null,{default:a(()=>[l(t(ee),null,{default:a(()=>[...e[20]||(e[20]=[m("Contact Information",-1)])]),_:1})]),_:1}),l(t(I),{class:"space-y-6"},{default:a(()=>[r.hideContactSelection?b.value?(E(),W(t(L),{key:1,class:"bg-muted border-border"},{default:a(()=>[l(t(I),{class:"p-4"},{default:a(()=>[s("div",st,[s("div",ot,O(b.value.initials),1),s("div",null,[s("div",nt,O(b.value.name),1),s("div",rt,O(b.value.email),1)])])]),_:1})]),_:1})):j("",!0):(E(),R("div",Ie,[s("div",Le,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[21]||(e[21]=[m("Contact Type",-1)])]),_:1}),s("div",Re,[l(t(V),{class:"flex items-center gap-2 cursor-pointer"},{default:a(()=>[X(s("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=u=>C.value=u),value:"new",class:"w-4 h-4 text-brand-primary focus:ring-brand-primary border-gray-300"},null,512),[[re,C.value]]),e[22]||(e[22]=s("span",{class:"text-sm text-muted-foreground"},"New Contact",-1))]),_:1}),l(t(V),{class:"flex items-center gap-2 cursor-pointer"},{default:a(()=>[X(s("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=u=>C.value=u),value:"existing",class:"w-4 h-4 text-brand-primary focus:ring-brand-primary border-gray-300"},null,512),[[re,C.value]]),e[23]||(e[23]=s("span",{class:"text-sm text-muted-foreground"},"Existing Contact",-1))]),_:1})])]),C.value==="existing"?(E(),R("div",Me,[s("div",Ne,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[24]||(e[24]=[m("Search Contact",-1)])]),_:1}),s("div",Pe,[e[25]||(e[25]=s("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground text-xs z-10"},null,-1)),l(t(M),{modelValue:S.value,"onUpdate:modelValue":e[2]||(e[2]=u=>S.value=u),onInput:p,onFocus:e[3]||(e[3]=u=>x.value=!0),type:"text",placeholder:"Search by name, email, or company...",class:"pl-9 w-full h-10"},null,8,["modelValue"])]),x.value&&$.value.length>0?(E(),W(t(L),{key:0,class:"absolute z-50 w-full mt-1 max-h-64 overflow-y-auto shadow-lg"},{default:a(()=>[l(t(I),{class:"p-0"},{default:a(()=>[(E(!0),R(ve,null,ye($.value,u=>(E(),R("div",{key:u.id,onClick:St=>y(u),class:"flex items-center gap-2 p-3 hover:bg-muted cursor-pointer border-b border-border last:border-b-0"},[s("div",Fe,O(u.initials),1),s("div",je,[s("div",We,O(u.name),1),s("div",Ye,O(u.email),1)]),e[26]||(e[26]=s("i",{class:"fa-solid fa-chevron-right text-muted-foreground text-xs"},null,-1))],8,Be))),128))]),_:1})]),_:1})):j("",!0)]),b.value?(E(),W(t(L),{key:0,class:"bg-muted border-border"},{default:a(()=>[l(t(I),{class:"p-4"},{default:a(()=>[s("div",Qe,[s("div",He,[s("div",ze,O(b.value.initials),1),s("div",null,[s("div",Ge,O(b.value.name),1),s("div",Je,O(b.value.email),1)])]),l(t(ge),{variant:"ghost",size:"small",class:"h-8 w-8 p-0",onClick:h},{default:a(()=>[...e[27]||(e[27]=[s("i",{class:"fa-solid fa-xmark text-sm"},null,-1)])]),_:1})])]),_:1})]),_:1})):j("",!0)])):(E(),R("div",$e,[s("div",Ke,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[28]||(e[28]=[m(" Contact Name ",-1),s("span",{class:"text-brand-red"},"*",-1)])]),_:1}),l(t(M),{modelValue:w.name,"onUpdate:modelValue":e[4]||(e[4]=u=>w.name=u),type:"text",placeholder:"Enter contact name...",class:"w-full h-10",required:C.value==="new",error:t(q).name},null,8,["modelValue","required","error"]),t(q).name?(E(),R("p",Xe,O(t(q).name),1)):j("",!0)]),s("div",Ze,[s("div",et,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[29]||(e[29]=[m(" Email ",-1),s("span",{class:"text-brand-red"},"*",-1)])]),_:1}),l(t(M),{modelValue:w.email,"onUpdate:modelValue":e[5]||(e[5]=u=>w.email=u),type:"email",placeholder:"contact@example.com",class:"w-full h-10",required:C.value==="new",error:t(q).email},null,8,["modelValue","required","error"]),t(q).email?(E(),R("p",tt,O(t(q).email),1)):j("",!0)]),s("div",lt,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[30]||(e[30]=[m("Phone",-1)])]),_:1}),l(t(M),{modelValue:w.phone,"onUpdate:modelValue":e[6]||(e[6]=u=>w.phone=u),type:"tel",placeholder:"+49...",class:"w-full h-10"},null,8,["modelValue"])])]),s("div",at,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[31]||(e[31]=[m("Company (optional)",-1)])]),_:1}),l(t(M),{modelValue:w.company,"onUpdate:modelValue":e[7]||(e[7]=u=>w.company=u),type:"text",placeholder:"Company name...",class:"w-full h-10"},null,8,["modelValue"])])]))]))]),_:1})]),_:1}),l(t(L),{class:"mb-4"},{default:a(()=>[l(t(Z),null,{default:a(()=>[l(t(ee),null,{default:a(()=>[...e[32]||(e[32]=[m(" Vehicle Details ",-1),s("span",{class:"text-meta font-normal text-xs"},"(Optional)",-1)])]),_:1})]),_:1}),l(t(I),{class:"space-y-8"},{default:a(()=>[s("div",ut,[e[37]||(e[37]=s("h4",{class:"text-xs font-bold uppercase text-muted-foreground tracking-wider"},"Basic Information",-1)),s("div",dt,[s("div",it,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[33]||(e[33]=[m("Brand",-1)])]),_:1}),l(t(M),{modelValue:d.brand,"onUpdate:modelValue":e[8]||(e[8]=u=>d.brand=u),type:"text",placeholder:"e.g., VW",class:"w-full h-10"},null,8,["modelValue"])]),s("div",ct,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[34]||(e[34]=[m("Model",-1)])]),_:1}),l(t(M),{modelValue:d.model,"onUpdate:modelValue":e[9]||(e[9]=u=>d.model=u),type:"text",placeholder:"e.g., ID.4",class:"w-full h-10"},null,8,["modelValue"])]),s("div",mt,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[35]||(e[35]=[m("Year",-1)])]),_:1}),l(t(M),{modelValue:d.year,"onUpdate:modelValue":e[10]||(e[10]=u=>d.year=u),type:"number",min:1900,max:new Date().getFullYear()+1,placeholder:"2024",class:"w-full h-10"},null,8,["modelValue","max"])]),s("div",ft,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[36]||(e[36]=[m("Price",-1)])]),_:1}),l(t(M),{modelValue:d.price,"onUpdate:modelValue":e[11]||(e[11]=u=>d.price=u),type:"number",min:0,placeholder:"45000",class:"w-full h-10"},null,8,["modelValue"])])])]),s("div",pt,[s("div",vt,[e[49]||(e[49]=s("h4",{class:"text-xs font-bold uppercase text-muted-foreground tracking-wider"},"Request Details",-1)),s("div",yt,[s("div",xt,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[38]||(e[38]=[m("Request Type",-1)])]),_:1}),l(t(H),{modelValue:d.requestType,"onUpdate:modelValue":e[12]||(e[12]=u=>d.requestType=u)},{default:a(()=>[l(t(z),{class:"w-full h-10"},{default:a(()=>[l(t(G),{placeholder:"Select type"})]),_:1}),l(t(J),null,{default:a(()=>[l(t(T),{value:"Quotation"},{default:a(()=>[...e[39]||(e[39]=[m("Quotation",-1)])]),_:1}),l(t(T),{value:"Test Drive"},{default:a(()=>[...e[40]||(e[40]=[m("Test Drive",-1)])]),_:1}),l(t(T),{value:"Information"},{default:a(()=>[...e[41]||(e[41]=[m("Information",-1)])]),_:1}),l(t(T),{value:"Purchase"},{default:a(()=>[...e[42]||(e[42]=[m("Purchase",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",gt,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[43]||(e[43]=[m("Source",-1)])]),_:1}),l(t(H),{modelValue:d.source,"onUpdate:modelValue":e[13]||(e[13]=u=>d.source=u)},{default:a(()=>[l(t(z),{class:"w-full h-10"},{default:a(()=>[l(t(G),{placeholder:"Select source"})]),_:1}),l(t(J),null,{default:a(()=>[l(t(T),{value:"Marketing"},{default:a(()=>[...e[44]||(e[44]=[m("Marketing",-1)])]),_:1}),l(t(T),{value:"Website"},{default:a(()=>[...e[45]||(e[45]=[m("Website",-1)])]),_:1}),l(t(T),{value:"Phone"},{default:a(()=>[...e[46]||(e[46]=[m("Phone",-1)])]),_:1}),l(t(T),{value:"Walk-in"},{default:a(()=>[...e[47]||(e[47]=[m("Walk-in",-1)])]),_:1}),l(t(T),{value:"Referral"},{default:a(()=>[...e[48]||(e[48]=[m("Referral",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),s("div",bt,[e[58]||(e[58]=s("h4",{class:"text-xs font-bold uppercase text-muted-foreground tracking-wider"},"Vehicle Specs",-1)),s("div",wt,[s("div",Ct,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[50]||(e[50]=[m("Fuel Type",-1)])]),_:1}),l(t(H),{modelValue:d.fuelType,"onUpdate:modelValue":e[14]||(e[14]=u=>d.fuelType=u)},{default:a(()=>[l(t(z),{class:"w-full h-10"},{default:a(()=>[l(t(G),{placeholder:"Select fuel"})]),_:1}),l(t(J),null,{default:a(()=>[l(t(T),{value:"Petrol"},{default:a(()=>[...e[51]||(e[51]=[m("Petrol",-1)])]),_:1}),l(t(T),{value:"Diesel"},{default:a(()=>[...e[52]||(e[52]=[m("Diesel",-1)])]),_:1}),l(t(T),{value:"Electric"},{default:a(()=>[...e[53]||(e[53]=[m("Electric",-1)])]),_:1}),l(t(T),{value:"Hybrid"},{default:a(()=>[...e[54]||(e[54]=[m("Hybrid",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",Vt,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[55]||(e[55]=[m("Gear Type",-1)])]),_:1}),l(t(H),{modelValue:d.gearType,"onUpdate:modelValue":e[15]||(e[15]=u=>d.gearType=u)},{default:a(()=>[l(t(z),{class:"w-full h-10"},{default:a(()=>[l(t(G),{placeholder:"Select gear"})]),_:1}),l(t(J),null,{default:a(()=>[l(t(T),{value:"Manual"},{default:a(()=>[...e[56]||(e[56]=[m("Manual",-1)])]),_:1}),l(t(T),{value:"Automatic"},{default:a(()=>[...e[57]||(e[57]=[m("Automatic",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])]),s("div",ht,[l(t(V),{class:"block text-sm font-semibold text-foreground"},{default:a(()=>[...e[59]||(e[59]=[m("Request Message",-1)])]),_:1}),l(t(be),{modelValue:d.requestMessage,"onUpdate:modelValue":e[16]||(e[16]=u=>d.requestMessage=u),rows:3,placeholder:"Customer's message or notes...",class:"w-full"},null,8,["modelValue"])])]),_:1})]),_:1}),l(t(L),{class:"bg-muted border-border mb-4"},{default:a(()=>[l(t(Z),null,{default:a(()=>[l(t(ee),null,{default:a(()=>[...e[60]||(e[60]=[m("Create Task (Optional)",-1)])]),_:1})]),_:1}),l(t(I),{class:"space-y-3"},{default:a(()=>[e[65]||(e[65]=s("p",{class:"text-muted-foreground text-xs"},[m(" Convert this contact to a lead or opportunity. "),s("span",{class:"font-semibold text-muted-foreground"},"Requires vehicle details.")],-1)),r.forceType?(E(),W(t(L),{key:1,class:"bg-white border-border"},{default:a(()=>[l(t(I),{class:"flex items-center gap-3"},{default:a(()=>[e[63]||(e[63]=s("i",{class:"fa-solid fa-info-circle text-primary text-sm"},null,-1)),s("div",null,[s("p",Tt," Converting to "+O(r.forceType==="lead"?"Lead":"Opportunity"),1)])]),_:1})]),_:1})):(E(),R("div",kt,[l(t(L),{class:Q(["flex-1 border-border",F.value?"cursor-pointer hover:border-primary/30":"cursor-not-allowed opacity-60"])},{default:a(()=>[l(t(I),{class:"flex items-center gap-3"},{default:a(()=>[l(t(ue),{modelValue:U.value,"onUpdate:modelValue":e[17]||(e[17]=u=>U.value=u),disabled:!F.value,label:""},null,8,["modelValue","disabled"]),s("div",null,[s("span",{class:Q(["text-xs font-bold",F.value?"text-foreground":"text-muted-foreground"])}," Mark as Lead ",2),e[61]||(e[61]=s("p",{class:"text-xs text-muted-foreground"},"New lead task",-1))])]),_:1})]),_:1},8,["class"]),l(t(L),{class:Q(["flex-1 border-border",F.value?"cursor-pointer hover:border-primary/30":"cursor-not-allowed opacity-60"])},{default:a(()=>[l(t(I),{class:"flex items-center gap-3"},{default:a(()=>[l(t(ue),{modelValue:_.value,"onUpdate:modelValue":e[18]||(e[18]=u=>_.value=u),disabled:!F.value,label:""},null,8,["modelValue","disabled"]),s("div",null,[s("span",{class:Q(["text-xs font-bold",F.value?"text-foreground":"text-muted-foreground"])}," Mark as Opportunity ",2),e[62]||(e[62]=s("p",{class:"text-xs text-muted-foreground"},"New opportunity",-1))])]),_:1})]),_:1},8,["class"])])),!F.value&&!r.forceType?(E(),W(t(L),{key:2,class:"bg-orange-50 border-orange-200"},{default:a(()=>[l(t(I),{class:"flex items-start gap-2"},{default:a(()=>[...e[64]||(e[64]=[s("i",{class:"fa-solid fa-exclamation-triangle text-orange-600 mt-0.5 text-sm"},null,-1),s("span",{class:"text-xs text-orange-700"},"Fill in vehicle details to enable lead/opportunity creation",-1)])]),_:1})]),_:1})):j("",!0)]),_:1})]),_:1})],32)),[[ce,()=>x.value=!1]])}}};export{Ot as _,ie as f,Ae as u};
