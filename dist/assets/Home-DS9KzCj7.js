import{u as G,r as k,c as S,f as Te,a as De,b as Ce,d as n,o as r,e,n as B,t as g,g as w,F as A,h as Z,i as Q,j as ee,k as K,w as he,l as Ae,m as we,p as Se,v as Oe,q as J,s as H,x as z,y as _,z as W,Q as X,A as Re,B as Me}from"./index-CSiztNL_.js";import{f as je,a as Ne}from"./calendar-BOxLZhbG.js";import{u as Ie}from"./users-D8JfWMsw.js";import{_ as Be}from"./ReassignUserModal-xaxvH66n.js";import{f as Ue,a as Pe,b as Le}from"./dashboard-BjdvT1Lr.js";import"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-Ccexna8v.js";const _e="actionable-questions-dismissals";function ke(){try{const p=localStorage.getItem(_e);return p?JSON.parse(p):[]}catch{return[]}}function Ve(p,x){const u=ke();u.some(m=>m.questionId===p&&m.userId===x)||(u.push({id:`dismissed-${p}-user-${x}`,questionId:p,userId:x,dismissedAt:new Date().toISOString()}),localStorage.setItem(_e,JSON.stringify(u)))}function ye(p,x){return ke().some(f=>f.questionId===p&&f.userId===x)}function $e(){const p=G(),x=k([]),u=k(!1),f=S(()=>p.currentUser),m=S(()=>{var y;return(y=p.currentUser)==null?void 0:y.role}),v=S(()=>f.value?x.value.filter(T=>!ye(T.id,f.value.id)).slice(0,5):[]),o=S(()=>f.value?x.value.filter(y=>!ye(y.id,f.value.id)).length:0);async function a(){if(!f.value){x.value=[];return}if(!p.isSalesman()&&!p.isManager()&&!p.isOperator()){x.value=[];return}u.value=!0;try{const y=await Te(f.value.id,m.value);x.value=y}catch(y){console.error("Error loading actionable questions:",y),x.value=[]}finally{u.value=!1}}function h(y){x.value=x.value.filter(T=>T.id!==y)}function M(y){x.value.unshift(y)}return{questions:v,totalQuestionsCount:o,loading:u,loadQuestions:a,dismissQuestion:h,addFollowUpQuestion:M}}function Qe(){const p=G(),{questions:x,totalQuestionsCount:u,loading:f,loadQuestions:m}=$e(),v=k([]),o=k([]),a=k([]),h=k([]),M=k(!0),y=k(!0),T=S(()=>{const l=o.value.map(d=>({...d,type:"lead",taskType:"Lead",dueTime:d.nextActionDue?new Date(d.nextActionDue).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):null,dueDate:d.nextActionDue?new Date(d.nextActionDue):null})),b=a.value.map(d=>({...d,type:"opportunity",taskType:"Opportunity",dueTime:d.expectedCloseDate?new Date(d.expectedCloseDate).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):null,dueDate:d.expectedCloseDate?new Date(d.expectedCloseDate):null}));return[...l,...b]}),O=S(()=>{const l=[],b=v.value.map(s=>({...s,todoType:"appointment",sortTime:new Date(s.start).getTime(),time:new Date(s.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),date:new Date(s.start)}));l.push(...b);const d=T.value.map(s=>{const t=s.dueDate||(s.nextActionDue?new Date(s.nextActionDue):null),c=t&&t<new Date;return{...s,todoType:"task",sortTime:t?t.getTime():0,isOverdue:c,priority:s.priority==="Hot"?1:2}});return l.push(...d),l.sort((s,t)=>s.todoType==="appointment"&&t.todoType!=="appointment"?-1:s.todoType!=="appointment"&&t.todoType==="appointment"?1:s.todoType==="appointment"&&t.todoType==="appointment"?s.sortTime-t.sortTime:s.isOverdue&&!t.isOverdue?-1:!s.isOverdue&&t.isOverdue?1:s.priority!==t.priority?s.priority-t.priority:s.sortTime-t.sortTime)}),R=S(()=>v.value.map(l=>({...l,time:new Date(l.start).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}),date:new Date(l.start)})).sort((l,b)=>l.date.getTime()-b.date.getTime())),D=S(()=>T.value.filter(l=>{const b=l.dueDate||(l.nextActionDue?new Date(l.nextActionDue):null);if(!b)return!1;const d=new Date;d.setHours(0,0,0,0);const s=new Date(d);s.setDate(s.getDate()+1);const t=new Date(b);return t.setHours(0,0,0,0),t>=d&&t<s}).sort((l,b)=>{var i,c;const d=new Date,s=l.dueDate<d,t=b.dueDate<d;return s&&!t?-1:!s&&t?1:l.priority!==b.priority?(l.priority==="Hot"?1:2)-(b.priority==="Hot"?1:2):(((i=l.dueDate)==null?void 0:i.getTime())||0)-(((c=b.dueDate)==null?void 0:c.getTime())||0)})),$=S(()=>x.value);async function C(){Promise.all([m(),je().then(l=>{v.value=l,M.value=!1}),Promise.all([p.canAccessLeads()?De().then(l=>{o.value=l}):Promise.resolve(),p.canAccessOpportunities()?Ce().then(l=>{a.value=l}):Promise.resolve()]).then(()=>{y.value=!1}),Ne(1).then(l=>{h.value=l})]).catch(l=>{console.error("Error loading dashboard:",l),M.value=!1,y.value=!1})}return{notifications:$,totalNotificationsCount:u,appointmentsToday:R,tasksDueToday:D,prioritizedTodos:O,loadingNotifications:f,loadingAppointments:S(()=>M.value),loadingTasks:S(()=>y.value),loadDashboard:C}}const qe={class:"flex items-center gap-2 mb-2"},He={class:"text-meta"},Ee={class:"text-meta"},ze={class:"ml-auto flex items-center gap-2"},Ge={key:1,class:"bg-surface border border rounded-lg shadow-lg p-1.5 flex items-center gap-1.5 z-10"},Ye=["innerHTML"],Fe={class:"flex gap-2 flex-wrap justify-end mt-3"},Je={__name:"ActionableQuestionCard",props:{question:{type:Object,required:!0}},emits:["answer-yes","answer-no","reassign","view-task","dismiss"],setup(p,{emit:x}){const u=p,f=x,m=k(!1),v=k(!1),o=G();Ie();const a=()=>{var d,s,t;const b=((d=u.question.opportunity)==null?void 0:d.assignee)||((s=u.question.lead)==null?void 0:s.assignee);return b?b===((t=o.currentUser)==null?void 0:t.name)?"me":b:"Unknown"},h=()=>{const b=u.question.customer.name,d=u.question.question,s=`<a href="#" class="font-bold text-brand-red hover:text-brand-red-dark hover:underline" onclick="event.preventDefault()">${b}</a>`;return d.replace(new RegExp(b,"g"),s)},M=b=>b===1?"bg-red-50 text-red-600 border-red-100":b<=3?"bg-amber-50 text-amber-600 border-amber-100":"bg-emerald-50 text-emerald-600 border-emerald-100",y=b=>b===1?"CRITICAL":b<=3?"HIGH":"MEDIUM",T=()=>{if(!u.question.createdAt&&!u.question.appointmentDate)return"Just now";const b=new Date(u.question.createdAt||u.question.appointmentDate),s=new Date-b,t=Math.floor(s/6e4),i=Math.floor(t/60),c=Math.floor(i/24);return t<1?"Just now":t<60?`${t} min ago`:i<24?`${i} hours ago`:c===1?"1 day ago":c<7?`${c} days ago`:`${Math.floor(c/7)} weeks ago`},O=()=>f("answer-yes",u.question),R=()=>f("answer-no",u.question),D=()=>f("reassign",u.question),$=()=>f("view-task",u.question),C=b=>{b.target.tagName==="A"&&(b.preventDefault(),$())},l=()=>{v.value=!0,setTimeout(()=>{f("dismiss",u.question)},200)};return(b,d)=>(r(),n("div",{class:B(["bg-surface border border rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all",v.value?"opacity-50":""])},[e("div",qe,[e("span",{class:B(["text-xs font-bold px-2 py-0.5 rounded border whitespace-nowrap",M(p.question.priority)])},g(y(p.question.priority)),3),e("span",He,g(T()),1),e("span",Ee,"• Owner: "+g(a()),1),e("div",ze,[m.value?(r(),n("div",Ge,[d[3]||(d[3]=e("span",{class:"text-meta whitespace-nowrap"},"Dismiss?",-1)),e("button",{onClick:l,class:"px-2 py-0.5 text-xs font-medium text-rose-700 bg-rose-50 hover:bg-rose-100 border border-rose-200 rounded transition-colors"}," Yes "),e("button",{onClick:d[1]||(d[1]=s=>m.value=!1),class:"px-2 py-0.5 text-xs font-medium text-body hover:text-heading transition-colors"}," No ")])):(r(),n("button",{key:0,onClick:d[0]||(d[0]=s=>m.value=!0),class:"w-7 h-7 flex items-center justify-center rounded text-sub hover:text-body hover:bg-surfaceSecondary transition-colors",title:"Dismiss"},[...d[2]||(d[2]=[e("i",{class:"fa-solid fa-xmark text-sm"},null,-1)])]))])]),e("div",{class:"mb-2",onClick:C},[e("p",{class:"text-heading text-small mb-1",innerHTML:h()},null,8,Ye)]),e("div",Fe,[p.question.type==="appointment-followup"?(r(),n(A,{key:0},[e("button",{onClick:O,class:"px-3 py-1.5 text-small font-medium !bg-brand-red !text-white border border-brand-red rounded-2xl hover:!bg-brand-redDark hover:border-brand-redDark transition-colors"}," Yes "),e("button",{onClick:R,class:"px-3 py-1.5 text-small font-medium bg-surface text-brand-dark border border-D1D5DB rounded-2xl hover:brightness-95 transition-colors"}," No ")],64)):p.question.type==="ns-followup"?(r(),n(A,{key:1},[e("button",{onClick:O,class:"px-3 py-1.5 text-small font-medium !bg-brand-red !text-white border border-brand-red rounded-2xl hover:!bg-brand-redDark hover:border-brand-redDark transition-colors"}," Yes "),e("button",{onClick:R,class:"px-3 py-1.5 text-small font-medium bg-surface text-brand-dark border border-D1D5DB rounded-2xl hover:brightness-95 transition-colors"}," No "),e("button",{onClick:D,class:"px-3 py-1.5 text-small font-medium bg-surface text-brand-dark border border-D1D5DB rounded-2xl hover:brightness-95 transition-colors"}," Reassign ")],64)):p.question.type==="offer-followup"?(r(),n("button",{key:2,onClick:$,class:"px-3 py-1.5 text-small font-medium !bg-brand-red !text-white border border-brand-red rounded-2xl hover:!bg-brand-redDark hover:border-brand-redDark transition-colors"}," View Opportunity ")):p.question.type==="stuck-opportunity"?(r(),n(A,{key:3},[e("button",{onClick:O,class:"px-3 py-1.5 text-small font-medium !bg-brand-red !text-white border border-brand-red rounded-2xl hover:!bg-brand-redDark hover:border-brand-redDark transition-colors"}," Yes "),e("button",{onClick:R,class:"px-3 py-1.5 text-small font-medium bg-surface text-brand-dark border border-D1D5DB rounded-2xl hover:brightness-95 transition-colors"}," No "),e("button",{onClick:D,class:"px-3 py-1.5 text-small font-medium bg-surface text-brand-dark border border-D1D5DB rounded-2xl hover:brightness-95 transition-colors"}," Reassign ")],64)):p.question.type==="lead-qualification-urgency"?(r(),n(A,{key:4},[e("button",{onClick:O,class:"px-3 py-1.5 text-small font-medium !bg-brand-red !text-white border border-brand-red rounded-2xl hover:!bg-brand-redDark hover:border-brand-redDark transition-colors"}," Yes "),e("button",{onClick:R,class:"px-3 py-1.5 text-small font-medium bg-surface text-brand-dark border border-D1D5DB rounded-2xl hover:brightness-95 transition-colors"}," No "),e("button",{onClick:D,class:"px-3 py-1.5 text-small font-medium bg-surface text-brand-dark border border-D1D5DB rounded-2xl hover:brightness-95 transition-colors"}," Reassign ")],64)):w("",!0)])],2))}},We={class:"space-y-3"},Xe={key:0,class:"text-center py-8 text-sub"},Ke=["onClick"],Ze={class:"flex items-start justify-between gap-4"},et={class:"flex-1 min-w-0"},tt={class:"flex items-center gap-2 mb-1"},st={class:"heading-sub mb-1"},ot={class:"text-meta mb-2"},rt={key:0},nt={class:"flex items-center gap-2 text-xs text-sub"},at={key:0},it={key:1},lt=["onClick"],dt={__name:"TodaysAppointments",props:{appointments:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(p){const x=Z(),u=v=>{const o=new Date,h=(new Date(v)-o)/(1e3*60*60);return h<0?"bg-red-100 text-red-700 border-red-200":h<2?"bg-orange-100 text-orange-700 border-orange-200":"bg-blue-100 text-blue-700 border-blue-200"},f=v=>({confirmed:"bg-green-50 text-green-700 border-green-200",scheduled:"bg-blue-50 text-blue-700 border-blue-200",pending:"bg-yellow-50 text-yellow-700 border-yellow-200",cancelled:"bg-red-50 text-red-700 border-red-200","no-show":"bg-surfaceSecondary text-body border"})[v]||"bg-surfaceSecondary text-body border",m=v=>{v.opportunityId?x.push(`/tasks/${v.opportunityId}?type=opportunity`):v.leadId?x.push(`/tasks/${v.leadId}?type=lead`):x.push("/calendar")};return(v,o)=>(r(),n("div",We,[p.loading?(r(),n(A,{key:0},Q(3,a=>e("div",{key:`skeleton-${a}`,class:"bg-surface border border rounded-lg p-4"},[...o[0]||(o[0]=[ee('<div class="flex items-start justify-between gap-4"><div class="flex-1 min-w-0 space-y-2"><div class="flex items-center gap-2"><div class="h-5 bg-surfaceTertiary rounded w-16 animate-pulse"></div><div class="h-5 bg-surfaceTertiary rounded w-20 animate-pulse"></div></div><div class="h-4 bg-surfaceTertiary rounded w-32 animate-pulse"></div><div class="h-3 bg-surfaceTertiary rounded w-24 animate-pulse"></div><div class="h-3 bg-surfaceTertiary rounded w-20 animate-pulse"></div></div><div class="h-4 w-4 bg-surfaceTertiary rounded animate-pulse"></div></div>',1)])])),64)):(r(),n(A,{key:1},[p.appointments.length===0?(r(),n("div",Xe,[...o[1]||(o[1]=[e("i",{class:"fa-solid fa-calendar-check text-4xl mb-2 text-gray-300"},null,-1),e("p",{class:"text-content"},"No appointments scheduled for today",-1)])])):w("",!0),(r(!0),n(A,null,Q(p.appointments,a=>(r(),n("div",{key:a.id,onClick:h=>m(a),class:"bg-surface border border rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all cursor-pointer"},[e("div",Ze,[e("div",et,[e("div",tt,[e("span",{class:B(["text-xs font-bold px-2 py-0.5 rounded",u(a.date)])},g(a.time),3),e("span",{class:B(["text-xs font-medium px-2 py-0.5 rounded border",f(a.status)])},g(a.status),3)]),e("h4",st,g(a.customer||a.title),1),e("p",ot,[K(g(a.type)+" ",1),a.vehicle?(r(),n("span",rt," - "+g(a.vehicle),1)):w("",!0)]),e("div",nt,[o[2]||(o[2]=e("i",{class:"fa-solid fa-user text-sub"},null,-1)),a.assigneeType==="team"?(r(),n("span",at,g(a.team)+" Team ",1)):(r(),n("span",it,g(a.assignee||"Unassigned"),1))])]),e("button",{onClick:he(h=>m(a),["stop"]),class:"text-sub hover:text-blue-600 transition-colors"},[...o[3]||(o[3]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)])],8,lt)])],8,Ke))),128))],64))]))}},ut={class:"space-y-3"},ct={key:0,class:"text-center py-8 text-sub"},pt=["onClick"],ft={class:"flex items-start justify-between gap-4"},vt={class:"flex-1 min-w-0"},bt={class:"flex items-center gap-2 mb-1"},gt={key:0,class:"text-xs font-bold px-2 py-0.5 rounded bg-red-50 text-red-700 border border-red-200 flex items-center gap-1"},mt={key:1,class:"text-xs font-medium px-2 py-0.5 rounded bg-surfaceSecondary text-body border border"},xt={key:3,class:"text-xs font-bold px-2 py-0.5 rounded bg-red-100 text-red-700 border border-red-200"},yt={class:"heading-sub mb-1"},ht={class:"text-meta mb-2"},wt={key:0},_t={class:"flex items-center gap-2 text-xs text-sub"},kt={key:0,class:"text-sub"},$t=["onClick"],Tt={__name:"TodaysTasks",props:{tasks:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},setup(p){const x=Z(),u=m=>{if(!m)return"bg-surfaceSecondary text-body border";const v=new Date,a=(new Date(m)-v)/(1e3*60*60);return a<0?"bg-red-100 text-red-700 border-red-200":a<2?"bg-orange-100 text-orange-700 border-orange-200":"bg-blue-100 text-blue-700 border-blue-200"},f=m=>{x.push(`/tasks/${m.id}?type=${m.type}`)};return(m,v)=>(r(),n("div",ut,[p.loading?(r(),n(A,{key:0},Q(3,o=>e("div",{key:`skeleton-${o}`,class:"bg-surface border border rounded-lg p-4"},[...v[0]||(v[0]=[ee('<div class="flex items-start justify-between gap-4"><div class="flex-1 min-w-0 space-y-2"><div class="flex items-center gap-2"><div class="h-5 bg-surfaceTertiary rounded w-16 animate-pulse"></div><div class="h-5 bg-surfaceTertiary rounded w-20 animate-pulse"></div></div><div class="h-4 bg-surfaceTertiary rounded w-32 animate-pulse"></div><div class="h-3 bg-surfaceTertiary rounded w-24 animate-pulse"></div><div class="flex items-center gap-2"><div class="h-4 bg-surfaceTertiary rounded w-16 animate-pulse"></div><div class="h-3 bg-surfaceTertiary rounded w-20 animate-pulse"></div></div></div><div class="h-4 w-4 bg-surfaceTertiary rounded animate-pulse"></div></div>',1)])])),64)):(r(),n(A,{key:1},[p.tasks.length===0?(r(),n("div",ct,[...v[1]||(v[1]=[e("i",{class:"fa-solid fa-tasks text-4xl mb-2 text-gray-300"},null,-1),e("p",{class:"text-content"},"No tasks due today",-1)])])):w("",!0),(r(!0),n(A,null,Q(p.tasks,o=>{var a;return r(),n("div",{key:`${o.type}-${o.id}`,onClick:h=>f(o),class:"bg-surface border border rounded-lg p-4 hover:border-blue-300 hover:shadow-sm transition-all cursor-pointer"},[e("div",ft,[e("div",vt,[e("div",bt,[o.priority==="Hot"?(r(),n("span",gt,[...v[2]||(v[2]=[e("i",{class:"fa-solid fa-fire text-xs"},null,-1),K(" HOT ",-1)])])):(r(),n("span",mt," Normal ")),o.dueTime?(r(),n("span",{key:2,class:B(["text-xs font-bold px-2 py-0.5 rounded",u(o.dueDate)])},g(o.dueTime),3)):w("",!0),o.isOverdue?(r(),n("span",xt," OVERDUE ")):w("",!0)]),e("h4",yt,g(((a=o.customer)==null?void 0:a.name)||"Unknown Customer"),1),e("p",ht,[K(g(o.taskType)+" ",1),o.requestedCar||o.vehicle?(r(),n("span",wt," - "+g(o.requestedCar?`${o.requestedCar.brand} ${o.requestedCar.model}`:`${o.vehicle.brand} ${o.vehicle.model}`),1)):w("",!0)]),e("div",_t,[e("span",{class:B(["px-2 py-0.5 rounded border text-xs font-bold uppercase",o.type==="lead"?"bg-blue-50 text-blue-700 border-blue-200":"bg-purple-50 text-purple-700 border-purple-200"])},g(o.type==="lead"?"Lead":"Opportunity"),3),o.stage||o.displayStage?(r(),n("span",kt,g(o.displayStage||o.stage),1)):w("",!0)])]),e("button",{onClick:he(h=>f(o),["stop"]),class:"text-sub hover:text-blue-600 transition-colors"},[...v[3]||(v[3]=[e("i",{class:"fa-solid fa-chevron-right"},null,-1)])],8,$t)])],8,pt)}),128))],64))]))}},Dt={class:"bg-surface rounded-xl border border shadow-sm overflow-hidden hover:shadow-md transition-shadow"},Ct={class:"p-4 md:p-5"},At={class:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-0 mb-4"},St={key:0,class:"space-y-4"},Ot={key:1,class:"space-y-4"},Rt={class:"bg-surface rounded-lg p-3 border border"},Mt={class:"flex items-center justify-between mb-2"},jt={class:"text-xs sm:text-sm text-gray-600"},Nt={class:"bg-surface rounded-lg p-3 border border"},It={class:"flex items-center justify-between mb-2"},Bt={class:"w-full bg-gray-200 rounded-full h-2 mt-2"},Ut={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Pt={class:"bg-surface rounded-lg p-3 border border"},Lt={class:"flex items-start justify-between gap-2"},Vt={class:"flex-1"},Qt={class:"text-base font-bold text-gray-900 mb-1"},qt={key:0,class:"h-12 w-16 flex-shrink-0"},Ht={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},Et=["d"],zt=["d"],Gt={class:"bg-surface rounded-lg p-3 border border"},Yt={class:"flex items-start justify-between gap-2"},Ft={class:"flex-1"},Jt={class:"text-base font-bold text-gray-900 mb-1"},Wt={key:0,class:"h-12 w-16 flex-shrink-0"},Xt={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},Kt=["d"],Zt=["d"],es={key:2,class:"space-y-4"},ts={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},ss={class:"bg-surface rounded-lg p-3 border border"},os={class:"flex items-start justify-between gap-2"},rs={class:"flex-1"},ns={class:"text-base font-bold text-gray-900 mb-1"},as={key:0,class:"h-12 w-16 flex-shrink-0"},is={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},ls=["d"],ds=["d"],us={class:"bg-surface rounded-lg p-3 border border"},cs={class:"flex items-start justify-between gap-2"},ps={class:"flex-1"},fs={class:"text-base font-bold text-gray-900 mb-1"},vs={key:0,class:"h-12 w-16 flex-shrink-0"},bs={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},gs=["d"],ms=["d"],xs={class:"space-y-2"},ys={class:"flex items-center justify-between text-xs"},hs={class:"font-bold"},ws={class:"w-full bg-gray-200 rounded-full h-2"},_s={class:"flex items-center justify-between text-xs"},ks={class:"font-bold"},$s={class:"w-full bg-gray-200 rounded-full h-2"},Ts={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Ds={class:"bg-surface rounded-lg p-3 border border"},Cs={class:"flex items-start justify-between gap-2"},As={class:"flex-1"},Ss={class:"text-base font-bold text-gray-900 mb-1"},Os={key:0,class:"h-12 w-16 flex-shrink-0"},Rs={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},Ms=["d"],js=["d"],Ns={class:"bg-surface rounded-lg p-3 border border"},Is={class:"flex items-start justify-between gap-2"},Bs={class:"flex-1"},Us={class:"text-base font-bold text-gray-900 mb-1"},Ps={key:0,class:"h-12 w-16 flex-shrink-0"},Ls={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},Vs=["d"],Qs=["d"],qs={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},Hs={class:"bg-surface rounded-lg p-3 border border"},Es={class:"flex items-start justify-between gap-2"},zs={class:"flex-1"},Gs={class:"text-base font-bold text-gray-900 mb-1"},Ys={key:0,class:"h-12 w-16 flex-shrink-0"},Fs={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},Js=["d"],Ws=["d"],Xs={class:"bg-surface rounded-lg p-3 border border"},Ks={class:"flex items-start justify-between gap-2"},Zs={class:"flex-1"},eo={class:"text-base font-bold text-red-600 mb-1"},to={key:0,class:"h-12 w-16 flex-shrink-0"},so={class:"w-full h-full overflow-visible",viewBox:"0 0 100 40",preserveAspectRatio:"none"},oo=["d"],ro=["d"],no={key:3,class:"space-y-4"},ao={class:"grid grid-cols-1 lg:grid-cols-3 gap-4"},io={class:"bg-surface border border rounded-lg p-6 flex flex-col items-center justify-center"},lo={class:"relative w-24 h-24 sm:w-28 sm:h-28 mb-3"},uo={class:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100"},co=["stroke-dasharray"],po={class:"absolute inset-0 flex items-center justify-center"},fo={class:"text-center"},vo={class:"text-base font-bold text-green-700"},bo={class:"text-xs text-green-600 text-center"},go={class:"lg:col-span-2 bg-surface rounded-lg p-6 md:p-8"},mo={class:"space-y-3"},xo={class:"flex items-center gap-3 mb-1"},yo={class:"text-xs font-medium text-body w-32 sm:w-40 flex-shrink-0"},ho={class:"flex-1 relative"},wo={class:"w-full bg-gray-200 rounded-full h-6 overflow-hidden"},_o={class:"text-xs font-bold text-gray-900"},ko={class:"text-xs font-bold text-gray-900 w-12 text-right flex-shrink-0"},$o={key:4,class:"text-center py-8 text-gray-500"},To={__name:"PerformanceWidget",setup(p){const x=G(),u=S(()=>x.userRole()),f=S(()=>{var s;return(s=x.currentUser)==null?void 0:s.id}),m=k("month"),v=k(!0),o=k(null),a=k(null),h=k(null),M=S(()=>{var i;if(!((i=o.value)!=null&&i.slaCompliance))return 0;const{completed:s,total:t}=o.value.slaCompliance;return t>0?Math.round(s/t*100*10)/10:0}),y=(s=!1)=>{var i,c;const t=((c=(i=o.value)==null?void 0:i.tasksPerDay)==null?void 0:c.current)||0;return t>=40?s?"bg-green-600":"text-green-600":t>=20?s?"bg-yellow-600":"text-yellow-600":s?"bg-red-600":"text-red-600"},T=s=>{var c,j;if(!a.value)return 0;const t=((c=a.value.revenue)==null?void 0:c[s])||0,i=((j=a.value.revenueTargets)==null?void 0:j[s])||1;return Math.round(t/i*100)},O=s=>s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(0)+"k":s.toString(),R=s=>s>=1e3?(s/1e3).toFixed(1)+"k":s.toString(),D=s=>({red:"bg-red-300",orange:"bg-orange-300",blue:"bg-blue-300",gray:"bg-gray-300"})[s]||"bg-gray-300",$=s=>{var t,i,c;return a.value?s==="contractsClosed"?((t=a.value.contractsClosed)==null?void 0:t[`${m.value}Trend`])||null:s==="revenue"?((i=a.value.revenue)==null?void 0:i[`${m.value}Trend`])||null:s==="newOpportunities"&&((c=a.value.newOpportunities)==null?void 0:c[`${m.value}Trend`])||null:null},C=s=>{if(!s||s.length===0)return"";const t=Math.max(...s),i=Math.min(...s),c=t-i||1,j=100,q=40,U=4,P=s.map((L,N)=>({x:N/(s.length-1)*(j-U*2)+U,y:q-U-(L-i)/c*(q-U*2)}));if(P.length<2)return"";let E=`M ${P[0].x},${P[0].y}`;for(let L=0;L<P.length-1;L++){const N=P[L],V=P[L+1],Y=N.x+(V.x-N.x)/2,F=N.x+(V.x-N.x)/2;E+=` C ${Y},${N.y} ${F},${V.y} ${V.x},${V.y}`}return E},l=s=>{const t=C(s);if(!t)return"";const i=100,c=40,j=4,q=j,U=i-j;return`${t} L ${U},${c} L ${q},${c} Z`},b=s=>s>=20?"Excellent performance":s>=15?"Good performance":s>=10?"Average performance":"Needs improvement",d=async()=>{v.value=!0;try{u.value==="operator"?o.value=await Ue(f.value,m.value):u.value==="salesman"?a.value=await Pe(f.value,m.value):u.value==="manager"&&(h.value=await Le(m.value))}catch(s){console.error("Error loading performance metrics:",s)}finally{v.value=!1}};return Ae([f,u],()=>{d()},{immediate:!1}),we(()=>{d()}),(s,t)=>{var i,c,j,q,U,P,E,L,N,V,Y,F,te,se,oe,re,ne,ae,ie,le,de,ue,ce,pe,fe,ve,be,ge,me,xe;return r(),n("div",Dt,[e("div",Ct,[e("div",At,[t[2]||(t[2]=e("div",{class:"flex items-center gap-2"},[e("i",{class:"fa-solid fa-chart-line text-sub text-sm"}),e("h2",{class:"heading-sub"},"Performance")],-1)),Se(e("select",{"onUpdate:modelValue":t[0]||(t[0]=I=>m.value=I),onChange:d,class:"input text-xs w-full sm:w-auto"},[...t[1]||(t[1]=[e("option",{value:"month"},"Month",-1),e("option",{value:"quarter"},"Quarter",-1),e("option",{value:"year"},"Year",-1)])],544),[[Oe,m.value]])]),v.value?(r(),n("div",St,[(r(),n(A,null,Q(4,I=>e("div",{key:`skeleton-${I}`,class:"h-16 bg-gray-100 rounded animate-pulse"})),64))])):u.value==="operator"?(r(),n("div",Ot,[e("div",Rt,[e("div",Mt,[t[3]||(t[3]=e("span",{class:"text-xs font-medium text-body"},"SLA Compliance",-1)),e("span",{class:B(["text-xs font-bold",M.value>=90?"text-green-600":"text-yellow-600"])},g(M.value)+"% ",3)]),e("div",jt,g(((c=(i=o.value)==null?void 0:i.slaCompliance)==null?void 0:c.withinSLA)||0)+" / "+g(((q=(j=o.value)==null?void 0:j.slaCompliance)==null?void 0:q.total)||0)+" tasks completed within SLA ",1)]),e("div",Nt,[e("div",It,[t[4]||(t[4]=e("span",{class:"text-xs font-medium text-body"},"Tasks Per Day",-1)),e("span",{class:B(["text-xs font-bold",y()])},g(((P=(U=o.value)==null?void 0:U.tasksPerDay)==null?void 0:P.current)||0)+" / "+g(((L=(E=o.value)==null?void 0:E.tasksPerDay)==null?void 0:L.target)||0),3)]),e("div",Bt,[e("div",{class:B(["h-2 rounded-full transition-all",y(!0)]),style:J({width:`${Math.min((((V=(N=o.value)==null?void 0:N.tasksPerDay)==null?void 0:V.current)||0)/50*100,100)}%`})},null,6)]),t[5]||(t[5]=e("div",{class:"text-xs text-gray-500 mt-1"},"Target: 20-50 tasks/day",-1))]),e("div",Ut,[e("div",Pt,[e("div",Lt,[e("div",Vt,[t[6]||(t[6]=e("div",{class:"text-xs text-gray-500 mb-1"},"Appointments Reserved",-1)),e("div",Qt,g(((Y=o.value)==null?void 0:Y.appointmentsReserved)||0),1)]),(F=o.value)!=null&&F.appointmentsReservedTrend?(r(),n("div",qt,[(r(),n("svg",Ht,[t[7]||(t[7]=e("defs",null,[e("linearGradient",{id:"gradient-appointments",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0"}})])],-1)),e("path",{d:l(o.value.appointmentsReservedTrend),fill:"url(#gradient-appointments)",class:"transition-all duration-700"},null,8,Et),e("path",{d:C(o.value.appointmentsReservedTrend),stroke:"var(--brand-blue)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,zt)]))])):w("",!0)])]),e("div",Gt,[e("div",Yt,[e("div",Ft,[t[8]||(t[8]=e("div",{class:"text-xs text-gray-500 mb-1"},"Lead-to-Opportunity Rate",-1)),e("div",Jt,g(((te=o.value)==null?void 0:te.leadToOpportunityConversion)||0)+"%",1)]),(se=o.value)!=null&&se.leadToOpportunityConversionTrend?(r(),n("div",Wt,[(r(),n("svg",Xt,[t[9]||(t[9]=e("defs",null,[e("linearGradient",{id:"gradient-lead-opp",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--color-success)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--color-success)","stop-opacity":"0"}})])],-1)),e("path",{d:l(o.value.leadToOpportunityConversionTrend),fill:"url(#gradient-lead-opp)",class:"transition-all duration-700"},null,8,Kt),e("path",{d:C(o.value.leadToOpportunityConversionTrend),stroke:"var(--color-success)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,Zt)]))])):w("",!0)])])])])):u.value==="salesman"?(r(),n("div",es,[e("div",ts,[e("div",ss,[e("div",os,[e("div",rs,[t[10]||(t[10]=e("div",{class:"text-xs text-gray-500 mb-1"},"Contracts Closed",-1)),e("div",ns,g(((re=(oe=a.value)==null?void 0:oe.contractsClosed)==null?void 0:re[m.value])||0),1)]),$("contractsClosed")?(r(),n("div",as,[(r(),n("svg",is,[t[11]||(t[11]=e("defs",null,[e("linearGradient",{id:"gradient-contracts",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--color-success)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--color-success)","stop-opacity":"0"}})])],-1)),e("path",{d:l($("contractsClosed")),fill:"url(#gradient-contracts)",class:"transition-all duration-700"},null,8,ls),e("path",{d:C($("contractsClosed")),stroke:"var(--color-success)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,ds)]))])):w("",!0)])]),e("div",us,[e("div",cs,[e("div",ps,[t[12]||(t[12]=e("div",{class:"text-xs text-gray-500 mb-1"},"Revenue",-1)),e("div",fs,"€"+g(O(((ae=(ne=a.value)==null?void 0:ne.revenue)==null?void 0:ae[m.value])||0)),1)]),$("revenue")?(r(),n("div",vs,[(r(),n("svg",bs,[t[13]||(t[13]=e("defs",null,[e("linearGradient",{id:"gradient-revenue",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0"}})])],-1)),e("path",{d:l($("revenue")),fill:"url(#gradient-revenue)",class:"transition-all duration-700"},null,8,gs),e("path",{d:C($("revenue")),stroke:"var(--brand-blue)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,ms)]))])):w("",!0)])])]),e("div",xs,[e("div",ys,[t[14]||(t[14]=e("span",{class:"text-body"},"Monthly Target",-1)),e("span",hs,g(T("month"))+"%",1)]),e("div",ws,[e("div",{class:"h-2 rounded-full bg-brand-blue transition-all",style:J({width:`${Math.min(T("month"),100)}%`})},null,4)]),e("div",_s,[t[15]||(t[15]=e("span",{class:"text-body"},"Quarterly Target",-1)),e("span",ks,g(T("quarter"))+"%",1)]),e("div",$s,[e("div",{class:"h-2 rounded-full bg-brand-blue transition-all",style:J({width:`${Math.min(T("quarter"),100)}%`})},null,4)])]),e("div",Ts,[e("div",Ds,[e("div",Cs,[e("div",As,[t[16]||(t[16]=e("div",{class:"text-xs text-gray-500 mb-1"},"Pipeline Value",-1)),e("div",Ss,"€"+g(O(((ie=a.value)==null?void 0:ie.pipelineValue)||0)),1)]),(le=a.value)!=null&&le.pipelineValueTrend?(r(),n("div",Os,[(r(),n("svg",Rs,[t[17]||(t[17]=e("defs",null,[e("linearGradient",{id:"gradient-pipeline",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--brand-blue)","stop-opacity":"0"}})])],-1)),e("path",{d:l(a.value.pipelineValueTrend),fill:"url(#gradient-pipeline)",class:"transition-all duration-700"},null,8,Ms),e("path",{d:C(a.value.pipelineValueTrend),stroke:"var(--brand-blue)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,js)]))])):w("",!0)])]),e("div",Ns,[e("div",Is,[e("div",Bs,[t[18]||(t[18]=e("div",{class:"text-xs text-gray-500 mb-1"},"Win Rate",-1)),e("div",Us,g(((de=a.value)==null?void 0:de.winRate)||0)+"%",1)]),(ue=a.value)!=null&&ue.winRateTrend?(r(),n("div",Ps,[(r(),n("svg",Ls,[t[19]||(t[19]=e("defs",null,[e("linearGradient",{id:"gradient-winrate",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--color-success)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--color-success)","stop-opacity":"0"}})])],-1)),e("path",{d:l(a.value.winRateTrend),fill:"url(#gradient-winrate)",class:"transition-all duration-700"},null,8,Vs),e("path",{d:C(a.value.winRateTrend),stroke:"var(--color-success)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,Qs)]))])):w("",!0)])])]),e("div",qs,[e("div",Hs,[e("div",Es,[e("div",zs,[t[20]||(t[20]=e("div",{class:"text-xs text-gray-500 mb-1"},"New Opportunities",-1)),e("div",Gs,g(((pe=(ce=a.value)==null?void 0:ce.newOpportunities)==null?void 0:pe[m.value])||0),1)]),$("newOpportunities")?(r(),n("div",Ys,[(r(),n("svg",Fs,[t[21]||(t[21]=e("defs",null,[e("linearGradient",{id:"gradient-new-opp",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--color-success)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--color-success)","stop-opacity":"0"}})])],-1)),e("path",{d:l($("newOpportunities")),fill:"url(#gradient-new-opp)",class:"transition-all duration-700"},null,8,Js),e("path",{d:C($("newOpportunities")),stroke:"var(--color-success)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,Ws)]))])):w("",!0)])]),e("div",Xs,[e("div",Ks,[e("div",Zs,[t[22]||(t[22]=e("div",{class:"text-xs text-gray-500 mb-1"},"Dormant Opportunities",-1)),e("div",eo,g(((fe=a.value)==null?void 0:fe.dormantOpportunities)||0),1)]),(ve=a.value)!=null&&ve.dormantOpportunitiesTrend?(r(),n("div",to,[(r(),n("svg",so,[t[23]||(t[23]=e("defs",null,[e("linearGradient",{id:"gradient-dormant",x1:"0%",y1:"0%",x2:"0%",y2:"100%"},[e("stop",{offset:"0%",style:{"stop-color":"var(--brand-red)","stop-opacity":"0.2"}}),e("stop",{offset:"100%",style:{"stop-color":"var(--brand-red)","stop-opacity":"0"}})])],-1)),e("path",{d:l(a.value.dormantOpportunitiesTrend),fill:"url(#gradient-dormant)",class:"transition-all duration-700"},null,8,oo),e("path",{d:C(a.value.dormantOpportunitiesTrend),stroke:"var(--brand-red)","stroke-width":"2.5",fill:"none","stroke-linecap":"round","stroke-linejoin":"round",class:"transition-all duration-700"},null,8,ro)]))])):w("",!0)])])])])):u.value==="manager"?(r(),n("div",no,[e("div",ao,[e("div",io,[e("div",lo,[(r(),n("svg",uo,[t[24]||(t[24]=e("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"var(--color-success-light)","stroke-width":"8"},null,-1)),e("circle",{cx:"50",cy:"50",r:"42",fill:"none",stroke:"#10b981","stroke-width":"8","stroke-dasharray":`${(((be=h.value)==null?void 0:be.conversionRate)||0)*2.64} 265`,"stroke-linecap":"round",class:"transition-all duration-700"},null,8,co)])),e("div",po,[e("div",fo,[e("div",vo,g(((ge=h.value)==null?void 0:ge.conversionRate)||0)+"% ",1)])])]),t[25]||(t[25]=e("div",{class:"text-sm font-bold text-green-800 mb-1"},"Conversion Rate",-1)),e("div",bo,g(b(((me=h.value)==null?void 0:me.conversionRate)||0)),1)]),e("div",go,[t[26]||(t[26]=e("h3",{class:"text-base font-bold text-gray-900 mb-4"},"Sales Funnel",-1)),e("div",mo,[(r(!0),n(A,null,Q(((xe=h.value)==null?void 0:xe.stages)||[],(I,Yo)=>(r(),n("div",{key:I.name,class:"relative"},[e("div",xo,[e("span",yo,g(I.name),1),e("div",ho,[e("div",wo,[e("div",{class:B(["h-full rounded-full transition-all duration-700 flex items-center justify-end pr-2",D(I.color)]),style:J({width:`${I.percentage}%`,minWidth:"2px"})},[e("span",_o,g(R(I.count)),1)],6)])]),e("span",ko,g(I.percentage)+"%",1)])]))),128))])])])])):(r(),n("div",$o,[...t[27]||(t[27]=[e("i",{class:"fa-solid fa-chart-line text-4xl mb-2 text-gray-300"},null,-1),e("p",{class:"text-sm"},"Performance metrics not available",-1),e("p",{class:"text-xs text-sub mt-1"},"Contact your administrator",-1)])]))])])}}},Do={class:"page-container"},Co={class:"p-4 md:p-6 lg:p-8"},Ao={class:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 items-start"},So={class:"lg:col-span-2 space-y-4 md:space-y-6"},Oo={class:"bg-surface rounded-xl border border shadow-sm overflow-hidden hover:shadow-md transition-shadow"},Ro={class:"p-4 md:p-5 border-b border bg-surface"},Mo={class:"flex items-center justify-between"},jo={class:"flex items-center gap-2"},No={class:"p-4 md:p-5 space-y-3"},Io={key:0,class:"text-center py-8 text-sub"},Bo={class:"space-y-4 md:space-y-6"},Uo={class:"bg-surface rounded-xl border border shadow-sm overflow-hidden hover:shadow-md transition-shadow"},Po={class:"p-4 md:p-5 border-b border bg-surface"},Lo={class:"flex items-center justify-between"},Vo={class:"flex items-center gap-2"},Qo={class:"p-4 md:p-5"},qo={class:"bg-surface rounded-xl border border shadow-sm overflow-hidden hover:shadow-md transition-shadow"},Ho={class:"p-4 md:p-5 border-b border bg-surface"},Eo={class:"flex items-center justify-between"},zo={class:"flex items-center gap-2"},Go={class:"p-4 md:p-5"},er={__name:"Home",setup(p){const x=Z(),u=G(),{dismissQuestion:f,addFollowUpQuestion:m}=$e(),{notifications:v,totalNotificationsCount:o,appointmentsToday:a,tasksDueToday:h,loadingNotifications:M,loadingAppointments:y,loadingTasks:T,loadDashboard:O}=Qe(),R=k(!1),D=k(null);we(async()=>{await O()});const $=async t=>{t.type==="appointment-followup"?(f(t.id),m({id:`offer-followup-${t.opportunityId}`,type:"offer-followup",priority:5,question:`What was the offer given to ${t.customer.name}?`,customer:t.customer,opportunityId:t.opportunityId,opportunity:t.opportunity,createdAt:new Date().toISOString()})):(t.type==="ns-followup"||t.type==="stuck-opportunity"||t.type==="lead-qualification-urgency")&&f(t.id)},C=async t=>{var i;if(t.type==="appointment-followup")try{const c=(i=u.currentUser)==null?void 0:i.id;c&&(await Me(t.opportunityId,c),f(t.id),await O())}catch(c){console.error("Error creating NS task:",c)}else t.type==="ns-followup"?f(t.id):t.type==="stuck-opportunity"?x.push(`/tasks/${t.opportunityId}?type=opportunity`):t.type==="lead-qualification-urgency"&&x.push(`/tasks/${t.leadId}?type=lead`)},l=t=>{D.value=t,R.value=!0},b=async t=>{if(D.value)try{const i=D.value.opportunityId||D.value.leadId;D.value.opportunityId&&await Re(i,t),f(D.value.id),R.value=!1,D.value=null,await O()}catch(i){console.error("Error reassigning:",i)}},d=t=>{t.opportunityId?x.push(`/tasks/${t.opportunityId}?type=opportunity`):t.leadId&&x.push(`/tasks/${t.leadId}?type=lead`)},s=t=>{u.currentUser&&Ve(t.id,u.currentUser.id),f(t.id)};return(t,i)=>(r(),n("div",Do,[e("div",Co,[e("div",Ao,[e("div",So,[H(To),e("div",Oo,[e("div",Ro,[e("div",Mo,[e("div",jo,[i[4]||(i[4]=e("i",{class:"fa-solid fa-bolt text-body text-sm"},null,-1)),i[5]||(i[5]=e("h2",{class:"heading-sub text-heading"},"Quick Actions",-1)),_(o)>0?(r(),z(_(W),{key:0,text:String(_(o)),size:"small",theme:"blue"},null,8,["text"])):w("",!0)]),_(o)>5?(r(),z(_(X),{key:0,label:"View all →",variant:"ghost",size:"small",onClick:i[0]||(i[0]=c=>t.$router.push("/tasks")),class:"text-xs"})):w("",!0)])]),e("div",No,[_(M)?(r(),n(A,{key:0},Q(3,c=>e("div",{key:`skeleton-${c}`,class:"bg-surfaceSecondary border border rounded-lg p-4"},[...i[6]||(i[6]=[ee('<div class="space-y-2"><div class="h-4 bg-surfaceTertiary rounded w-3/4 animate-pulse"></div><div class="h-3 bg-surfaceTertiary rounded w-1/2 animate-pulse"></div><div class="flex gap-2 mt-3"><div class="h-8 bg-surfaceTertiary rounded flex-1 animate-pulse"></div><div class="h-8 bg-surfaceTertiary rounded flex-1 animate-pulse"></div></div></div>',1)])])),64)):(r(),n(A,{key:1},[_(v).length===0?(r(),n("div",Io,[...i[7]||(i[7]=[e("i",{class:"fa-solid fa-check-circle text-4xl mb-2 text-sub opacity-50"},null,-1),e("p",{class:"text-content"},"All caught up!",-1),e("p",{class:"text-meta mt-1"},"No quick actions needed",-1)])])):w("",!0),(r(!0),n(A,null,Q(_(v).slice(0,5),c=>(r(),z(Je,{key:c.id,question:c,onAnswerYes:$,onAnswerNo:C,onReassign:l,onViewTask:d,onDismiss:s},null,8,["question"]))),128))],64))])])]),e("div",Bo,[e("div",Uo,[e("div",Po,[e("div",Lo,[e("div",Vo,[i[8]||(i[8]=e("i",{class:"fa-solid fa-tasks text-body text-sm"},null,-1)),i[9]||(i[9]=e("h2",{class:"heading-sub text-heading"},"Tasks Due Today",-1)),_(h).length>0?(r(),z(_(W),{key:0,text:String(_(h).length),size:"small",theme:"red"},null,8,["text"])):w("",!0)]),H(_(X),{label:"View all tasks →",variant:"ghost",size:"small",onClick:i[1]||(i[1]=c=>t.$router.push("/tasks")),class:"text-xs"})])]),e("div",Qo,[H(Tt,{tasks:_(h),loading:_(T)},null,8,["tasks","loading"])])]),e("div",qo,[e("div",Ho,[e("div",Eo,[e("div",zo,[i[10]||(i[10]=e("i",{class:"fa-solid fa-calendar text-body text-sm"},null,-1)),i[11]||(i[11]=e("h2",{class:"heading-sub text-heading"},"Appointments Today",-1)),_(a).length>0?(r(),z(_(W),{key:0,text:String(_(a).length),size:"small",theme:"blue"},null,8,["text"])):w("",!0)]),H(_(X),{label:"View calendar →",variant:"ghost",size:"small",onClick:i[2]||(i[2]=c=>t.$router.push("/calendar")),class:"text-xs"})])]),e("div",Go,[H(dt,{appointments:_(a),loading:_(y)},null,8,["appointments","loading"])])])])])]),H(Be,{show:R.value,onClose:i[3]||(i[3]=c=>R.value=!1),onConfirm:b},null,8,["show"])]))}};export{er as default};
