import{u as $,c as b,r as F,l as M,m as A,x as B,o as a,D as V,e as l,p as i,v as c,G as p,d as n,g as N,F as g,i as y,t as m,y as w,k as h,s as O}from"./index-4t0q-YoU.js";import{Q}from"./index-B_XAiWWB.js";import{_ as W}from"./ModalShell-CCJo1Yaq.js";import{u as j}from"./users-B2Q7ljfB.js";const q={class:"space-y-4"},z={class:"grid grid-cols-2 gap-4"},G=["disabled","value"],L=["disabled"],H={label:"Teams"},I=["value"],J={label:"Users"},K=["value"],P={key:0,class:"text-xs text-gray-500 mt-1"},R=["value"],ee={__name:"CreateEventModal",props:{show:{type:Boolean,required:!0},initialDate:{type:String,default:""},dealerships:{type:Array,default:()=>[]},customer:{type:Object,default:null},assignee:{type:String,default:null},disabledFields:{type:Array,default:()=>[]}},emits:["create","cancel"],setup(o,{emit:x}){const u=o,f=x,v=$(),k=j(),C=b(()=>k.assignableUsers),T=b(()=>k.assignableTeams),D=b(()=>s.value.assignee&&s.value.assignee.startsWith("team-")),s=F({type:"test-drive",title:"",date:"",time:"",customer:"",assignee:"",dealership:""});M(()=>u.show,r=>{var e,d;if(r){const t=u.assignee||`user-${((e=v.currentUser)==null?void 0:e.id)||1}`;s.value={type:"test-drive",title:"",date:u.initialDate||"",time:"",customer:((d=u.customer)==null?void 0:d.name)||"",assignee:t,dealership:""}}}),A(()=>{var r;s.value.assignee||(s.value.assignee=u.assignee||`user-${((r=v.currentUser)==null?void 0:r.id)||1}`)});const S=()=>{s.value.title&&s.value.date&&f("create",{...s.value})},E=()=>{f("cancel")};return(r,e)=>(a(),B(W,{show:o.show,title:"Create New Event",subtitle:"Fill in the details for the new event.",onCancel:E},{actions:V(()=>[O(w(Q),{label:"Create Event",variant:"primary",size:"small",class:"rounded-sm",onClick:S})]),default:V(()=>{var d;return[l("div",q,[l("div",null,[e[8]||(e[8]=l("label",{class:"block label-upper mb-2"},"Event Type",-1)),i(l("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.type=t),class:"input"},[...e[7]||(e[7]=[l("option",{value:"test-drive"},"Test Drive",-1),l("option",{value:"appointment"},"Dealership Visit",-1),l("option",{value:"offsite"},"Offsite Visit",-1),l("option",{value:"workshop"},"Workshop",-1),l("option",{value:"call"},"Call",-1),l("option",{value:"delivery"},"Delivery",-1),l("option",{value:"meeting"},"Meeting",-1)])],512),[[c,s.value.type]])]),l("div",null,[e[9]||(e[9]=l("label",{class:"block label-upper mb-2"},"Title",-1)),i(l("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.title=t),type:"text",placeholder:"Event title...",class:"input"},null,512),[[p,s.value.title]])]),l("div",z,[l("div",null,[e[10]||(e[10]=l("label",{class:"block label-upper mb-2"},"Date",-1)),i(l("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.date=t),type:"date",class:"input"},null,512),[[p,s.value.date]])]),l("div",null,[e[11]||(e[11]=l("label",{class:"block label-upper mb-2"},"Time",-1)),i(l("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.time=t),type:"time",class:"input"},null,512),[[p,s.value.time]])])]),l("div",null,[e[12]||(e[12]=l("label",{class:"block label-upper mb-2"},"Customer",-1)),i(l("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>s.value.customer=t),type:"text",placeholder:"Customer name...",class:"input",disabled:o.disabledFields.includes("customer"),value:((d=o.customer)==null?void 0:d.name)||s.value.customer},null,8,G),[[p,s.value.customer]])]),l("div",null,[e[14]||(e[14]=l("label",{class:"block label-upper mb-2"},"Assign to",-1)),i(l("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>s.value.assignee=t),class:"input",disabled:o.disabledFields.includes("assignee")},[l("optgroup",H,[(a(!0),n(g,null,y(T.value,t=>(a(),n("option",{key:`team-${t.id}`,value:`team-${t.id}`},m(t.name)+" Team ",9,I))),128))]),l("optgroup",J,[(a(!0),n(g,null,y(C.value,t=>{var U;return a(),n("option",{key:`user-${t.id}`,value:`user-${t.id}`},m(t.name)+m(t.id===((U=w(v).currentUser)==null?void 0:U.id)?" (Me)":""),9,K)}),128))])],8,L),[[c,s.value.assignee]]),D.value?(a(),n("p",P,[...e[13]||(e[13]=[l("i",{class:"fa-solid fa-users text-gray-400"},null,-1),h(" Any available team member will be assigned ",-1)])])):N("",!0)]),l("div",null,[e[16]||(e[16]=l("label",{class:"block label-upper mb-2"},"Dealership",-1)),i(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>s.value.dealership=t),class:"input"},[e[15]||(e[15]=l("option",{value:""},"Select dealership...",-1)),(a(!0),n(g,null,y(o.dealerships,t=>(a(),n("option",{key:t,value:t},m(t),9,R))),128))],512),[[c,s.value.dealership]])])])]}),_:1},8,["show"]))}};export{ee as _};
