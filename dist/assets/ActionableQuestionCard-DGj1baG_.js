import{r as v,u as H,e as a,o as i,h as e,n as k,t as y,g as R,F as p}from"./index-BWBI-39A.js";import{u as Y}from"./ReassignUserModal-BGYPf12H.js";const U={class:"flex items-center gap-2 mb-2"},B={class:"text-[10px] text-gray-400"},I={class:"text-[10px] text-gray-500"},L={class:"ml-auto flex items-center gap-2"},O={key:1,class:"bg-white border border-gray-200 rounded-lg shadow-lg p-1.5 flex items-center gap-1.5 z-10"},S=["innerHTML"],V={class:"flex gap-2 flex-wrap justify-end px-2"},Q={__name:"ActionableQuestionCard",props:{question:{type:Object,required:!0}},emits:["answer-yes","answer-no","reassign","view-task","dismiss"],setup(r,{emit:w}){const o=r,d=w,c=v(!1),f=v(!1),q=H();Y();const C=()=>{var s,n,l;const t=((s=o.question.opportunity)==null?void 0:s.assignee)||((n=o.question.lead)==null?void 0:n.assignee);return t?t===((l=q.currentUser)==null?void 0:l.name)?"me":t:"Unknown"},D=()=>{const t=o.question.customer.name,s=o.question.question,n=`<a href="#" class="font-bold text-primary-600 hover:text-primary-700 hover:underline" onclick="event.preventDefault()">${t}</a>`;return s.replace(new RegExp(t,"g"),n)},N=t=>t===1?"bg-red-50 text-red-600 border-red-100":t<=3?"bg-amber-50 text-amber-600 border-amber-100":"bg-emerald-50 text-emerald-600 border-emerald-100",M=t=>t===1?"CRITICAL":t<=3?"HIGH":"MEDIUM",T=()=>{if(!o.question.createdAt&&!o.question.appointmentDate)return"Just now";const t=new Date(o.question.createdAt||o.question.appointmentDate),n=new Date-t,l=Math.floor(n/6e4),b=Math.floor(l/60),x=Math.floor(b/24);return l<1?"Just now":l<60?`${l} min ago`:b<24?`${b} hours ago`:x===1?"1 day ago":x<7?`${x} days ago`:`${Math.floor(x/7)} weeks ago`},m=()=>d("answer-yes",o.question),u=()=>d("answer-no",o.question),g=()=>d("reassign",o.question),h=()=>d("view-task",o.question),$=t=>{t.target.tagName==="A"&&(t.preventDefault(),h())},A=()=>{f.value=!0,setTimeout(()=>{d("dismiss",o.question)},200)};return(t,s)=>(i(),a("div",{class:k(["bg-white border border-gray-200 rounded-xl p-3 sm:p-4 shadow-sm hover:shadow transition-colors duration-200 mb-3",f.value?"opacity-50":""])},[e("div",U,[e("span",{class:k(["px-2 py-0.5 rounded text-[10px] font-bold uppercase border whitespace-nowrap",N(r.question.priority)])},y(M(r.question.priority)),3),e("span",B,y(T()),1),e("span",I,"â€¢ Owner: "+y(C()),1),e("div",L,[c.value?(i(),a("div",O,[s[3]||(s[3]=e("span",{class:"text-[10px] text-gray-600 whitespace-nowrap"},"Dismiss?",-1)),e("button",{onClick:A,class:"px-2 py-0.5 text-[10px] font-medium text-rose-700 bg-rose-50 hover:bg-rose-100 border border-rose-200 rounded transition-colors"}," Yes "),e("button",{onClick:s[1]||(s[1]=n=>c.value=!1),class:"px-2 py-0.5 text-[10px] font-medium text-gray-600 hover:text-gray-800 transition-colors"}," No ")])):(i(),a("button",{key:0,onClick:s[0]||(s[0]=n=>c.value=!0),class:"w-7 h-7 flex items-center justify-center rounded text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors",title:"Dismiss"},[...s[2]||(s[2]=[e("i",{class:"fa-solid fa-xmark text-sm"},null,-1)])]))])]),e("div",{class:"pt-4 pb-2 mb-3 px-2",onClick:$},[e("p",{class:"text-base text-slate-700 leading-relaxed",innerHTML:D()},null,8,S)]),e("div",V,[r.question.type==="appointment-followup"?(i(),a(p,{key:0},[e("button",{onClick:m,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg transition-colors"}," Yes "),e("button",{onClick:u,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-rose-700 bg-rose-50 hover:bg-rose-100 border border-rose-200 rounded-lg transition-colors"}," No ")],64)):r.question.type==="ns-followup"?(i(),a(p,{key:1},[e("button",{onClick:m,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg transition-colors"}," Yes "),e("button",{onClick:u,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-rose-700 bg-rose-50 hover:bg-rose-100 border border-rose-200 rounded-lg transition-colors"}," No "),e("button",{onClick:g,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-slate-700 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors"}," Reassign ")],64)):r.question.type==="offer-followup"?(i(),a("button",{key:2,onClick:h,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-primary-700 bg-primary-50 hover:bg-primary-100 border border-primary-200 rounded-lg transition-colors"}," View Opportunity ")):r.question.type==="stuck-opportunity"?(i(),a(p,{key:3},[e("button",{onClick:m,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg transition-colors"}," Yes "),e("button",{onClick:u,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-rose-700 bg-rose-50 hover:bg-rose-100 border border-rose-200 rounded-lg transition-colors"}," No "),e("button",{onClick:g,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-slate-700 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors"}," Reassign ")],64)):r.question.type==="lead-qualification-urgency"?(i(),a(p,{key:4},[e("button",{onClick:m,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-emerald-700 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg transition-colors"}," Yes "),e("button",{onClick:u,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-rose-700 bg-rose-50 hover:bg-rose-100 border border-rose-200 rounded-lg transition-colors"}," No "),e("button",{onClick:g,class:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm font-medium text-slate-700 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors"}," Reassign ")],64)):R("",!0)])],2))}};export{Q as _};
