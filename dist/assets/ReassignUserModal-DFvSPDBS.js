import{r as k,c as x,l as V,x as j,o as n,D as d,s as r,y as o,e as l,k as A,t as g,p as F,K as D,d as i,g as C,F as Q,i as q,n as S,Q as L}from"./index-DmX4Eg8G.js";import{u as H}from"./users-dEiHtx0c.js";import{a as M,F as W,L as K,H as O,j as G,C as I,W as J}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-B0oMcpqR.js";const P={class:"mb-4"},X={class:"space-y-2 max-h-96 overflow-y-auto mb-4"},Y=["onClick"],Z={key:0,class:"fa-solid fa-users text-fluid-sm"},ee={key:1},se={class:"flex-1"},te={class:"font-medium text-fluid-sm text-heading"},ae={class:"text-fluid-xs text-sub capitalize"},le={key:0,class:"fa-solid fa-check text-brand-dark"},oe={key:0,class:"text-center py-8"},de={__name:"ReassignUserModal",props:{show:{type:Boolean,required:!0},title:{type:String,default:"Reassign"},confirmLabel:{type:String,default:"Reassign"}},emits:["close","confirm"],setup(f,{emit:B}){const E=f,y=B,h=H(),a=k(null),u=k(""),$=x(()=>h.assignableUsers),z=x(()=>h.assignableTeams),_=x(()=>{const s=z.value.map(e=>({...e,type:"team"})),t=$.value.map(e=>({...e,type:"user"}));return[...s,...t]}),w=x(()=>{if(!u.value.trim())return _.value;const s=u.value.toLowerCase();return _.value.filter(t=>{var c,v;const e=t.name.toLowerCase(),m=((c=t.email)==null?void 0:c.toLowerCase())||"",p=((v=t.role)==null?void 0:v.toLowerCase())||"",b=t.type.toLowerCase();return e.includes(s)||m.includes(s)||p.includes(s)||b.includes(s)})}),R=s=>({manager:"bg-blue-100 text-blue-700",salesman:"bg-purple-100 text-purple-700",operator:"bg-orange-100 text-orange-700"})[s]||"bg-surfaceSecondary text-body",U=s=>{s||y("close")};V(()=>E.show,s=>{s||(a.value=null,u.value="")});const N=s=>{a.value=s},T=()=>{a.value&&(y("confirm",a.value),a.value=null,u.value="")};return(s,t)=>(n(),j(o(J),{open:f.show,"onUpdate:open":U},{default:d(()=>[r(o(M),null,{default:d(()=>[r(o(W),{class:"fixed inset-0 z-50 bg-black/50"}),r(o(K),{class:"w-full sm:max-w-md"},{default:d(()=>[r(o(O),null,{default:d(()=>[r(o(G),{class:"text-fluid-lg"},{default:d(()=>[A(g(f.title||"Reassign"),1)]),_:1})]),_:1}),t[3]||(t[3]=l("p",{class:"text-fluid-xs text-body mb-4"}," Select a user or team to assign: ",-1)),l("div",P,[F(l("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e),type:"text",placeholder:"Search users or teams...",class:"w-full px-3 py-2 border border-E5E7EB rounded-lg text-fluid-sm text-heading placeholder:text-sub focus:outline-none focus:border-brand-dark focus:ring-2 focus:ring-brand-dark/15"},null,512),[[D,u.value]])]),l("div",X,[(n(!0),i(Q,null,q(w.value,e=>{var m,p,b,c;return n(),i("button",{key:`${e.type}-${e.id}`,onClick:v=>N(e),class:S(["w-full flex items-center gap-3 p-3 rounded-lg border border-E5E7EB hover:bg-surfaceSecondary hover:border-brand-dark/30 transition-colors text-left",{"bg-surfaceSecondary border-brand-dark":((m=a.value)==null?void 0:m.type)===e.type&&((p=a.value)==null?void 0:p.id)===e.id}])},[l("div",{class:S(["w-10 h-10 rounded-full flex items-center justify-center font-semibold text-fluid-sm",e.type==="team"?"bg-green-100 text-green-700":R(e.role)])},[e.type==="team"?(n(),i("i",Z)):(n(),i("span",ee,g(e.initials),1))],2),l("div",se,[l("p",te,g(e.name),1),l("p",ae,g(e.type==="team"?"Team":`${e.role} â€¢ ${e.email}`),1)]),((b=a.value)==null?void 0:b.type)===e.type&&((c=a.value)==null?void 0:c.id)===e.id?(n(),i("i",le)):C("",!0)],10,Y)}),128)),w.value.length===0?(n(),i("div",oe,[...t[2]||(t[2]=[l("i",{class:"fa-solid fa-search text-3xl text-sub mb-2"},null,-1),l("p",{class:"text-fluid-sm text-sub"},"No users or teams found",-1)])])):C("",!0)]),r(o(I),{class:"flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3"},{default:d(()=>[r(o(L),{label:"Cancel",variant:"outline",size:"small",class:"rounded-sm w-full sm:w-auto text-fluid-sm",onClick:t[1]||(t[1]=e=>s.$emit("close"))}),r(o(L),{label:f.confirmLabel||"Reassign",variant:"primary",size:"small",class:"rounded-sm w-full sm:w-auto text-fluid-sm !bg-brand-red !hover:bg-brand-red-dark !text-white !border-brand-red",disabled:!a.value,onClick:T},null,8,["label","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}};export{de as _};
