import{r as N,I as oe,c as V,p as le,o as i,H as P,h as e,e as r,z as y,B as v,t as m,u as ne,G as ie,k as re,l as Q,F as j,i as F,g as c,C as E,D as z,j as _,n as f,d as ue,M as pe,w as H}from"./index-Be589Dcd.js";import{_ as de}from"./PageHeader-DBtxXtqo.js";import{_ as ce}from"./ModalShell-BDXG1RnS.js";import{u as me}from"./opportunities-BEKDyPzK.js";import{u as ye}from"./contacts-Db2R-Zq2.js";import{g as be,a as ve,d as G}from"./formatters-Br5TsDxy.js";const xe={class:"space-y-4"},ge={key:0},fe={key:1},he={key:2},we={key:3},ke=["placeholder"],Ce={class:"p-4 bg-gray-50 flex justify-end gap-3 border-t border-gray-100"},Ne={__name:"AddCustomerModal",props:{show:{type:Boolean,default:!1},activeTab:{type:String,required:!0},initialData:{type:Object,default:()=>({})}},emits:["close","save"],setup(w,{emit:$}){const b=w,D=$,u=N({customerName:"",email:"",phone:"",company:"",vehicle:"",value:"",reason:""});oe(()=>b.show,l=>{l&&(u.value={customerName:b.initialData.customerName||"",email:b.initialData.email||"",phone:b.initialData.phone||"",company:b.initialData.company||"",vehicle:b.initialData.vehicle||"",value:b.initialData.value||"",reason:b.initialData.reason||""})});const S=V(()=>({contacts:"Add New Contact","open-leads":"Add New Lead","open-opportunities":"Add New Opportunity","in-negotiation":"Add Opportunity in Negotiation",won:"Add Won Opportunity",lost:"Add Lost Opportunity"})[b.activeTab]||"Add New Item"),k=V(()=>({contacts:"Contact","open-leads":"Lead","open-opportunities":"Opportunity","in-negotiation":"Opportunity",won:"Won Opportunity",lost:"Lost Opportunity"})[b.activeTab]||"Item"),K=()=>{D("save",{...u.value}),u.value={customerName:"",email:"",phone:"",company:"",vehicle:"",value:"",reason:""}};return(l,o)=>(i(),le(ce,{show:w.show,title:S.value,subtitle:"Fill in the details below",size:"md",onClose:o[14]||(o[14]=p=>l.$emit("close")),onCancel:o[15]||(o[15]=p=>l.$emit("close"))},{footer:P(()=>[e("div",Ce,[e("button",{onClick:o[13]||(o[13]=p=>l.$emit("close")),class:"btn-secondary text-sm"}," Cancel "),e("button",{onClick:K,class:"btn-primary"}," Create "+m(k.value),1)])]),default:P(()=>[e("div",xe,[w.activeTab==="contacts"?(i(),r("div",ge,[o[16]||(o[16]=e("label",{class:"block label-upper mb-2"},"Contact Name",-1)),y(e("input",{"onUpdate:modelValue":o[0]||(o[0]=p=>u.value.customerName=p),type:"text",placeholder:"Enter contact name...",class:"input"},null,512),[[v,u.value.customerName]]),o[17]||(o[17]=e("label",{class:"block label-upper mb-2 mt-4"},"Email",-1)),y(e("input",{"onUpdate:modelValue":o[1]||(o[1]=p=>u.value.email=p),type:"email",placeholder:"contact@example.com",class:"input"},null,512),[[v,u.value.email]]),o[18]||(o[18]=e("label",{class:"block label-upper mb-2 mt-4"},"Phone",-1)),y(e("input",{"onUpdate:modelValue":o[2]||(o[2]=p=>u.value.phone=p),type:"tel",placeholder:"+49...",class:"input"},null,512),[[v,u.value.phone]]),o[19]||(o[19]=e("label",{class:"block label-upper mb-2 mt-4"},"Company (optional)",-1)),y(e("input",{"onUpdate:modelValue":o[3]||(o[3]=p=>u.value.company=p),type:"text",placeholder:"Company name...",class:"input"},null,512),[[v,u.value.company]])])):w.activeTab==="open-leads"?(i(),r("div",fe,[o[20]||(o[20]=e("label",{class:"block label-upper mb-2"},"Customer Name",-1)),y(e("input",{"onUpdate:modelValue":o[4]||(o[4]=p=>u.value.customerName=p),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[v,u.value.customerName]]),o[21]||(o[21]=e("label",{class:"block label-upper mb-2 mt-4"},"Email",-1)),y(e("input",{"onUpdate:modelValue":o[5]||(o[5]=p=>u.value.email=p),type:"email",placeholder:"customer@example.com",class:"input"},null,512),[[v,u.value.email]]),o[22]||(o[22]=e("label",{class:"block label-upper mb-2 mt-4"},"Requested Vehicle",-1)),y(e("input",{"onUpdate:modelValue":o[6]||(o[6]=p=>u.value.vehicle=p),type:"text",placeholder:"e.g., Volkswagen ID.4",class:"input"},null,512),[[v,u.value.vehicle]])])):w.activeTab==="open-opportunities"||w.activeTab==="in-negotiation"?(i(),r("div",he,[o[23]||(o[23]=e("label",{class:"block label-upper mb-2"},"Customer Name",-1)),y(e("input",{"onUpdate:modelValue":o[7]||(o[7]=p=>u.value.customerName=p),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[v,u.value.customerName]]),o[24]||(o[24]=e("label",{class:"block label-upper mb-2 mt-4"},"Vehicle",-1)),y(e("input",{"onUpdate:modelValue":o[8]||(o[8]=p=>u.value.vehicle=p),type:"text",placeholder:"e.g., Porsche Taycan",class:"input"},null,512),[[v,u.value.vehicle]]),o[25]||(o[25]=e("label",{class:"block label-upper mb-2 mt-4"},"Opportunity Value",-1)),y(e("input",{"onUpdate:modelValue":o[9]||(o[9]=p=>u.value.value=p),type:"number",placeholder:"0",class:"input"},null,512),[[v,u.value.value]])])):(i(),r("div",we,[o[26]||(o[26]=e("label",{class:"block label-upper mb-2"},"Customer Name",-1)),y(e("input",{"onUpdate:modelValue":o[10]||(o[10]=p=>u.value.customerName=p),type:"text",placeholder:"Enter customer name...",class:"input"},null,512),[[v,u.value.customerName]]),o[27]||(o[27]=e("label",{class:"block label-upper mb-2 mt-4"},"Vehicle",-1)),y(e("input",{"onUpdate:modelValue":o[11]||(o[11]=p=>u.value.vehicle=p),type:"text",placeholder:"Vehicle model",class:"input"},null,512),[[v,u.value.vehicle]]),o[28]||(o[28]=e("label",{class:"block label-upper mb-2 mt-4"},"Reason",-1)),y(e("textarea",{"onUpdate:modelValue":o[12]||(o[12]=p=>u.value.reason=p),rows:"3",placeholder:`Reason for ${w.activeTab==="won"?"win":"loss"}...`,class:"input resize-none"},null,8,ke),[[v,u.value.reason]])]))])]),_:1},8,["show","title"]))}},De={class:"page-container"},Se={class:"p-4 md:p-8"},Ae={class:"flex items-center gap-3 mb-6 overflow-x-auto pb-2 scrollbar-hide"},$e=["onClick"],Ve={class:"text-sm font-medium text-foreground whitespace-nowrap"},qe={class:"mb-6 bg-gray-50 border border-gray-200 rounded-lg px-4 py-3"},Le={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-3"},Oe={class:"flex flex-wrap items-center gap-2 md:gap-3"},Te={class:"w-full sm:w-auto sm:min-w-[260px] sm:max-w-md"},Ue={class:"relative"},Ie={class:"flex justify-end"},Me={key:0,class:"empty-state"},_e={key:1,class:"card overflow-hidden"},Re={class:"overflow-x-auto -mx-4 md:mx-0"},je={class:"w-full"},Fe={class:"bg-gray-50 border-b border-gray-200"},Ee={class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},Ke={key:0,class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},We={key:1,class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},Be={key:2,class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},Pe={key:3,class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},Qe={key:4,class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},ze={key:5,class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},He={key:6,class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap hidden xl:table-cell"},Ge={key:7,class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},Je={key:8,class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},Xe={class:"divide-y divide-gray-100"},Ye=["data-row-id","onClick"],Ze={class:"px-3 md:px-6 py-3 whitespace-nowrap"},et={class:"flex items-center gap-2 md:gap-3"},tt={class:"min-w-0"},st={key:0,class:"text-meta truncate hidden sm:block"},at={key:0,class:"px-3 md:px-6 py-3 text-content text-gray-600 whitespace-nowrap"},ot={class:"truncate block max-w-[100px]"},lt={key:1,class:"px-3 md:px-6 py-3 whitespace-nowrap"},nt={class:"text-content text-gray-600 truncate max-w-[150px]"},it={key:2,class:"px-3 md:px-6 py-3 text-content text-gray-600 whitespace-nowrap"},rt={key:3,class:"px-3 md:px-6 py-3 whitespace-nowrap"},ut={class:"text-content"},pt={key:4,class:"px-3 md:px-6 py-3 whitespace-nowrap"},dt={class:"flex items-center gap-2"},ct={class:"text-content font-medium truncate max-w-[120px]"},mt={key:5,class:"px-3 md:px-6 py-3 whitespace-nowrap"},yt={class:"px-3 md:px-6 py-3 whitespace-nowrap"},bt={class:"badge-ui bg-gray-100 text-gray-700 font-semibold"},vt={key:6,class:"px-3 md:px-6 py-3 whitespace-nowrap hidden xl:table-cell"},xt={class:"flex flex-wrap gap-1"},gt={key:0,class:"text-xs text-gray-400"},ft={key:7,class:"px-3 md:px-6 py-3 whitespace-nowrap"},ht={class:"flex items-center gap-2"},wt={class:"w-6 h-6 rounded-full bg-gray-100 flex items-center justify-center text-[10px] font-bold text-gray-600 shrink-0"},kt={class:"text-content text-gray-600 truncate max-w-[80px] hidden md:inline"},Ct={key:8,class:"px-3 md:px-6 py-3 whitespace-nowrap"},qt={__name:"Customers",setup(w){const $=ue();pe();const b=ne(),D=ie(),u=me(),S=ye(),k=V(()=>{const n=D.leads.filter(d=>!d.isDisqualified),t=u.opportunities.filter(d=>d.stage!=="Closed Won"&&d.stage!=="Closed Lost"),a=u.opportunities.filter(d=>d.stage==="In Negotiation"||d.stage==="In negotiation"),g=u.opportunities.filter(d=>d.stage==="Closed Won"),h=u.opportunities.filter(d=>d.stage==="Closed Lost");return{contacts:S.contacts.length,openLeads:n.length,openOpportunities:t.length-a.length,inNegotiation:a.length,won:g.length,lost:h.length}}),l=N(b.isOperator()?"open-leads":b.isManager()||b.isSalesman()?"in-negotiation":"contacts"),o=N(""),p=N(!1),q=N(!1),A=N("all"),x=N({status:"",priority:"",source:""}),W=N({customerName:"",email:"",phone:"",company:"",vehicle:"",value:"",reason:""}),J=V(()=>{const n=[{key:"contacts",label:"Contacts & Accounts",count:k.value.contacts,borderColor:"border-t-purple-600",badgeColor:"bg-purple-600 text-white"},{key:"open-leads",label:"Open Leads",count:k.value.openLeads,borderColor:"border-t-blue-600",badgeColor:"bg-blue-600 text-white"},{key:"open-opportunities",label:"Open opportunities",count:k.value.openOpportunities,borderColor:"border-t-orange-500",badgeColor:"bg-orange-500 text-white"},{key:"in-negotiation",label:"In negotiation",count:k.value.inNegotiation,borderColor:"border-t-blue-500",badgeColor:"bg-blue-500 text-white"},{key:"won",label:"Won",count:k.value.won,borderColor:"border-t-green-500",badgeColor:"bg-green-500 text-white"},{key:"lost",label:"Lost",count:k.value.lost,borderColor:"border-t-red-500",badgeColor:"bg-red-500 text-white"}];return b.isOperator()?n.filter(t=>t.key==="contacts"||t.key==="open-leads"):b.isSalesman()?n.filter(t=>t.key!=="open-leads"):n}),X=()=>{W.value={customerName:"",email:"",phone:"",company:"",vehicle:"",value:"",reason:""},p.value=!1},Y=V(()=>{let n=S.contacts;A.value==="contacts"?n=S.contacts.filter(s=>!s.company||s.company===""):A.value==="accounts"&&(n=S.contacts.filter(s=>s.company&&s.company!==""));const t=n.map(s=>({id:`contact-${s.id}`,stageKey:"contacts",customer:s.name,email:s.email,phone:s.phone,company:s.company||"-",initials:s.initials||s.name.slice(0,2).toUpperCase(),source:s.source||"Marketing",tags:s.tags||[],type:s.company&&s.company!==""?"account":"contact"}));let a=D.leads;q.value?a=D.leads.filter(s=>s.isDisqualified===!0):a=D.leads.filter(s=>!s.isDisqualified);const g=a.map(s=>{var d,C,L,O,T,U,I;return{id:`lead-${s.id}`,stageKey:"open-leads",customer:s.customer.name,email:s.customer.email,initials:s.customer.initials||s.customer.name.slice(0,2).toUpperCase(),nextAction:G(s.nextActionDue)||"No due date",nextActionFull:ve(s.nextActionDue),deadlineStatus:be(s.nextActionDue),car:`${((d=s.requestedCar)==null?void 0:d.brand)||""} ${((C=s.requestedCar)==null?void 0:C.model)||""}`.trim()||"N/A",carStatus:((L=s.requestedCar)==null?void 0:L.stockDays)!==void 0&&((O=s.requestedCar)==null?void 0:O.stockDays)!==null?"In Stock":"Out of Stock",carStatusClass:((T=s.requestedCar)==null?void 0:T.stockDays)!==void 0&&((U=s.requestedCar)==null?void 0:U.stockDays)!==null?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",requestType:((I=s.requestedCar)==null?void 0:I.requestType)||"Quotation",source:s.source||"Marketing",assignee:s.assignee,assigneeInitials:s.assignee?s.assignee.slice(0,2).toUpperCase():"NA",createdAt:M(s.createdAt),lastActivity:M(s.lastActivity),status:s.status,statusClass:se(s.status),priority:s.priority||"Normal"}}),h=u.opportunities.map(s=>{var C,L,O,T,U,I;let d="open-opportunities";return s.stage==="In Negotiation"||s.stage==="In negotiation"?d="in-negotiation":s.stage==="Closed Won"?d="won":s.stage==="Closed Lost"&&(d="lost"),{id:`opp-${s.id}`,stageKey:d,customer:s.customer.name,email:s.customer.email,initials:s.customer.initials||s.customer.name.slice(0,2).toUpperCase(),nextAction:G(s.expectedCloseDate)||"No due date",car:`${((C=s.vehicle)==null?void 0:C.brand)||""} ${((L=s.vehicle)==null?void 0:L.model)||""}`.trim()||"N/A",carStatus:((O=s.vehicle)==null?void 0:O.stockDays)!==void 0&&((T=s.vehicle)==null?void 0:T.stockDays)!==null?"In Stock":"Out of Stock",carStatusClass:((U=s.vehicle)==null?void 0:U.stockDays)!==void 0&&((I=s.vehicle)==null?void 0:I.stockDays)!==null?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700",requestType:"Opportunity",source:s.source||"Marketing",assignee:s.assignee,assigneeInitials:s.assignee?s.assignee.slice(0,2).toUpperCase():"NA",createdAt:M(s.createdAt),lastActivity:M(s.lastActivity),status:s.stage,statusClass:d==="in-negotiation"?"bg-orange-100 text-orange-700":d==="won"?"bg-green-100 text-green-700":d==="lost"?"bg-red-100 text-red-700":"bg-purple-100 text-purple-700",priority:s.priority||"Normal"}});return[...t,...g,...h]}),B=V(()=>{let n=Y.value.filter(t=>t.stageKey===l.value);if(o.value){const t=o.value.toLowerCase();n=n.filter(a=>{var g,h,s,d,C;return a.stageKey==="contacts"?a.customer.toLowerCase().includes(t)||((g=a.email)==null?void 0:g.toLowerCase().includes(t))||((h=a.company)==null?void 0:h.toLowerCase().includes(t))||((s=a.phone)==null?void 0:s.toLowerCase().includes(t)):a.customer.toLowerCase().includes(t)||((d=a.email)==null?void 0:d.toLowerCase().includes(t))||((C=a.car)==null?void 0:C.toLowerCase().includes(t))})}return x.value.status&&(n=n.filter(t=>t.status===x.value.status)),x.value.priority&&(n=n.filter(t=>t.priority===x.value.priority)),x.value.source&&(n=n.filter(t=>t.source===x.value.source)),n}),Z=n=>{l.value=n},ee=()=>{},R=()=>{},te=()=>{x.value={status:"",priority:"",source:""},o.value=""},se=n=>({Valid:"bg-green-100 text-green-700","Not valid":"bg-red-100 text-red-700",Qualified:"bg-gray-100 text-gray-700","Not interested":"bg-red-100 text-red-700",Open:"bg-blue-100 text-blue-700"})[n]||"bg-gray-100 text-gray-700",M=n=>n?new Date(n).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";re(async()=>{await S.loadContacts(),await D.loadLeads(),await u.loadOpportunities()});const ae=n=>{if(n.stageKey==="contacts"){const a=n.id.split("-")[1];$.push({path:`/customer/${a}`,query:{type:"contact"}});return}const t=n.id.match(/-(\d+)$/);if(l.value==="open-leads"&&n.id.startsWith("lead-")){const a=t?t[1]:n.id.replace("lead-","");$.push({path:`/customer/${a}`,query:{stage:"lead"}})}else if(n.id.startsWith("opp-")){const a=t?t[1]:n.id.replace("opp-","");$.push({path:`/customer/${a}`,query:{stage:"opportunity"}})}else if(n.stageKey==="won"||n.stageKey==="lost"){const a=t?t[1]:n.id.replace("opp-","");$.push({path:`/customer/${a}`,query:{stage:"opportunity"}})}};return(n,t)=>(i(),r("div",De,[Q(de,{title:"Customers",subtitle:"Manage contacts, accounts, leads and opportunities"}),e("div",Se,[e("div",Ae,[(i(!0),r(j,null,F(J.value,a=>(i(),r("button",{key:a.key,onClick:g=>Z(a.key),class:f(["flex items-center justify-between gap-3 px-4 py-3 bg-white border border-border rounded-lg cursor-pointer hover:shadow-sm transition-all shrink-0 min-w-[160px] border-t-4",l.value===a.key?a.borderColor:"border-t-border"])},[e("span",Ve,m(a.label),1),e("span",{class:f(["px-2.5 py-1 text-sm font-semibold rounded-full min-w-[32px] text-center",l.value===a.key?a.badgeColor:"bg-muted text-muted-foreground"])},m(a.count),3)],10,$e))),128))]),e("div",qe,[e("div",Le,[e("div",Oe,[e("div",Te,[e("div",Ue,[t[10]||(t[10]=e("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>o.value=a),onInput:ee,type:"text",placeholder:"Search or ask a question",class:"input-with-icon"},null,544),[[v,o.value]])])]),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>x.value.status=a),onChange:R,class:"input text-sm w-auto shrink-0"},[...t[11]||(t[11]=[z('<option value="">Status</option><option value="Valid">Valid</option><option value="Not valid">Not valid</option><option value="Qualified">Qualified</option><option value="Not interested">Not interested</option>',5)])],544),[[E,x.value.status]]),y(e("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>x.value.priority=a),onChange:R,class:"input text-sm w-auto shrink-0"},[...t[12]||(t[12]=[e("option",{value:""},"Priority",-1),e("option",{value:"Hot"},"Hot",-1),e("option",{value:"Normal"},"Normal",-1)])],544),[[E,x.value.priority]]),y(e("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>x.value.source=a),onChange:R,class:"input text-sm w-auto shrink-0"},[...t[13]||(t[13]=[e("option",{value:""},"Source",-1),e("option",{value:"Marketing"},"Marketing",-1)])],544),[[E,x.value.source]]),t[16]||(t[16]=e("button",{class:"btn-secondary text-sm"},[e("i",{class:"fa-solid fa-plus mr-1"}),_(" More filters ")],-1)),e("button",{onClick:te,class:"btn-secondary text-sm"}," Clear "),t[17]||(t[17]=e("button",{class:"btn-secondary text-sm"}," Save ",-1)),l.value==="contacts"?(i(),r("button",{key:0,onClick:t[4]||(t[4]=a=>A.value=A.value==="all"?"contacts":A.value==="contacts"?"accounts":"all"),class:"btn-secondary text-sm flex items-center gap-2 transition-colors"},[t[14]||(t[14]=e("i",{class:"fa-solid fa-filter"},null,-1)),_(" "+m(A.value==="all"?"All":A.value==="contacts"?"Contacts Only":"Accounts Only"),1)])):c("",!0),l.value==="open-leads"?(i(),r("button",{key:1,onClick:t[5]||(t[5]=a=>q.value=!q.value),class:f(["btn-secondary text-sm flex items-center gap-2 transition-colors",q.value?"bg-red-50 border-red-300 text-red-700 hover:bg-red-100":""])},[t[15]||(t[15]=e("i",{class:"fa-solid fa-ban"},null,-1)),_(" "+m(q.value?"Hide Disqualified":"Show Disqualified"),1)],2)):c("",!0)]),e("div",Ie,[l.value==="contacts"||l.value==="open-leads"||l.value==="open-opportunities"?(i(),r("button",{key:0,onClick:t[6]||(t[6]=a=>p.value=!0),class:"btn-primary-lg"},[...t[18]||(t[18]=[e("i",{class:"fa-solid fa-plus"},null,-1),_(" Add new ",-1)])])):c("",!0)])])]),B.value.length===0?(i(),r("div",Me,[...t[19]||(t[19]=[e("i",{class:"fa-solid fa-inbox empty-state-icon"},null,-1),e("p",{class:"empty-state-text"},"No records found",-1)])])):(i(),r("div",_e,[e("div",Re,[e("table",je,[e("thead",Fe,[e("tr",null,[t[20]||(t[20]=e("th",{class:"px-3 md:px-6 py-3 text-left"},[e("input",{type:"checkbox",class:"rounded"})],-1)),e("th",Ee,m(l.value==="contacts"?"Contact":"Customer"),1),l.value==="contacts"?(i(),r("th",Ke,"Company")):c("",!0),l.value==="contacts"?(i(),r("th",We,"Email")):c("",!0),l.value==="contacts"?(i(),r("th",Be,"Phone")):c("",!0),l.value!=="contacts"?(i(),r("th",Pe,"Next action due")):c("",!0),l.value!=="contacts"?(i(),r("th",Qe,"Requested car")):c("",!0),l.value!=="contacts"?(i(),r("th",ze,"Car status")):c("",!0),t[21]||(t[21]=e("th",{class:"px-3 md:px-6 py-3 text-left label-upper whitespace-nowrap"},"Source",-1)),l.value==="contacts"?(i(),r("th",He,"Tags")):c("",!0),l.value!=="contacts"?(i(),r("th",Ge,"Assignee")):c("",!0),l.value!=="contacts"?(i(),r("th",Je,"Status")):c("",!0),t[22]||(t[22]=e("th",{class:"px-3 md:px-6 py-3"},null,-1))])]),e("tbody",Xe,[(i(!0),r(j,null,F(B.value,a=>{var g,h,s;return i(),r("tr",{key:a.id,"data-row-id":a.id,class:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:d=>ae(a)},[e("td",{class:"px-3 md:px-6 py-3 whitespace-nowrap",onClick:t[7]||(t[7]=H(()=>{},["stop"]))},[...t[23]||(t[23]=[e("input",{type:"checkbox",class:"rounded"},null,-1)])]),e("td",Ze,[e("div",et,[e("div",{class:f(["w-9 h-9 rounded-full flex items-center justify-center text-xs font-bold shrink-0",l.value==="contacts"?"bg-blue-100 text-blue-600":"bg-orange-100 text-orange-600"])},m(a.initials),3),e("div",tt,[e("div",{class:f(["text-content-bold truncate",l.value==="contacts"?"max-w-[120px] md:max-w-none":""])},m(a.customer),3),l.value!=="contacts"?(i(),r("div",st,m(a.email),1)):c("",!0)])])]),l.value==="contacts"?(i(),r("td",at,[e("span",ot,m(a.company||"-"),1)])):c("",!0),l.value==="contacts"?(i(),r("td",lt,[e("div",nt,m(a.email),1)])):c("",!0),l.value==="contacts"?(i(),r("td",it,m(a.phone),1)):c("",!0),l.value!=="contacts"?(i(),r("td",rt,[e("div",ut,[e("div",{class:f(["font-medium mb-0.5",((g=a.deadlineStatus)==null?void 0:g.textClass)||"text-gray-600"])},m(a.nextActionFull),3),e("div",{class:f(["text-xs flex items-center gap-1",((h=a.deadlineStatus)==null?void 0:h.textClass)||"text-gray-500"])},[(s=a.deadlineStatus)!=null&&s.icon?(i(),r("i",{key:0,class:f(`fa-solid ${a.deadlineStatus.icon} text-[10px]`)},null,2)):c("",!0),e("span",null,m(a.nextAction),1)],2)])])):c("",!0),l.value!=="contacts"?(i(),r("td",pt,[e("div",dt,[t[24]||(t[24]=e("i",{class:"fa-brands fa-volkswagen text-gray-400 text-sm"},null,-1)),e("span",ct,m(a.car),1)])])):c("",!0),l.value!=="contacts"?(i(),r("td",mt,[e("span",{class:f(["badge-ui font-semibold",a.carStatusClass])},m(a.carStatus),3)])):c("",!0),e("td",yt,[e("span",bt,m(a.source),1)]),l.value==="contacts"?(i(),r("td",vt,[e("div",xt,[(i(!0),r(j,null,F(a.tags,d=>(i(),r("span",{key:d,class:"badge-ui bg-blue-50 text-blue-700 font-semibold"},m(d),1))),128)),!a.tags||a.tags.length===0?(i(),r("span",gt,"-")):c("",!0)])])):c("",!0),l.value!=="contacts"?(i(),r("td",ft,[e("div",ht,[e("div",wt,m(a.assigneeInitials),1),e("span",kt,m(a.assignee),1)])])):c("",!0),l.value!=="contacts"?(i(),r("td",Ct,[e("span",{class:f(["badge-ui font-semibold",a.statusClass])},m(a.status),3)])):c("",!0),e("td",{class:"px-3 md:px-6 py-3 whitespace-nowrap",onClick:t[8]||(t[8]=H(()=>{},["stop"]))},[...t[25]||(t[25]=[e("button",{class:"text-gray-400 hover:text-gray-600"},[e("i",{class:"fa-solid fa-ellipsis-vertical"})],-1)])])],8,Ye)}),128))])])]),t[26]||(t[26]=z('<div class="px-4 md:px-6 py-4 border-t border-gray-200 flex flex-col sm:flex-row items-stretch sm:items-center justify-between gap-3"><div class="text-sm text-gray-600 flex items-center"> Rows per page: <select class="ml-2 input text-sm w-auto"><option>10</option><option>25</option><option>50</option><option>100</option></select></div><div class="flex items-center gap-1 md:gap-2 flex-wrap"><button class="btn-secondary text-sm whitespace-nowrap">Previous</button><button class="px-3 py-2 text-sm bg-blue-600 text-white rounded-lg font-medium">1</button><button class="btn-secondary text-sm">2</button><button class="btn-secondary text-sm hidden sm:inline-block">3</button><span class="px-2 text-sm text-gray-500 hidden sm:inline">...</span><button class="btn-secondary text-sm whitespace-nowrap">Next</button></div></div>',1))]))]),Q(Ne,{show:p.value,"active-tab":l.value,"initial-data":W.value,onClose:t[9]||(t[9]=a=>p.value=!1),onSave:X},null,8,["show","active-tab","initial-data"])]))}};export{qt as default};
