import{a7 as P,D as ce,r as D,c as F,a8 as te,l as ne,m as fe,L as pe,p as Z,d as I,o as q,s as l,B as a,y as t,k as c,x as Y,g as W,e as s,$ as ue,F as ve,i as ye,t as U,n as H,w as be}from"./index-Db_3peLd.js";import{e as _,t as ee,J as R,Q as V,c as B,Y as M,n as xe,G as z,W as $,U as G,H as J,j as T,o as ge,i as re}from"./toggle-group-item.vue_vue_type_script_setup_true_lang-Csij51_o-BDHqZScF.js";import{fetchContacts as we,fetchContactById as ie,createContact as Ce,updateContact as Ve,deleteContact as ke,addRequestedCarToContact as Se,convertContactToLead as Te,convertContactToOpportunity as he}from"./contacts-BPIU2ljN.js";const Q=(n=300)=>new Promise(i=>setTimeout(i,n)),le=()=>P.filter(n=>n.company&&n.company!==""),Ee=async(n={})=>{await Q();let i=le();if(n.search){const m=n.search.toLowerCase();i=i.filter(d=>{var w;return d.name.toLowerCase().includes(m)||d.email.toLowerCase().includes(m)||((w=d.company)==null?void 0:w.toLowerCase().includes(m))})}return{data:i,total:i.length}},de=async n=>{await Q();const m=le().find(d=>d.id===parseInt(n));if(!m)throw new Error("Account not found");return m},qe=async n=>{await Q();const i={id:P.length+1,...n,createdAt:new Date().toISOString(),lastContact:new Date().toISOString()};return P.push(i),i},Ae=async(n,i)=>{if(await Q(),le().findIndex(S=>S.id===parseInt(n))===-1)throw new Error("Account not found");const w=P.findIndex(S=>S.id===parseInt(n));return w!==-1&&(P[w]={...P[w],...i}),P[w]},Ue=async n=>{await Q();const i=P.findIndex(m=>m.id===parseInt(n));if(i===-1)throw new Error("Account not found");return P.splice(i,1),{success:!0}},De=ce("customers",()=>{const n=D([]),i=D(null),m=D(!1),d=D(null),w=D(""),S=F(()=>n.value.filter(o=>o.type==="contact")),C=F(()=>n.value.filter(o=>o.type==="account")),h=F(()=>n.value.length),b=F(()=>S.value.length),x=F(()=>C.value.length),g=async(o={})=>{m.value=!0,d.value=null;try{const[f,p]=await Promise.all([we(o),Ee(o)]),y=[...f.data.map(k=>({...k,type:"contact"})),...p.data.map(k=>({...k,type:"account"}))];return n.value=y,{data:y,total:y.length}}catch(f){throw d.value=f.message,f}finally{m.value=!1}},r=async(o,f=null)=>{m.value=!0,d.value=null;try{if(f==="contact")i.value={...await ie(o),type:"contact"};else if(f==="account")i.value={...await de(o),type:"account"};else try{const p=await ie(o);i.value={...p,type:"contact"}}catch{const p=await de(o);i.value={...p,type:"account"}}return i.value}catch(p){throw d.value=p.message,p}finally{m.value=!1}},L=async o=>{m.value=!0,d.value=null;try{const f=o.company&&o.company!=="",y={...await(f?qe(o):Ce(o)),type:f?"account":"contact"};return n.value.unshift(y),y}catch(f){throw d.value=f.message,f}finally{m.value=!1}},E=async(o,f,p)=>{var y;m.value=!0,d.value=null;try{const k=await(p==="account"?Ae(o,f):Ve(o,f)),X=n.value.findIndex(v=>v.id===o);return X!==-1&&(n.value[X]={...k,type:p}),((y=i.value)==null?void 0:y.id)===o&&(i.value={...k,type:p}),{...k,type:p}}catch(k){throw d.value=k.message,k}finally{m.value=!1}},O=async(o,f)=>{var p;m.value=!0,d.value=null;try{await(f==="account"?Ue(o):ke(o)),n.value=n.value.filter(y=>y.id!==o),((p=i.value)==null?void 0:p.id)===o&&(i.value=null)}catch(y){throw d.value=y.message,y}finally{m.value=!1}};function A(o){w.value=o,g({search:o})}return{customers:n,contacts:S,accounts:C,currentCustomer:i,loading:m,error:d,searchQuery:w,totalCustomers:h,totalContacts:b,totalAccounts:x,fetchCustomers:g,fetchCustomerById:r,addCustomer:L,updateCustomer:E,removeCustomer:O,setSearchQuery:A,addContact:async o=>await L({...o,company:null}),modifyContact:async(o,f)=>await E(o,f,"contact"),removeContact:async o=>await O(o,"contact"),addRequestedCar:async(o,f)=>{const p=n.value.find(y=>y.id===o);if(!p)throw new Error("Customer not found");if(p.type==="contact")return await Se(o,f);throw new Error("Requested cars not supported for accounts")},convertToLead:async o=>{var p;const f=n.value.find(y=>y.id===o);if(!f)throw new Error("Customer not found");if(f.type==="contact"){const y=await Te(o);return n.value=n.value.filter(k=>k.id!==o),((p=i.value)==null?void 0:p.id)===o&&(i.value=null),y}throw new Error("Only contacts can be converted to leads")},convertToOpportunity:async o=>{var p;const f=n.value.find(y=>y.id===o);if(!f)throw new Error("Customer not found");if(f.type==="contact"){const y=await he(o);return n.value=n.value.filter(k=>k.id!==o),((p=i.value)==null?void 0:p.id)===o&&(i.value=null),y}throw new Error("Only contacts can be converted to opportunities")}}});function Le({contactMode:n,selectedContact:i,contactFormData:m}){const d=te({name:"",email:""}),w=b=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b),S=F(()=>n.value==="existing"?!!i.value:!!(m.name&&m.email));return{errors:d,canSubmit:S,validateEmail:w,validateContactForm:()=>{if(d.name="",d.email="",n.value==="new"){let b=!0;return m.name.trim()||(d.name="Contact name is required",b=!1),m.email.trim()?w(m.email)||(d.email="Please enter a valid email address",b=!1):(d.email="Email is required",b=!1),b}else return!!i.value},clearErrors:()=>{d.name="",d.email=""}}}function Oe({contactMode:n,selectedContact:i,contactFormData:m,vehicleFormData:d,markAsLead:w,markAsOpportunity:S,validateContactForm:C,onSubmit:h}){const b=D(!1),x=E=>Object.entries(E).reduce((O,[A,j])=>{if(j!==null&&j!==""&&j!==void 0){if(A==="year"&&j===new Date().getFullYear())return O;O[A]=j}return O},{}),g=()=>n.value==="new"?{name:m.name.trim(),email:m.email.trim(),phone:m.phone.trim(),company:m.company.trim()}:null,r=()=>{if(!C())return;b.value=!0;const E=x(d),O=g(),A={contactMode:n.value,selectedContact:i.value,contactData:O,vehicleData:Object.keys(E).length>0?E:null,markAsLead:w.value,markAsOpportunity:S.value};h&&h(A)},L=()=>{b.value=!1};return{isSubmitting:F(()=>b.value),handleSubmit:r,resetSubmitting:L}}const Re={key:0},Me={class:"flex gap-4"},Ie={key:0,class:"space-y-3"},Be={class:"relative"},Fe={class:"relative"},Pe=["onClick"],je={class:"w-8 h-8 rounded-full bg-surfaceSecondary text-primary flex items-center justify-center text-xs font-bold shrink-0"},Ne={class:"flex-1 min-w-0"},We={class:"font-semibold text-heading text-fluid-xs truncate"},Ye={class:"text-sub text-fluid-xs truncate"},Qe={class:"flex items-center justify-between"},He={class:"flex items-center gap-3"},ze={class:"w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center text-xs font-bold"},$e={class:"font-bold text-heading text-fluid-xs"},Ge={class:"text-sub text-fluid-xs"},Je={key:1,class:"space-y-3"},Ke={key:0,class:"text-brand-red text-fluid-xs mt-1"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Ze={key:0,class:"text-brand-red text-fluid-xs mt-1"},_e={class:"flex items-center gap-2"},et={class:"w-10 h-10 rounded-full bg-white text-primary flex items-center justify-center text-xs font-bold"},tt={class:"font-bold text-heading text-fluid-xs"},lt={class:"text-sub text-fluid-xs"},at={class:"grid grid-cols-2 md:grid-cols-4 gap-3"},st={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ot={class:"grid grid-cols-2 gap-3"},nt={class:"grid grid-cols-2 gap-3"},ut={key:0,class:"flex flex-col md:flex-row gap-3"},rt={class:"text-fluid-xs font-bold text-heading"},ft={__name:"UnifiedAddForm",props:{initialContact:{type:Object,default:null},hideContactSelection:{type:Boolean,default:!1},forceType:{type:String,default:""}},emits:["submit"],setup(n,{expose:i,emit:m}){const d=n,w=m,S=De(),C=D(d.initialContact?"existing":"new"),h=D(""),b=D(!1),x=D(d.initialContact||null),g=te({name:"",email:"",phone:"",company:""}),r=te({brand:"",model:"",year:new Date().getFullYear(),price:null,requestMessage:"",requestType:"",source:"",dealership:"",channel:"Email",fuelType:"",gearType:"",kilometers:null,stockDays:null}),L=D(d.forceType==="lead"),E=D(d.forceType==="opportunity");ne(()=>d.forceType,v=>{v==="lead"?(L.value=!0,E.value=!1):v==="opportunity"&&(L.value=!1,E.value=!0)}),ne(()=>d.initialContact,v=>{v&&(x.value=v,h.value=v.name,C.value="existing")},{immediate:!0});let O=null;const{errors:A,canSubmit:j,validateContactForm:ae,clearErrors:se}=Le({contactMode:C,selectedContact:x,contactFormData:g});fe(()=>{S.customers.length===0&&S.fetchCustomers()});const K=F(()=>{if(!h.value.trim())return S.customers.slice(0,10);const v=h.value.toLowerCase();return S.customers.filter(e=>e.name.toLowerCase().includes(v)||e.email.toLowerCase().includes(v)||e.company&&e.company.toLowerCase().includes(v)).slice(0,10)}),N=F(()=>!!(r.brand||r.model||r.year!==new Date().getFullYear()||r.price||r.requestMessage||r.requestType||r.source||r.dealership||r.fuelType||r.gearType||r.kilometers||r.stockDays)),{isSubmitting:oe,handleSubmit:o,resetSubmitting:f}=Oe({contactMode:C,selectedContact:x,contactFormData:g,vehicleFormData:r,markAsLead:L,markAsOpportunity:E,validateContactForm:ae,onSubmit:v=>{w("submit",v)}}),p=()=>{clearTimeout(O),O=setTimeout(()=>{b.value=!0},300)},y=v=>{x.value=v,h.value=v.name,b.value=!1},k=()=>{x.value=null,h.value="",b.value=!1};return i({resetSubmitting:f,submit:o,clear:()=>{C.value="new",x.value=null,h.value="",b.value=!1,g.name="",g.email="",g.phone="",g.company="",Object.keys(r).forEach(v=>{v==="year"?r[v]=new Date().getFullYear():v==="channel"?r[v]="Email":typeof r[v]=="number"?r[v]=null:r[v]=""}),L.value=!1,E.value=!1,se()},canSubmit:j,isSubmitting:oe}),(v,e)=>{const me=pe("click-outside");return Z((q(),I("form",{onSubmit:e[19]||(e[19]=be((...u)=>v.handleSubmit&&v.handleSubmit(...u),["prevent"])),class:"w-full"},[l(t(M),{class:"mb-4"},{default:a(()=>[l(t(_),null,{default:a(()=>[l(t(ee),null,{default:a(()=>[...e[20]||(e[20]=[c("Contact Information",-1)])]),_:1})]),_:1}),l(t(R),{class:"space-y-4"},{default:a(()=>[n.hideContactSelection?x.value?(q(),Y(t(M),{key:1,class:"bg-surfaceSecondary border-border"},{default:a(()=>[l(t(R),null,{default:a(()=>[s("div",_e,[s("div",et,U(x.value.initials),1),s("div",null,[s("div",tt,U(x.value.name),1),s("div",lt,U(x.value.email),1)])])]),_:1})]),_:1})):W("",!0):(q(),I("div",Re,[s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[21]||(e[21]=[c("Contact Type",-1)])]),_:1}),s("div",Me,[l(t(V),{class:"flex items-center gap-2 cursor-pointer"},{default:a(()=>[Z(s("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=u=>C.value=u),value:"new",class:"w-4 h-4 text-brand-blue focus:ring-brand-blue border-gray-300"},null,512),[[ue,C.value]]),e[22]||(e[22]=s("span",{class:"text-sm text-body"},"New Contact",-1))]),_:1}),l(t(V),{class:"flex items-center gap-2 cursor-pointer"},{default:a(()=>[Z(s("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=u=>C.value=u),value:"existing",class:"w-4 h-4 text-brand-blue focus:ring-brand-blue border-gray-300"},null,512),[[ue,C.value]]),e[23]||(e[23]=s("span",{class:"text-sm text-body"},"Existing Contact",-1))]),_:1})])]),C.value==="existing"?(q(),I("div",Ie,[s("div",Be,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[24]||(e[24]=[c("Search Contact",-1)])]),_:1}),s("div",Fe,[e[25]||(e[25]=s("i",{class:"fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-sub text-xs z-10"},null,-1)),l(t(B),{modelValue:h.value,"onUpdate:modelValue":e[2]||(e[2]=u=>h.value=u),onInput:p,onFocus:e[3]||(e[3]=u=>b.value=!0),type:"text",placeholder:"Search by name, email, or company...",class:"pl-9"},null,8,["modelValue"])]),b.value&&K.value.length>0?(q(),Y(t(M),{key:0,class:"absolute z-50 w-full mt-1 max-h-64 overflow-y-auto shadow-lg"},{default:a(()=>[l(t(R),{class:"p-0"},{default:a(()=>[(q(!0),I(ve,null,ye(K.value,u=>(q(),I("div",{key:u.id,onClick:it=>y(u),class:"flex items-center gap-2 p-3 hover:bg-surfaceSecondary cursor-pointer border-b border-border last:border-b-0"},[s("div",je,U(u.initials),1),s("div",Ne,[s("div",We,U(u.name),1),s("div",Ye,U(u.email),1)]),e[26]||(e[26]=s("i",{class:"fa-solid fa-chevron-right text-sub text-xs"},null,-1))],8,Pe))),128))]),_:1})]),_:1})):W("",!0)]),x.value?(q(),Y(t(M),{key:0,class:"bg-surfaceSecondary border-border"},{default:a(()=>[l(t(R),null,{default:a(()=>[s("div",Qe,[s("div",He,[s("div",ze,U(x.value.initials),1),s("div",null,[s("div",$e,U(x.value.name),1),s("div",Ge,U(x.value.email),1)])]),l(t(xe),{variant:"ghost",size:"small",onClick:k},{default:a(()=>[...e[27]||(e[27]=[s("i",{class:"fa-solid fa-xmark text-sm"},null,-1)])]),_:1})])]),_:1})]),_:1})):W("",!0)])):(q(),I("div",Je,[s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[28]||(e[28]=[c(" Contact Name ",-1),s("span",{class:"text-brand-red"},"*",-1)])]),_:1}),l(t(B),{modelValue:g.name,"onUpdate:modelValue":e[4]||(e[4]=u=>g.name=u),type:"text",placeholder:"Enter contact name...",required:C.value==="new",error:t(A).name},null,8,["modelValue","required","error"]),t(A).name?(q(),I("p",Ke,U(t(A).name),1)):W("",!0)]),s("div",Xe,[s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[29]||(e[29]=[c(" Email ",-1),s("span",{class:"text-brand-red"},"*",-1)])]),_:1}),l(t(B),{modelValue:g.email,"onUpdate:modelValue":e[5]||(e[5]=u=>g.email=u),type:"email",placeholder:"contact@example.com",required:C.value==="new",error:t(A).email},null,8,["modelValue","required","error"]),t(A).email?(q(),I("p",Ze,U(t(A).email),1)):W("",!0)]),s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[30]||(e[30]=[c("Phone",-1)])]),_:1}),l(t(B),{modelValue:g.phone,"onUpdate:modelValue":e[6]||(e[6]=u=>g.phone=u),type:"tel",placeholder:"+49..."},null,8,["modelValue"])])]),s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[31]||(e[31]=[c("Company (optional)",-1)])]),_:1}),l(t(B),{modelValue:g.company,"onUpdate:modelValue":e[7]||(e[7]=u=>g.company=u),type:"text",placeholder:"Company name..."},null,8,["modelValue"])])]))]))]),_:1})]),_:1}),l(t(M),{class:"mb-4"},{default:a(()=>[l(t(_),null,{default:a(()=>[l(t(ee),null,{default:a(()=>[...e[32]||(e[32]=[c(" Vehicle Details ",-1),s("span",{class:"text-meta font-normal text-fluid-xs"},"(Optional)",-1)])]),_:1})]),_:1}),l(t(R),{class:"space-y-4"},{default:a(()=>[s("div",null,[e[37]||(e[37]=s("h4",{class:"text-fluid-xs font-bold uppercase text-sub tracking-wider mb-3"},"Basic Information",-1)),s("div",at,[s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[33]||(e[33]=[c("Brand",-1)])]),_:1}),l(t(B),{modelValue:r.brand,"onUpdate:modelValue":e[8]||(e[8]=u=>r.brand=u),type:"text",placeholder:"e.g., VW"},null,8,["modelValue"])]),s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[34]||(e[34]=[c("Model",-1)])]),_:1}),l(t(B),{modelValue:r.model,"onUpdate:modelValue":e[9]||(e[9]=u=>r.model=u),type:"text",placeholder:"e.g., ID.4"},null,8,["modelValue"])]),s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[35]||(e[35]=[c("Year",-1)])]),_:1}),l(t(B),{modelValue:r.year,"onUpdate:modelValue":e[10]||(e[10]=u=>r.year=u),type:"number",min:1900,max:new Date().getFullYear()+1,placeholder:"2024"},null,8,["modelValue","max"])]),s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[36]||(e[36]=[c("Price",-1)])]),_:1}),l(t(B),{modelValue:r.price,"onUpdate:modelValue":e[11]||(e[11]=u=>r.price=u),type:"number",min:0,placeholder:"45000"},null,8,["modelValue"])])])]),s("div",st,[s("div",null,[e[49]||(e[49]=s("h4",{class:"text-fluid-xs font-bold uppercase text-sub tracking-wider mb-3"},"Request Details",-1)),s("div",ot,[s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[38]||(e[38]=[c("Request Type",-1)])]),_:1}),l(t(z),{modelValue:r.requestType,"onUpdate:modelValue":e[12]||(e[12]=u=>r.requestType=u)},{default:a(()=>[l(t($),null,{default:a(()=>[l(t(G),{placeholder:"Select type"})]),_:1}),l(t(J),null,{default:a(()=>[l(t(T),{value:"Quotation"},{default:a(()=>[...e[39]||(e[39]=[c("Quotation",-1)])]),_:1}),l(t(T),{value:"Test Drive"},{default:a(()=>[...e[40]||(e[40]=[c("Test Drive",-1)])]),_:1}),l(t(T),{value:"Information"},{default:a(()=>[...e[41]||(e[41]=[c("Information",-1)])]),_:1}),l(t(T),{value:"Purchase"},{default:a(()=>[...e[42]||(e[42]=[c("Purchase",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[43]||(e[43]=[c("Source",-1)])]),_:1}),l(t(z),{modelValue:r.source,"onUpdate:modelValue":e[13]||(e[13]=u=>r.source=u)},{default:a(()=>[l(t($),null,{default:a(()=>[l(t(G),{placeholder:"Select source"})]),_:1}),l(t(J),null,{default:a(()=>[l(t(T),{value:"Marketing"},{default:a(()=>[...e[44]||(e[44]=[c("Marketing",-1)])]),_:1}),l(t(T),{value:"Website"},{default:a(()=>[...e[45]||(e[45]=[c("Website",-1)])]),_:1}),l(t(T),{value:"Phone"},{default:a(()=>[...e[46]||(e[46]=[c("Phone",-1)])]),_:1}),l(t(T),{value:"Walk-in"},{default:a(()=>[...e[47]||(e[47]=[c("Walk-in",-1)])]),_:1}),l(t(T),{value:"Referral"},{default:a(()=>[...e[48]||(e[48]=[c("Referral",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])]),s("div",null,[e[58]||(e[58]=s("h4",{class:"text-fluid-xs font-bold uppercase text-sub tracking-wider mb-3"},"Vehicle Specs",-1)),s("div",nt,[s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[50]||(e[50]=[c("Fuel Type",-1)])]),_:1}),l(t(z),{modelValue:r.fuelType,"onUpdate:modelValue":e[14]||(e[14]=u=>r.fuelType=u)},{default:a(()=>[l(t($),null,{default:a(()=>[l(t(G),{placeholder:"Select fuel"})]),_:1}),l(t(J),null,{default:a(()=>[l(t(T),{value:"Petrol"},{default:a(()=>[...e[51]||(e[51]=[c("Petrol",-1)])]),_:1}),l(t(T),{value:"Diesel"},{default:a(()=>[...e[52]||(e[52]=[c("Diesel",-1)])]),_:1}),l(t(T),{value:"Electric"},{default:a(()=>[...e[53]||(e[53]=[c("Electric",-1)])]),_:1}),l(t(T),{value:"Hybrid"},{default:a(()=>[...e[54]||(e[54]=[c("Hybrid",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[55]||(e[55]=[c("Gear Type",-1)])]),_:1}),l(t(z),{modelValue:r.gearType,"onUpdate:modelValue":e[15]||(e[15]=u=>r.gearType=u)},{default:a(()=>[l(t($),null,{default:a(()=>[l(t(G),{placeholder:"Select gear"})]),_:1}),l(t(J),null,{default:a(()=>[l(t(T),{value:"Manual"},{default:a(()=>[...e[56]||(e[56]=[c("Manual",-1)])]),_:1}),l(t(T),{value:"Automatic"},{default:a(()=>[...e[57]||(e[57]=[c("Automatic",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])])]),s("div",null,[l(t(V),{class:"block text-sm font-medium text-body mb-1.5"},{default:a(()=>[...e[59]||(e[59]=[c("Request Message",-1)])]),_:1}),l(t(ge),{modelValue:r.requestMessage,"onUpdate:modelValue":e[16]||(e[16]=u=>r.requestMessage=u),rows:2,placeholder:"Customer's message or notes..."},null,8,["modelValue"])])]),_:1})]),_:1}),l(t(M),{class:"bg-surfaceSecondary border-border mb-4"},{default:a(()=>[l(t(_),null,{default:a(()=>[l(t(ee),null,{default:a(()=>[...e[60]||(e[60]=[c("Create Task (Optional)",-1)])]),_:1})]),_:1}),l(t(R),{class:"space-y-3"},{default:a(()=>[e[65]||(e[65]=s("p",{class:"text-sub text-fluid-xs"},[c(" Convert this contact to a lead or opportunity. "),s("span",{class:"font-semibold text-body"},"Requires vehicle details.")],-1)),n.forceType?(q(),Y(t(M),{key:1,class:"bg-white border-border"},{default:a(()=>[l(t(R),{class:"flex items-center gap-3"},{default:a(()=>[e[63]||(e[63]=s("i",{class:"fa-solid fa-info-circle text-primary text-sm"},null,-1)),s("div",null,[s("p",rt," Converting to "+U(n.forceType==="lead"?"Lead":"Opportunity"),1)])]),_:1})]),_:1})):(q(),I("div",ut,[l(t(M),{class:H(["flex-1 border-border",N.value?"cursor-pointer hover:border-primary/30":"cursor-not-allowed opacity-60"])},{default:a(()=>[l(t(R),{class:"flex items-center gap-3"},{default:a(()=>[l(t(re),{modelValue:L.value,"onUpdate:modelValue":e[17]||(e[17]=u=>L.value=u),disabled:!N.value,label:""},null,8,["modelValue","disabled"]),s("div",null,[s("span",{class:H(["text-fluid-xs font-bold",N.value?"text-heading":"text-sub"])}," Mark as Lead ",2),e[61]||(e[61]=s("p",{class:"text-fluid-xs text-sub"},"New lead task",-1))])]),_:1})]),_:1},8,["class"]),l(t(M),{class:H(["flex-1 border-border",N.value?"cursor-pointer hover:border-primary/30":"cursor-not-allowed opacity-60"])},{default:a(()=>[l(t(R),{class:"flex items-center gap-3"},{default:a(()=>[l(t(re),{modelValue:E.value,"onUpdate:modelValue":e[18]||(e[18]=u=>E.value=u),disabled:!N.value,label:""},null,8,["modelValue","disabled"]),s("div",null,[s("span",{class:H(["text-fluid-xs font-bold",N.value?"text-heading":"text-sub"])}," Mark as Opportunity ",2),e[62]||(e[62]=s("p",{class:"text-fluid-xs text-sub"},"New opportunity",-1))])]),_:1})]),_:1},8,["class"])])),!N.value&&!n.forceType?(q(),Y(t(M),{key:2,class:"bg-orange-50 border-orange-200"},{default:a(()=>[l(t(R),{class:"flex items-start gap-2"},{default:a(()=>[...e[64]||(e[64]=[s("i",{class:"fa-solid fa-exclamation-triangle text-orange-600 mt-0.5 text-sm"},null,-1),s("span",{class:"text-fluid-xs text-orange-700"},"Fill in vehicle details to enable lead/opportunity creation",-1)])]),_:1})]),_:1})):W("",!0)]),_:1})]),_:1})],32)),[[me,()=>b.value=!1]])}}};export{ft as _,De as u};
