import{E as c,l as x,j as u,p as d}from"./index-BD7Ni8RS.js";const i=(a=300)=>new Promise(t=>setTimeout(t,a)),C=async(a={})=>{await i();let t=[...c];if(a.status&&(t=t.filter(e=>e.status===a.status)),a.brand&&(t=t.filter(e=>e.brand===a.brand)),a.search){const e=a.search.toLowerCase();t=t.filter(n=>n.brand.toLowerCase().includes(e)||n.model.toLowerCase().includes(e)||n.vin.toLowerCase().includes(e))}return{data:t,total:t.length}},E=async a=>{await i();const t=c.find(e=>e.id===parseInt(a));if(!t)throw new Error("Vehicle not found");return t},L=async a=>{await i();const t={id:c.length+1,...a,stockDays:0};return c.push(t),t},k=async(a,t)=>{await i();const e=c.findIndex(n=>n.id===parseInt(a));if(e===-1)throw new Error("Vehicle not found");return c[e]={...c[e],...t},c[e]},B=async a=>{await i();const t=c.findIndex(e=>e.id===parseInt(a));if(t===-1)throw new Error("Vehicle not found");return c.splice(t,1),{success:!0}},j=x("vehicles",()=>{const a=u([]),t=u(null),e=u(!1),n=u(null),o=u({status:null,brand:null,search:""}),v=d(()=>a.value.length),w=d(()=>a.value.filter(l=>l.status==="Available")),y=d(()=>a.value.reduce((l,s)=>l+s.price,0));async function h(){e.value=!0,n.value=null;try{const l=await C(o.value);a.value=l.data}catch(l){n.value=l.message}finally{e.value=!1}}async function V(l){e.value=!0,n.value=null;try{t.value=await E(l)}catch(s){n.value=s.message}finally{e.value=!1}}async function m(l){e.value=!0,n.value=null;try{const s=await L(l);return a.value.unshift(s),s}catch(s){throw n.value=s.message,s}finally{e.value=!1}}async function p(l,s){e.value=!0,n.value=null;try{const r=await k(l,s),f=a.value.findIndex(b=>b.id===l);return f!==-1&&(a.value[f]=r),r}catch(r){throw n.value=r.message,r}finally{e.value=!1}}async function g(l){e.value=!0,n.value=null;try{await B(l),a.value=a.value.filter(s=>s.id!==l)}catch(s){throw n.value=s.message,s}finally{e.value=!1}}function I(l){o.value={...o.value,...l},h()}return{vehicles:a,currentVehicle:t,loading:e,error:n,filters:o,totalVehicles:v,availableVehicles:w,totalInventoryValue:y,loadVehicles:h,loadVehicleById:V,addVehicle:m,modifyVehicle:p,removeVehicle:g,setFilters:I}});export{j as u};
