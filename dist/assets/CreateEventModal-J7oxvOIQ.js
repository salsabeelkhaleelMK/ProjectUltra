import{u as $,c as b,r as A,A as B,k as F,p as M,o as a,y as V,e as t,z as i,G as c,B as p,d as n,g as N,F as g,i as y,t as m,m as w,j as h,l as j}from"./index-CNXtwH7T.js";import{Q as O}from"./index-X4R71uMA.js";import{_ as Q}from"./ModalShell-C2F0rTBB.js";import{u as W}from"./users-BsZeQM9-.js";const q={class:"space-y-4"},z={class:"grid grid-cols-2 gap-4"},G=["disabled","value"],L=["disabled"],H={label:"Teams"},I=["value"],J={label:"Users"},K=["value"],P={key:0,class:"text-xs text-gray-500 mt-1"},R=["value"],ee={__name:"CreateEventModal",props:{show:{type:Boolean,required:!0},initialDate:{type:String,default:""},dealerships:{type:Array,default:()=>[]},customer:{type:Object,default:null},assignee:{type:String,default:null},disabledFields:{type:Array,default:()=>[]}},emits:["create","cancel"],setup(o,{emit:C}){const u=o,f=C,v=$(),k=W(),x=b(()=>k.assignableUsers),T=b(()=>k.assignableTeams),S=b(()=>s.value.assignee&&s.value.assignee.startsWith("team-")),s=A({type:"test-drive",title:"",date:"",time:"",customer:"",assignee:"",dealership:""});B(()=>u.show,r=>{var e,d;if(r){const l=u.assignee||`user-${((e=v.currentUser)==null?void 0:e.id)||1}`;s.value={type:"test-drive",title:"",date:u.initialDate||"",time:"",customer:((d=u.customer)==null?void 0:d.name)||"",assignee:l,dealership:""}}}),F(()=>{var r;s.value.assignee||(s.value.assignee=u.assignee||`user-${((r=v.currentUser)==null?void 0:r.id)||1}`)});const D=()=>{s.value.title&&s.value.date&&f("create",{...s.value})},E=()=>{f("cancel")};return(r,e)=>(a(),M(Q,{show:o.show,title:"Create New Event",subtitle:"Fill in the details for the new event.",onCancel:E},{actions:V(()=>[j(w(O),{label:"Create Event",variant:"primary",onClick:D})]),default:V(()=>{var d;return[t("div",q,[t("div",null,[e[8]||(e[8]=t("label",{class:"block label-upper mb-2"},"Event Type",-1)),i(t("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>s.value.type=l),class:"input"},[...e[7]||(e[7]=[t("option",{value:"test-drive"},"Test Drive",-1),t("option",{value:"appointment"},"Dealership Visit",-1),t("option",{value:"offsite"},"Offsite Visit",-1),t("option",{value:"workshop"},"Workshop",-1),t("option",{value:"call"},"Call",-1),t("option",{value:"delivery"},"Delivery",-1),t("option",{value:"meeting"},"Meeting",-1)])],512),[[c,s.value.type]])]),t("div",null,[e[9]||(e[9]=t("label",{class:"block label-upper mb-2"},"Title",-1)),i(t("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>s.value.title=l),type:"text",placeholder:"Event title...",class:"input"},null,512),[[p,s.value.title]])]),t("div",z,[t("div",null,[e[10]||(e[10]=t("label",{class:"block label-upper mb-2"},"Date",-1)),i(t("input",{"onUpdate:modelValue":e[2]||(e[2]=l=>s.value.date=l),type:"date",class:"input"},null,512),[[p,s.value.date]])]),t("div",null,[e[11]||(e[11]=t("label",{class:"block label-upper mb-2"},"Time",-1)),i(t("input",{"onUpdate:modelValue":e[3]||(e[3]=l=>s.value.time=l),type:"time",class:"input"},null,512),[[p,s.value.time]])])]),t("div",null,[e[12]||(e[12]=t("label",{class:"block label-upper mb-2"},"Customer",-1)),i(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>s.value.customer=l),type:"text",placeholder:"Customer name...",class:"input",disabled:o.disabledFields.includes("customer"),value:((d=o.customer)==null?void 0:d.name)||s.value.customer},null,8,G),[[p,s.value.customer]])]),t("div",null,[e[14]||(e[14]=t("label",{class:"block label-upper mb-2"},"Assign to",-1)),i(t("select",{"onUpdate:modelValue":e[5]||(e[5]=l=>s.value.assignee=l),class:"input",disabled:o.disabledFields.includes("assignee")},[t("optgroup",H,[(a(!0),n(g,null,y(T.value,l=>(a(),n("option",{key:`team-${l.id}`,value:`team-${l.id}`},m(l.name)+" Team ",9,I))),128))]),t("optgroup",J,[(a(!0),n(g,null,y(x.value,l=>{var U;return a(),n("option",{key:`user-${l.id}`,value:`user-${l.id}`},m(l.name)+m(l.id===((U=w(v).currentUser)==null?void 0:U.id)?" (Me)":""),9,K)}),128))])],8,L),[[c,s.value.assignee]]),S.value?(a(),n("p",P,[...e[13]||(e[13]=[t("i",{class:"fa-solid fa-users text-gray-400"},null,-1),h(" Any available team member will be assigned ",-1)])])):N("",!0)]),t("div",null,[e[16]||(e[16]=t("label",{class:"block label-upper mb-2"},"Dealership",-1)),i(t("select",{"onUpdate:modelValue":e[6]||(e[6]=l=>s.value.dealership=l),class:"input"},[e[15]||(e[15]=t("option",{value:""},"Select dealership...",-1)),(a(!0),n(g,null,y(o.dealerships,l=>(a(),n("option",{key:l,value:l},m(l),9,R))),128))],512),[[c,s.value.dealership]])])])]}),_:1},8,["show"]))}};export{ee as _};
