---
alwaysApply: true
---
# ProjectUltra – Cursor Rules

## 1. Architecture & Data

- **Mock data** only in `src/api/mockData`; **repositories** (`src/repositories/`) use it. Never import mockData from components, views, stores, or composables.
- Data flow: `mockData` → repositories → services → API wrappers (`src/api/*.js`) → Pinia stores (`src/stores/*.js`) → components.

## 2. Components & Reuse

- Reuse shared widgets; check existing components before creating new ones.
- Use **Motork future namespace** for all UI: `@motork/component-library/future/primitives` and `@motork/component-library/future/components`. Only **Toast** may stay on root (`@motork/component-library`) until a future Toast exists.
- **Icons**: All from `lucide-vue-next`; no emoji or other icon sources.

## 3. Styling & Layout

- **Tailwind**: Use Motork theme tokens (`text-foreground`, `text-muted-foreground`, `bg-background`, `bg-muted`, `border-border`, `bg-primary`, `text-primary`, etc.). No arbitrary values (`w-[350px]`, `text-[14px]`), no hardcoded hex, no inline styles for static values.
- **main.css**: Only these exceptions are allowed — (1) custom card shadow (`--mk-dashboard-card-shadow`, `.mk-dashboard-card`, `.shadow-mk-dashboard-card`, `.shadow-selected`), (2) toggle selected state (`[data-state="on"]` / `[aria-pressed="true"]` styling). All other theme semantics come from Motork theme (`@import '@motork/component-library/theme'`).
- **Responsive**: Mobile-first (`flex flex-col md:flex-row`); tables drop columns (no horizontal scroll); filters above content; Flexbox/Grid, no floats/hardcoded heights.

## 4. Build & Deploy

- Run `npm run build` before pushing. Never commit `dist/`. Netlify builds from source via `netlify.toml`.

## 5. Clean Code

- Remove unused components/files immediately. No `console.log` in stores/widgets/shared (debug only, then delete). Delete old files, imports, and routes when refactoring. No commented-out code. Remove duplicate or obsolete re-exports.

## 6. Vue 3 & State

- `<script setup>` for all components. Naming: `PascalCase.vue`, `useSomething.js`, `useXStore`. Prefer `@/` alias imports. All shared state via Pinia only.

## 7. Refactoring

- Files >200 lines or mixed responsibilities → extract subcomponents or composables. Prefer composition over extending large files.

## 8. Modals / Dialogs

- Use **Motork Dialog** primitives (`@motork/component-library/future/primitives`: Dialog, DialogContent, DialogHeader, DialogFooter, DialogOverlay, DialogPortal, DialogTitle); no custom modal wrappers. Use **ComingSoonModal** (`@/components/modals/ComingSoonModal.vue`) for unimplemented features.
- **Structure and styling** (apply to every new or updated dialog):
  - **Root**: `<Dialog :open="show" @update:open="handleOpenChange">` → `<DialogPortal>` → `<DialogOverlay>` + `<DialogContent>`.
  - **Overlay**: `class="fixed inset-0 z-50 bg-black/50"`.
  - **DialogContent**: `class="w-full sm:max-w-2xl max-h-[calc(100vh-4rem)] flex flex-col"` (use `sm:max-w-lg` or `sm:max-w-md` for smaller dialogs), `:show-close-button="true"`.
  - **DialogHeader**: `class="shrink-0"`. Use `DialogTitle`; add `DialogDescription` only when a short subtitle is needed.
  - **Body**: Wrapper `class="flex-1 overflow-y-auto py-4 w-full space-y-6"` (or `py-4 w-full` with inner spacing). Use theme tokens for labels and text (`text-foreground`, `text-muted-foreground`, etc.).
  - **DialogFooter**: `class="shrink-0 flex flex-col sm:flex-row justify-end items-stretch sm:items-center gap-3"`. Cancel = `Button variant="outline"`, primary action = `Button variant="default"`. Buttons: `class="rounded-sm w-full sm:w-auto"`. Primary disabled when form invalid or saving; disabled state uses same blue at 50% opacity (see main.css).
  - **Single-choice options** (e.g. type, outcome): Use individual **Toggle** buttons (`variant="outline"`), not radio buttons. Wrap in `class="outcome-toggle-group flex flex-wrap gap-3"`, each Toggle `class="outcome-toggle-item"`. Bind with `:model-value="formData.type === 'VALUE'"` and `@update:model-value="(p) => selectOption(p ? 'VALUE' : '')"` so one selection works like a radio (and clicking again clears).
